"use strict";(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[196],{55611:(e,t,r)=>{r.d(t,{Jk:()=>y,QA:()=>A,Ui:()=>x,XC:()=>k,ci:()=>w,oT:()=>U,wf:()=>m});var i=r(63939),n=r(50932),s=r(72739),a=r(729),h=r(31865),u=r(37246),o=r(14686),f=r(60264),l=r(71517),d=r(37837),c=r(23991),p=r(83314),v=3;function b(e){var t=e.readU(9),r=e.readU(3),i=e.readU(2),n=e.readU(2),s=e.readU(3);e.readU(5),e.readU(2);var a=e.readU(6),h=e.readU(7),u=e.readU(1),o=e.readU(8),f=e.readU(1),l=e.readU(1),d=[],c=[];if(a){for(var p=0;p<a-1;p++)d[p]=e.readU(8);d[a-1]=e.readU(6)}else e.readU(6);if(r>1){for(var v=0,b=r-2;b>=0;--b)v|=e.readU(1)<<b;for(var g=r;g<=8&&r>1;++g)e.readU(1);for(var U=r-2;U>=0;--U)v&1<<U&&(c[U]=e.readU(8))}var y=e.readU(8),w=[];if(y)for(var A=0;A<y;A++)w.push(e.readU(8));return{olsIdx:t,numSublayers:r,bitDepthMinus8:s,chromaFormatIdc:n,constantFrameRate:i,generalProfileIdc:h,generalTierFlag:u,generalLevelIdc:o,ptlFrameOnlyConstraintFlag:f,ptlMultilayerEnabledFlag:l,generalConstraintInfo:d,sublayerLevelIdc:c,generalSubProfileIdc:w,maxPictureWidth:e.readU(16),maxPictureHeight:e.readU(16),avgFramerate:e.readU(16)}}function g(e,t,r){var i,n=t[0];if(n){var h=m(n),u=h.generalConstraintInfo;u.length||(u=new Array(12).fill(0));var o=new p.A;if(o.writeU(9,0),o.writeU(3,h.spsMaxSublayersMinus1+1),o.writeU(2,1),o.writeU(2,h.chromaFormatIdc),o.writeU(3,h.bitDepthMinus8),o.writeU(5,31),o.writeU(2,0),o.writeU(6,u.length),o.writeU(7,h.profile),o.writeU1(h.tierFlag),o.writeU(8,h.level),o.writeU1(h.ptlFrameOnlyConstraintFlag),o.writeU1(h.ptlMultilayerEnabledFlag),u.length){for(var f=0;f<u.length-1;f++)o.writeU(8,u[f]);o.writeU(6,u[u.length-1])}else o.writeU(6,63);if(h.spsMaxSublayersMinus1+1>1){for(var l=0,d=h.spsMaxSublayersMinus1-1;d>=0;d--)l=l<<1|h.ptlSublayerLevelPresentFlag[d];o.writeU(h.spsMaxSublayersMinus1,l);for(var c=h.spsMaxSublayersMinus1+1;c<=8&&h.spsMaxSublayersMinus1>0;++c)o.writeU1(0);for(var b=h.spsMaxSublayersMinus1-1;b>=0;b--)h.ptlSublayerLevelPresentFlag[b]&&o.writeU(8,h.sublayerLevelIdc[b])}o.writeU(8,h.generalSubProfileIdc.length);for(var g=0;g<h.generalSubProfileIdc.length;g++)o.writeU(8,h.sublayerLevelIdc[g]);o.writeU(16,h.width),o.writeU(16,h.height),o.writeU(16,0),o.padding(),i=o.getBuffer().subarray(0,o.getPointer())}var U=2+(i?i.length:0);e.length&&(U+=3,U=e.reduce((function(e,t){return e+2+t.length}),U)),t.length&&(U+=3,U=t.reduce((function(e,t){return e+2+t.length}),U)),r.length&&(U+=3,U=r.reduce((function(e,t){return e+2+t.length}),U));var y=new Uint8Array(U),w=new a.A(y,!0);w.writeUint8(v<<1|(i?1:0)|248),i&&w.writeBuffer(i);var A=0;return e.length&&A++,t.length&&A++,r.length&&A++,w.writeUint8(A),e.length&&(w.writeUint8(142),w.writeUint16(e.length),s.__(e,(function(e){w.writeUint16(e.length),w.writeBuffer(e)}))),t.length&&(w.writeUint8(143),w.writeUint16(t.length),s.__(t,(function(e){w.writeUint16(e.length),w.writeBuffer(e)}))),r.length&&(w.writeUint8(144),w.writeUint16(r.length),s.__(r,(function(e){w.writeUint16(e.length),w.writeBuffer(e)}))),y}function U(e){var t,r=!1,i=(0,f.py)(e);if(i.length>=2){var n=[],h=[],u=[];i.forEach((function(e){var t=e[1]>>>3&31;14===t?n.push(e):15===t?h.push(e):16===t&&u.push(e)})),h.length&&u.length&&(t=g(n,h,u),i=i.filter((function(e){var t=e[1]>>>3&31;return 14!==t&&15!==t&&16!==t&&20!==t})))}var l=i.reduce((function(e,t){return e+v+1+t.length}),0),c=(0,d.sY)(l),p=(0,o.s3)(c,l),b=new a.A(p);return s.__(i,(function(e){3===v?b.writeUint32(e.length):2===v?b.writeUint24(e.length):1===v?b.writeUint16(e.length):b.writeUint8(e.length),b.writeBuffer(e.subarray(0));var t=e[1]>>>3&31;8!==t&&7!==t&&9!==t&&10!==t||(r=!0)})),{bufferPointer:c,length:l,extradata:t,key:r}}function y(e,t){var r;if(1&i.f[15](e+36)){var n=(0,l.iI)(e);if(!(0,f.Bs)(n)){for(var s=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:v,a=[],u=[],c=[],p=new h.A(n);p.remainingSize()>0;){var b;b=3===s?p.readUint32():2===s?p.readUint24():1===s?p.readUint16():p.readUint8();var U=n.subarray(0|Number(0xffffffffn&p.getPos()),(0|Number(0xffffffffn&p.getPos()))+b);p.skip(b);var y=U[1]>>>3&31;15===y?u.push(U):16===y?c.push(U):14===y&&a.push(U)}if(u.length||c.length||a.length){var w=g(a,u,c),A=(0,d.sY)(w.length);(0,o.lW)(A,w.length,w),(0,l.Ow)(e,1,A,w.length)}}}}function w(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&i.f[15](e+36)||t){var r=(0,l.iI)(e);if((0,f.Bs)(r)){var s=(0,f.py)(r);if(s.length>2){var a=[],h=[],u=[];if(s.forEach((function(e){var t=e[1]>>>3&31;14===t?a.push(e):15===t?h.push(e):16===t&&u.push(e)})),a.length&&h.length&&u.length){var c=g(a,h,u),p=(0,d.sY)(c.length);(0,o.lW)(p,c.length,c),(0,l.Ow)(e,1,p,c.length),n.M[15](e+36,1|i.f[15](e+36))}}}}}function A(e,t){var r=m(t),i=r.profile,n=r.level,s=r.width,a=r.height;e.codecpar.profile=i,e.codecpar.level=n,e.codecpar.width=s,e.codecpar.height=a}function k(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=t[0]>>>1&3;var r=function(e){var t=new h.A(e,!0);if(1&t.readUint8()){var r=new u.A;r.appendBuffer(e.subarray(1)),b(r),t.skip(r.getPos())}for(var i=[],n=[],s=[],a=t.readUint8(),o=0;o<a;o++){var f=31&t.readUint8(),l=1;13!==f&&12!==f&&(l=t.readUint16());for(var d=[],c=0;c<l;c++){var p=t.readUint16();d.push(t.readBuffer(p))}14===f?i=d:15===f?n=d:16===f&&(s=d)}return{vpss:i,spss:n,ppss:s}}(t).spss;r.length&&A(e,r[0])}}function m(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r,i,n,s,a=0,h=0,o=0,l=0,d=0,p=[],v=[],b=[],g=[],U=(0,f.BN)(e.subarray(t)),y=new u.A(U.length);y.appendBuffer(U),y.readU1(),y.readU1(),y.readU(6),y.readU(5),y.readU(3),y.readU(8);var w=y.readU(3);s=y.readU(2);var A=y.readU(2);if(y.readU(1)){if(a=y.readU(7),o=y.readU(1),h=y.readU(8),l=y.readU(1),d=y.readU(1),y.readU(1)){for(var k=0;k<8;k++)p[k]=y.readU(8);p[8]=y.readU(7);var m=y.readU(8);y.readU(m)}y.skipPadding();for(var x=w-1;x>=0;x--)v[x]=y.readU(1);y.skipPadding();for(var P=w-1;P>=0;P--)v[P]&&(b[P]=y.readU(8));var _=y.readU(8);if(_)for(var B=0;B<_;B++)g[B]=y.readU(32)}y.readU1(),y.readU1()&&y.readU1();var M=r=c.xb(y),I=i=c.xb(y);if(y.readU1()&&(c.xb(y),c.xb(y),c.xb(y),c.xb(y)),y.readU1()){var S,F=c.xb(y),L=A+5,R=1<<L,z=M/(1<<L),E=I/(1<<L),N=Math.ceil(Math.log2(z)),q=Math.ceil(Math.log2(E)),T=0,C=0;F>0&&(C=y.readU1(),T=y.readU1());for(var D=0;F>0&&D<=F;D++)T&&0!=D||(D>0&&M>R&&y.readU(N),D>0&&I>R&&y.readU(q),D<F&&M>R&&y.readU(N),D<F&&I>R&&y.readU(q)),C||y.readU(2);if(S=c.xb(y)+1,y.readU(1)&&y.readU(1))for(var O=0;O<=F;O++)y.readU(S)}n=c.xb(y),y.readU(1),y.readU(1);var W=y.readU(4),V=y.readU(1),Y=0;V&&(Y=c.xb(y));for(var Q=[],K=y.readU(2),X=0;X<8*K;X++)Q[X]=y.readU(1);return{profile:a,level:h,width:r,height:i,chromaFormatIdc:s,bitDepthMinus8:n,generalProfileSpace:0,tierFlag:o,generalConstraintInfo:p,generalSubProfileIdc:g,ptlFrameOnlyConstraintFlag:l,ptlMultilayerEnabledFlag:d,spsMaxSublayersMinus1:w,ptlSublayerLevelPresentFlag:v,sublayerLevelIdc:b,sps_log2_max_pic_order_cnt_lsb_minus4:W,sps_poc_msb_cycle_flag:V,sps_poc_msb_cycle_len_minus1:Y,sps_num_extra_ph_bytes:K,sps_extra_ph_bit_present_flag:Q}}}function x(e){0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(e=function(e){var t=(0,f.py)(e);if(t.length>=2){var r=[],i=[],n=[];if(t.forEach((function(e){var t=e[1]>>>3&31;14===t?r.push(e):15===t?i.push(e):16===t&&n.push(e)})),i.length&&n.length)return g(r,i,n)}}(e));var t=new u.A;return t.appendBuffer(e),1&t.readU(8)?b(t):{}}},85947:(e,t,r)=>{r.d(t,{A:()=>a});var i=r(78716),n=r(81570),s=r(134),a=function(){function e(){(0,i.A)(this,e),(0,s.A)(this,"type",-1),(0,s.A)(this,"onStreamAdd",void 0)}return(0,n.A)(e,[{key:"destroy",value:function(e){}}]),e}()},95808:(e,t,r)=>{r.r(t),r.d(t,{default:()=>L});var i=r(88435),n=r.n(i),s=r(25182),a=r(78716),h=r(81570),u=r(77193),o=r(25767),f=r(43070),l=r(31060),d=r(134),c=r(36443),p=r.n(c),v=r(63939),b=r(50932),g=r(9705),U=r(85947),y=r(14686),w=r(37837),A=r(71517),k=r(95335),m=r(92647),x=r(55611),P=r(77231),_=r(37246),B=r(23991),M=r(37805);function I(e,t,r){return t=(0,o.A)(t),(0,u.A)(e,S()?n()(t,r||[],(0,o.A)(e).constructor):t.apply(e,r))}function S(){try{var e=!Boolean.prototype.valueOf.call(n()(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}var F={framerate:{num:30,den:1}},L=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.A)(this,t),e=I(this,t),(0,d.A)((0,f.A)(e),"type",9),(0,d.A)((0,f.A)(e),"options",void 0),(0,d.A)((0,f.A)(e),"currentDts",void 0),(0,d.A)((0,f.A)(e),"currentPts",void 0),(0,d.A)((0,f.A)(e),"step",void 0),(0,d.A)((0,f.A)(e),"slices",void 0),(0,d.A)((0,f.A)(e),"naluPos",void 0),(0,d.A)((0,f.A)(e),"queue",void 0),(0,d.A)((0,f.A)(e),"bitReader",void 0),(0,d.A)((0,f.A)(e),"sliceType",void 0),(0,d.A)((0,f.A)(e),"naluType",void 0),(0,d.A)((0,f.A)(e),"poc",void 0),(0,d.A)((0,f.A)(e),"pocTid0",void 0),(0,d.A)((0,f.A)(e),"sps",void 0),(0,d.A)((0,f.A)(e),"naluReader",void 0),e.options=k.extend({},F,r),e}var r,i,n,u,o;return(0,l.A)(t,e),(0,h.A)(t,[{key:"init",value:function(e){e.ioReader&&e.ioReader.setEndian(!1),this.slices=[],this.queue=[],this.bitReader=new _.A(500),this.naluReader=new M.A}},{key:"isFrameNalu",value:function(e){return(e[1===e[2]?4:5]>>>3&31)<12}},{key:"readNaluFrame",value:(o=(0,s.A)(p().mark((function e(t){var r,i,n,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,i=this.slices,this.slices=[],i.length&&(r=this.isFrameNalu(i[0]));case 4:return e.next=7,this.naluReader.read(t.ioReader);case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return",i);case 10:if(s=n[1===n[2]?4:5]>>>3&31,!this.isFrameNalu(n)){e.next=26;break}if(!r){e.next=22;break}if(!(n[1===n[2]?5:6]>>>7)){e.next=19;break}return this.slices.push(n),e.abrupt("return",i);case 19:i.push(n);case 20:e.next=24;break;case 22:i.push(n),r=!0;case 24:e.next=32;break;case 26:if(!r||20!==s&&19!==s&&15!==s&&14!==s&&16!==s&&12!==s&&13!==s){e.next=31;break}return this.slices.push(n),e.abrupt("return",i);case 31:i.push(n);case 32:e.next=4;break;case 34:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"readHeader",value:(u=(0,s.A)(p().mark((function e(t){var r,i,n,s,a,h,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.createStream()).codecpar.codecType=0,r.codecpar.codecId=196,r.timeBase.den=P.SF,r.timeBase.num=1,r.codecpar.bitFormat=2,this.currentDts=BigInt(0),this.currentPts=BigInt(0),this.naluPos=BigInt(0),this.poc=0,this.pocTid0=0,this.step=BigInt(Math.floor(P.SF/this.options.framerate.num*this.options.framerate.den));case 12:return e.next=15,this.readNaluFrame(t);case 15:if((i=e.sent).length){e.next=18;break}return e.abrupt("return",-1048576);case 18:if(n=(0,m.A)(Uint8Array,i),!(s=(0,m.A)(Uint8Array,i.filter((function(e){var t=e[1===e[2]?4:5]>>>3&31;return 14===t||15===t||16===t}))))){e.next=44;break}return r.codecpar.extradata=(0,w.sY)(s.length),(0,y.lW)(r.codecpar.extradata,s.length,s),r.codecpar.extradataSize=s.length,a=i.find((function(e){return 15==(e[1===e[2]?4:5]>>>3&31)})),x.QA(r,a),this.sps=x.wf(a),h=(0,A._5)(),u=(0,w.sY)(n.length),(0,y.lW)(u,n.length,n),(0,A.NX)(h,u,n.length),b.M[17](h+56,this.naluPos),this.naluPos+=BigInt(Math.floor(n.length)),b.M[17](h+16,this.currentDts),this.currentDts+=this.step,b.M[17](h+8,this.currentPts),this.currentPts+=this.step,b.M[15](h+32,r.index),b.M[15](h+36,1|v.f[15](h+36)),b.M[15](h+72,r.timeBase.num),b.M[15](h+76,r.timeBase.den),b.M[15](h+80,2),t.interval.packetBuffer.push(h),e.abrupt("break",47);case 44:this.naluPos+=BigInt(Math.floor(n.length)),e.next=12;break;case 47:return e.abrupt("return",0);case 48:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"computePoc",value:function(e,t,r,i){this.bitReader.clear(),this.bitReader.appendBuffer(r.subarray(0,500)),i&&this.bitReader.readU1();var n=this.bitReader.readU1(),s=this.bitReader.readU1(),a=0;n&&(a=this.bitReader.readU1()),this.bitReader.readU1()&&this.bitReader.readU1(),B.xb(this.bitReader);var h=this.bitReader.readU(this.sps.sps_log2_max_pic_order_cnt_lsb_minus4+4);a&&B.xb(this.bitReader);for(var u=0;u<8*this.sps.sps_num_extra_ph_bytes;u++)this.sps.sps_extra_ph_bit_present_flag[u]&&this.bitReader.readU1();var o=0,f=0;this.sps.sps_poc_msb_cycle_flag&&(f=this.bitReader.readU1())&&(o=this.bitReader.readU(this.sps.sps_poc_msb_cycle_len_minus1+1));var l=1<<this.sps.sps_log2_max_pic_order_cnt_lsb_minus4+4,d=0;if(8===e||7===e)d=f?o*l:0;else{var c=this.pocTid0,p=c&l-1,v=c-p;d=f?o*l:h<p&&p-h>=l/2?v+l:h>p&&h-p>l/2?v-l:v}this.poc=d+h,0!=t||s||2===e||3===e||(this.pocTid0=this.poc)}},{key:"readAVPacket_",value:(n=(0,s.A)(p().mark((function e(t,r){var i,n,s,a,h,u,o=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.getStreamByMediaType(0),e.next=3,this.readNaluFrame(t);case 3:if((n=e.sent).length){e.next=6;break}return e.abrupt("return",-1048576);case 6:return this.sliceType=-1,s=!1,a=!0,n.forEach((function(e){var t=1===e[2]?e[4]:e[5],r=t>>>3&31,i=(7&t)-1;15===r&&(o.sps=x.wf(e)),8!==r&&7!==r||(s=!0),19===r&&o.computePoc(r,i,e.subarray(1===e[2]?5:6),!1),r<14&&a&&(a=!1,o.naluType=r,e[1===e[2]?5:6]>>>7&&o.computePoc(r,i,e.subarray(1===e[2]?5:6),!0))})),h=(0,m.A)(Uint8Array,n),u=(0,w.sY)(h.length),(0,y.lW)(u,h.length,h),(0,A.NX)(r,u,h.length),b.M[17](r+56,this.naluPos),this.naluPos+=BigInt(Math.floor(h.length)),b.M[17](r+16,this.currentDts),this.currentDts+=this.step,b.M[15](r+32,i.index),b.M[15](r+72,i.timeBase.num),b.M[15](r+76,i.timeBase.den),b.M[15](r+80,2),s&&b.M[15](r+36,1|v.f[15](r+36)),e.abrupt("return",0);case 24:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"readAVPacket",value:(i=(0,s.A)(p().mark((function e(t,r){var i,n,s,a,h=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.queue.length,n=function(){h.queue.length>1&&h.queue.sort((function(e,t){return e.poc-t.poc>0?1:-1}));for(var e=0;e<h.queue.length;e++)b.M[17](h.queue[e].avpacket+8,h.currentPts),h.currentPts+=h.step;h.queue.length>1&&h.queue.sort((function(e,t){return v.f[17](e.avpacket+16)-v.f[17](t.avpacket+16)>BigInt(0)?1:-1})),h.queue.length&&((0,A.rN)(r,h.queue[0].avpacket),(0,A.Qe)(h.queue[0].avpacket));for(var i=1;i<h.queue.length;i++)t.interval.packetBuffer.push(h.queue[i].avpacket);h.queue.length=0};case 2:return s=(0,A._5)(),e.next=6,this.readAVPacket_(t,s);case 6:if(!((a=e.sent)<0)){e.next=15;break}if((0,A.Qe)(s),!this.queue.length){e.next=14;break}return n(),e.abrupt("return",0);case 14:return e.abrupt("return",a);case 15:if(!(1&v.f[15](s+36)||9===this.naluType||1===this.sliceType||2===this.sliceType)){e.next=26;break}if(!(1===i||(9===this.naluType||1&v.f[15](s+36))&&this.queue.length)){e.next=22;break}return n(),this.queue.push({avpacket:s,poc:this.poc}),e.abrupt("return",0);case 22:this.queue.push({avpacket:s,poc:this.poc}),i++;case 24:e.next=27;break;case 26:this.queue.push({avpacket:s,poc:this.poc});case 27:e.next=2;break;case 29:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"seek",value:(r=(0,s.A)(p().mark((function e(t,r,i,n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",BigInt(g.E$));case 1:case"end":return e.stop()}}),e)}))),function(e,t,i,n){return r.apply(this,arguments)})},{key:"getAnalyzeStreamsCount",value:function(){return 1}}]),t}(U.A)},37805:(e,t,r)=>{r.d(t,{A:()=>l});var i=r(25182),n=r(78716),s=r(81570),a=r(134),h=r(36443),u=r.n(h),o=r(60264),f=r(92647),l=function(){function e(){(0,n.A)(this,e),(0,a.A)(this,"buffer",void 0),(0,a.A)(this,"pos",void 0),(0,a.A)(this,"end",void 0),(0,a.A)(this,"ended",void 0),this.buffer=new Uint8Array(102400),this.pos=0,this.end=0,this.ended=!1}var t;return(0,s.A)(e,[{key:"read",value:(t=(0,i.A)(u().mark((function e(t){var r,i,n,s,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.ended&&this.pos>=this.end)){e.next=2;break}return e.abrupt("return");case 2:if(r=[],!(this.pos<this.end-4)){e.next=15;break}if(!((i=o.Ky(this.buffer.subarray(this.pos,this.end-4),3)).offset>-1)){e.next=11;break}return n=this.buffer.slice(this.pos,this.pos+i.offset),this.pos+=i.offset,e.abrupt("return",n);case 11:r.push(this.buffer.slice(this.pos,this.end-4)),this.buffer.copyWithin(0,this.end-4,this.end),this.pos=0,this.end=4;case 15:if(this.ended||!(this.end<this.buffer.length)){e.next=29;break}return e.prev=17,e.next=20,t.readToBuffer(this.buffer.length-this.end,this.buffer.subarray(this.end));case 20:s=e.sent,this.end+=s,e.next=29;break;case 24:if(e.prev=24,e.t0=e.catch(17),this.ended=!0,!(this.pos>=this.end)){e.next=29;break}return e.abrupt("return",r.length?(0,f.A)(Uint8Array,r):null);case 29:if(!((a=o.Ky(this.buffer.subarray(this.pos,this.end-4),r.length?0:3)).offset>-1)){e.next=36;break}return r.push(this.buffer.slice(this.pos,this.pos+a.offset)),this.pos+=a.offset,e.abrupt("return",(0,f.A)(Uint8Array,r));case 36:if(!this.ended){e.next=42;break}return r.push(this.buffer.slice(this.pos,this.end)),this.pos=this.end=0,e.abrupt("return",(0,f.A)(Uint8Array,r));case 42:r.push(this.buffer.slice(this.pos,this.end-4)),this.buffer.copyWithin(0,this.end-4,this.end),this.pos=0,this.end=4;case 46:e.next=15;break;case 48:case"end":return e.stop()}}),e,this,[[17,24]])}))),function(e){return t.apply(this,arguments)})},{key:"reset",value:function(){this.pos=0,this.end=0,this.ended=!1}}]),e}()},23991:(e,t,r)=>{function i(e){for(var t=0;t<32&&0===e.readU1();)t++;return e.readU(t)+((1<<t)-1)}function n(e){var t=i(e);return 1&t?(t+1)/2:-t/2}r.d(t,{$x:()=>n,xb:()=>i})},39381:(e,t,r)=>{r.d(t,{E3:()=>s,Sg:()=>o,Y0:()=>u,ht:()=>h,r8:()=>n,yd:()=>a});var i=r(63939);function n(e){return i.f[2](e)}function s(e){return n(e+1)<<8|n(e)}function a(e){return n(e)<<8|n(e+1)}function h(e){return n(e)<<16|n(e+1)<<8|n(e+2)}function u(e){return s(e+2)<<16|s(e)}function o(e){return a(e)<<16|a(e+2)}},60264:(e,t,r)=>{function i(e){return e.length>4&&0===e[0]&&0===e[1]&&(1===e[2]||0===e[2]&&1===e[3])}function n(e,t){for(var r=0,i=t;i<e.length;i++)switch(e[i]){case 0:r++;break;case 1:if(r>=2)return{offset:i-Math.min(r,3),startCode:Math.min(r+1,4)};r=0;break;default:r=0}return{offset:-1,startCode:0}}function s(e){for(var t=[],r=n(e,0),i={offset:-1,startCode:0};(i=n(e,r.offset+r.startCode)).offset>-1;)t.push(e.subarray(r.offset+r.startCode,i.offset,!0)),r=i;return t.push(e.subarray(r.offset+r.startCode,void 0,!0)),t}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;r||(r=e.length);for(var i=new Uint8Array(e.length),n=0,s=0,a=0;a<e.length;a++){if(a>=t&&a<r)if(0===e[a])n++;else if(3===e[a]&&2===n&&a+1<e.length&&e[a+1]<=3){if(++a===e.length)break;n=0===e[a]?1:0}else n=0;i[s++]=e[a]}return i.slice(0,s)}r.d(t,{BN:()=>a,Bs:()=>i,Ky:()=>n,py:()=>s})},37246:(e,t,r)=>{r.d(t,{A:()=>h});var i=r(78716),n=r(81570),s=r(134),a=r(4624),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,i.A)(this,e),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"bitsLeft",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"endPointer",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.size=t,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}return(0,n.A)(e,[{key:"peekU1",value:function(){(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush();var e=this.pointer,t=this.bitsLeft;return 0===t&&(e++,t=8),this.buffer[e]>>t-1&1}},{key:"readU1",value:function(){var e;return(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush(),this.bitsLeft--,e=this.buffer[this.pointer]>>this.bitsLeft&1,0===this.bitsLeft&&(this.pointer++,this.bitsLeft=8),e}},{key:"readU",value:function(e){for(var t=0,r=0;r<e;r++)t|=this.readU1()<<e-r-1;return t}},{key:"remainingLength",value:function(){return this.endPointer-this.pointer}},{key:"getPos",value:function(){return this.pointer}},{key:"skip",value:function(e){var t=(e-e%8)/8;this.pointer+=t;var r=e%8;this.bitsLeft<=r?(this.pointer++,this.bitsLeft=8-(r-this.bitsLeft)):this.bitsLeft-=r}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(0===this.bitsLeft&&this.pointer++,!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);var e=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(e<0)throw this.error=e,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+e,this.pointer=0}else{var t=this.onFlush(this.buffer);if(this.endPointer=t,this.pointer=0,this.bitsLeft=8,t<0)throw this.error=t,Error("IOReader error, flush failed")}}},{key:"getBuffer",value:function(){return this.buffer}},{key:"appendBuffer",value:function(e){if(this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else{var t=Math.min(this.size-this.endPointer,e.length);this.buffer.set(e.subarray(0,t),this.endPointer),this.endPointer+=t,a.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src/common/io/BitReader.ts",190)}}},{key:"clear",value:function(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0}},{key:"skipPadding",value:function(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++)}}]),e}()},83314:(e,t,r)=>{r.d(t,{A:()=>a});var i=r(78716),n=r(81570),s=r(134),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,i.A)(this,e),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"bitPointer",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),this.pointer=0,this.bitPointer=0,this.size=t,this.error=0,this.buffer=new Uint8Array(this.size)}return(0,n.A)(e,[{key:"writeU1",value:function(e){(this.remainingLength()<1||1===this.remainingLength()&&this.bitPointer>=8)&&this.flush(),1&e?this.buffer[this.pointer]|=1<<7-this.bitPointer:this.buffer[this.pointer]&=~(1<<7-this.bitPointer),this.bitPointer++,8===this.bitPointer&&(this.pointer++,this.bitPointer=0)}},{key:"writeU",value:function(e,t){for(var r=0;r<e;r++)this.writeU1(t>>e-r-1&1)}},{key:"remainingLength",value:function(){return this.size-this.pointer}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("BSWriter error, flush failed because of no flush callback");if(this.pointer)if(this.bitPointer&&this.pointer>1){var e=this.onFlush(this.buffer.subarray(0,this.pointer-1));if(0!==e)throw this.error=e,Error("BSWriter error, flush failed");this.buffer[0]=this.buffer[this.pointer]}else if(0===this.bitPointer){var t=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==t)throw this.error=t,Error("BSWriter error, flush failed")}this.pointer=0}},{key:"padding",value:function(){for(;0!==this.bitPointer;)this.writeU1(0)}},{key:"clear",value:function(){this.pointer=0,this.bitPointer=0,this.error=0}},{key:"getBuffer",value:function(){return this.buffer}},{key:"getPointer",value:function(){return this.pointer}}]),e}()},729:(e,t,r)=>{r.d(t,{A:()=>u});var i=r(78716),n=r(81570),s=r(134),a=r(4624),h=r(50011),u=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,i.A)(this,e),(0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"byteStart",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!r}return(0,n.A)(e,[{key:"writeUint8",value:function(e){this.data.setUint8(this.pos+++this.byteStart,e)}},{key:"writeUint16",value:function(e){this.data.setUint16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeUint24",value:function(e){var t=3840&e,r=240&e,i=15&e;this.littleEndian?(this.writeUint8(i),this.writeUint8(r),this.writeUint8(t)):(this.writeUint8(t),this.writeUint8(r),this.writeUint8(i))}},{key:"writeUint32",value:function(e){this.data.setUint32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeUint64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeUint32(Number(t)),this.writeUint32(Number(r))):(this.writeUint32(Number(r)),this.writeUint32(Number(t)))}},{key:"writeInt8",value:function(e){this.data.setInt8(this.pos+++this.byteStart,e)}},{key:"writeInt16",value:function(e){this.data.setInt16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeInt32",value:function(e){this.data.setInt32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeInt64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeInt32(Number(t)),this.writeInt32(Number(r))):(this.writeInt32(Number(r)),this.writeInt32(Number(t)))}},{key:"writeFloat",value:function(e){this.data.setFloat32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeDouble",value:function(e){this.data.setFloat64(this.pos+this.byteStart,e,this.littleEndian),this.pos+=8}},{key:"getPos",value:function(){return this.pos}},{key:"seek",value:function(e){e>this.size&&(e=this.size),this.pos=Math.max(0,e)}},{key:"skip",value:function(e){this.seek(this.pos+e)}},{key:"back",value:function(e){this.seek(this.pos-e)}},{key:"remainingSize",value:function(){return this.size-this.pos}},{key:"writeBuffer",value:function(e){var t=e.length;this.remainingSize()<t&&(t=this.remainingSize(),a.R8("the remaining buffer size is smaller then the wrote buffer, hope set ".concat(e.length,", but set ").concat(t),"src/common/io/BufferWriter.ts",211)),this.buffer.set(e,this.pos),this.pos+=e.length}},{key:"writeString",value:function(e){var t=h.encode(e);return this.writeBuffer(t),t.length}},{key:"getWroteBuffer",value:function(){return this.buffer.subarray(0,this.pos)}},{key:"resetBuffer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}}]),e}()}}]);