"use strict";(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[282],{65451:(t,e,i)=>{i.d(e,{Ij:()=>h,XC:()=>c,kt:()=>o});var r=i(31865),n=i(729),a=i(44328),s=[480,960,1920,2880,480,960,1920,2880,480,960,1920,2880,480,960,480,960,120,240,480,960,120,240,480,960,120,240,480,960,120,240,480,960];function o(t){var e,i,r=0;if(t.length<1)return 0;switch(e=t[0],i=s[e>>3],3&e){case 0:r=1;break;case 1:case 2:r=2;break;case 3:if(t.length<2)return 0;r=63&t[1]}return r*i}function c(t,e){if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&e.length>=19){var i=new r.A(e,!1);i.skip(9),t.codecpar.chLayout.nbChannels=i.readUint8(),t.codecpar.initialPadding=i.readUint16(),t.codecpar.sampleRate=i.readUint32(),t.codecpar.seekPreroll=Number((0,a.k)(BigInt(80),{den:1e3,num:1},{den:48e3,num:1}))}}function h(t){var e=new Uint8Array(19),i=new n.A(e,!1);return i.writeString("OpusHead"),i.writeUint8(1),i.writeUint8(t.chLayout.nbChannels),i.writeUint16(t.initialPadding),i.writeUint32(t.sampleRate),e}},85947:(t,e,i)=>{i.d(e,{A:()=>s});var r=i(78716),n=i(81570),a=i(134),s=function(){function t(){(0,r.A)(this,t),(0,a.A)(this,"type",-1),(0,a.A)(this,"onStreamAdd",void 0)}return(0,n.A)(t,[{key:"destroy",value:function(t){}}]),t}()},51660:(t,e,i)=>{i.d(e,{A:()=>o});var r=i(77231),n=i(4624),a=i(9705),s="src/avformat/formats/mpegts/function/parsePES.ts";function o(t){var e=t.data,i=e[3],o=e[4]<<8|e[5],c=0,h=0,u=0;if(188!==i&&190!==i&&191!==i&&240!==i&&241!==i&&255!==i&&242!==i&&248!==i){for(var d=r.Dh,A=r.Dh;;){if(6+h>=e.length)return;if(255!==(u=e[6+h]))break;h++}if(64==(192&u)&&(u=e[6+(h+=2)]),32==(224&u))c+=5,d=d=BigInt(Math.floor(536870912*(14&e[6+h])+4194304*(255&e[7+h])+16384*(254&e[8+h])+128*(255&e[9+h])+(254&e[10+h])/2)),16&u?(A=BigInt(Math.floor(536870912*(14&e[11+h])+4194304*(255&e[12+h])+16384*(254&e[13+h])+128*(255&e[14+h])+(254&e[15+h])/2)),c+=5):A=d;else if(128==(192&u)){var p=(192&e[7+h])>>>6;c=3+e[8+h],2!==p&&3!==p||(d=BigInt(Math.floor(536870912*(14&e[9+h])+4194304*(255&e[10+h])+16384*(254&e[11+h])+128*(255&e[12+h])+(254&e[13+h])/2)),A=3===p?BigInt(Math.floor(536870912*(14&e[14+h])+4194304*(255&e[15+h])+16384*(254&e[16+h])+128*(255&e[17+h])+(254&e[18+h])/2)):d)}else{if(15!==u)return n.z3("invalid data",s,121),a.LR;c=1}t.dts=A,t.pts=d;var l=6+h+c,f=0;if(0!==o){if(o<h+c)return void n.z3("Malformed PES: PES_packet_length < 3 + PES_header_data_length",s,133);f=o-(h+c)}else f=e.byteLength-l;t.payload=e.subarray(l,l+f)}else if((188===i||191===i||240===i||241===i||255===i||242===i||248===i)&&6===t.streamId){var g;g=0!==o?o:e.byteLength-6,t.payload=e.subarray(6,6+g)}return 0}},6403:(t,e,i)=>{i.d(e,{Cd:()=>A,I4:()=>l,am:()=>u,kJ:()=>p,pi:()=>d,xf:()=>f}),i(77193),i(25767),i(31060);var r=i(81570),n=i(78716),a=i(134),s=i(80662),o=i.n(s),c=(i(88435),i(77231)),h=(0,r.A)((function t(){(0,n.A)(this,t),(0,a.A)(this,"discontinuityIndicator",0),(0,a.A)(this,"randomAccessIndicator",0),(0,a.A)(this,"elementaryStreamPriorityIndicator",0),(0,a.A)(this,"pcrFlag",0),(0,a.A)(this,"opcrFlag",0),(0,a.A)(this,"splicingPointFlag",0),(0,a.A)(this,"transportPrivateDataFlag",0),(0,a.A)(this,"adaptationFieldExtensionFlag",0),(0,a.A)(this,"pcr",BigInt(0)),(0,a.A)(this,"opcr",BigInt(0)),(0,a.A)(this,"spliceCountDown",0),(0,a.A)(this,"transportPrivateData",null),(0,a.A)(this,"extension",null)})),u=(0,r.A)((function t(){(0,n.A)(this,t),(0,a.A)(this,"pos",c.Dh),(0,a.A)(this,"payloadUnitStartIndicator",0),(0,a.A)(this,"transportPriority",0),(0,a.A)(this,"pid",c.N_),(0,a.A)(this,"adaptationFieldControl",0),(0,a.A)(this,"continuityCounter",0),(0,a.A)(this,"transportScramblingControl",0),(0,a.A)(this,"adaptationFieldInfo",new h),(0,a.A)(this,"payload",null)})),d=(0,r.A)((function t(){(0,n.A)(this,t),(0,a.A)(this,"slices",[]),(0,a.A)(this,"totalLength",0),(0,a.A)(this,"expectedLength",c.N_),(0,a.A)(this,"randomAccessIndicator",0),(0,a.A)(this,"pid",c.N_),(0,a.A)(this,"streamType",0),(0,a.A)(this,"pos",c.Dh)})),A=(0,r.A)((function t(){(0,n.A)(this,t),(0,a.A)(this,"versionNumber",0),(0,a.A)(this,"networkPid",c.N_),(0,a.A)(this,"program2PmtPid",new(o()))})),p=(0,r.A)((function t(){(0,n.A)(this,t),(0,a.A)(this,"tag",void 0),(0,a.A)(this,"buffer",void 0)})),l=(0,r.A)((function t(){(0,n.A)(this,t),(0,a.A)(this,"versionNumber",0),(0,a.A)(this,"programNumber",0),(0,a.A)(this,"pcrPid",0),(0,a.A)(this,"pid2StreamType",new(o())),(0,a.A)(this,"pid2ESDescriptor",new(o()))})),f=(0,r.A)((function t(){(0,n.A)(this,t),(0,a.A)(this,"pid",c.N_),(0,a.A)(this,"streamType",0),(0,a.A)(this,"streamId",c.N_),(0,a.A)(this,"dts",c.Dh),(0,a.A)(this,"pts",c.Dh),(0,a.A)(this,"pos",c.Dh),(0,a.A)(this,"payload",null),(0,a.A)(this,"data",null),(0,a.A)(this,"randomAccessIndicator",0)}))},2187:(t,e,i)=>{i.d(e,{d:()=>s});var r=i(72739),n=i(44328),a=i(77231);function s(t,e,i){var s=BigInt(0);return r.__(t,(function(t){s+=t.codecpar.bitrate*(0,n.k)(e,i,a.i0)/BigInt(8e3)})),s}},52071:(t,e,i)=>{i.d(e,{A:()=>g});var r=i(25182),n=i(36443),a=i.n(n),s=i(63939),o=i(9599),c=i(29170),h=i(77231),u=i(44328),d=i(2187),A=i(71517),p=i(9705),l=i(4624),f="src/avformat/function/seekInBytes.ts";function g(t,e,i,r,n,a){return k.apply(this,arguments)}function k(){return(k=(0,r.A)(a().mark((function t(e,i,r,n,g,k){var m,b,y,I,v,x,B,P,w,D,_,S,R,C;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m=e.ioReader.getPos(),t.next=3,e.ioReader.fileSize();case 3:if(b=t.sent,y=h.Dh,I=r,i.startTime!==h.Dh?I-=i.startTime:I-=i.firstDTS,!((v=(0,u.k)(r,i.timeBase,h.i0))<BigInt(1e4))){t.next=13;break}return l.Yz("seek pts is earlier then 10s, seek to first packet pos(".concat(n,") directly"),f,63),t.next=12,e.ioReader.seek(n);case 12:return t.abrupt("return",m);case 13:if(x=(0,d.d)(e.streams,I,i.timeBase),B=b-(0,d.d)(e.streams,BigInt(1e4),h.i0),P=(0,d.d)(e.streams,BigInt(1e4),h.i0),x>B&&(x=B),!(x<n)){t.next=21;break}return t.next=20,e.ioReader.seek(n);case 20:return t.abrupt("return",m);case 21:w=(0,A._5)(),D=b,_=BigInt(0);case 24:if(!(D-_<P)){t.next=28;break}return y=_,t.abrupt("break",52);case 28:return t.next=30,e.ioReader.seek(x);case 30:return t.next=32,k(e);case 32:return S=e.ioReader.getPos(),t.next=35,g(e,w);case 35:if(!(t.sent>=0)){t.next=48;break}if(R=(0,u.k)(s.f[17](w+8),(0,c.A)(w+72,o.P),h.i0),C=R-v,l.Yz("try to seek to pos: ".concat(x,", got packet pts: ").concat(s.f[17](w+8),"(").concat(R,"ms), diff: ").concat(C,"ms"),f,98),!(C<=BigInt(0)&&-C<BigInt(1e4))){t.next=45;break}return y=S,t.abrupt("break",52);case 45:x=C>BigInt(0)?_+(D=x)>>BigInt(1):(_=x)+D>>BigInt(1);case 46:t.next=50;break;case 48:return y=h.Dh,t.abrupt("break",52);case 50:t.next=24;break;case 52:if((0,A.Qe)(w),y===h.Dh){t.next=62;break}return l.Yz("finally seek to pos ".concat(y),f,126),t.next=57,e.ioReader.seek(y);case 57:return t.next=59,k(e);case 59:return t.abrupt("return",m);case 62:return t.next=64,e.ioReader.seek(m);case 64:return t.abrupt("return",BigInt(p.E$));case 65:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}}]);