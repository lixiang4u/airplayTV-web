(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[94],{64436:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(78716),n=r(81570),i=r(134),s=r(63939),o=r(37837),u=r(71766),c=function(){function e(){(0,a.A)(this,e),(0,i.A)(this,"inCodecpar",void 0),(0,i.A)(this,"inTimeBase",void 0),(0,i.A)(this,"outCodecpar",void 0)}return(0,n.A)(e,[{key:"init",value:function(e,t){return this.inCodecpar=(0,o.Gy)(168),(0,u.Yi)(this.inCodecpar,e),this.inTimeBase={den:s.f[15](t+4),num:s.f[15](t)},0}},{key:"destroy",value:function(){this.inCodecpar&&((0,u.dn)(this.inCodecpar),this.inCodecpar=0)}}]),e}()},36488:(e,t,r)=>{"use strict";r.d(t,{A:()=>S});var a=r(88435),n=r.n(a),i=r(78716),s=r(81570),o=r(77193),u=r(43070),c=r(60394),h=r(25767),f=r(31060),d=r(134),l=r(63939),p=r(50932),b=r(77162),m=r(29170),k=r(64436),v=r(14686),g=r(4624),x=r(9705),y=r(77231),A=r(58469),R=r(44328),B=r(37837),P=r(71517),L=r(37246),I=r(67672);function M(e,t,r){return t=(0,h.A)(t),(0,o.A)(e,C()?n()(t,r||[],(0,h.A)(e).constructor):t.apply(e,r))}function C(){try{var e=!Boolean.prototype.valueOf.call(n()(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}var S=function(e){function t(){var e;(0,i.A)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return e=M(this,t,[].concat(a)),(0,d.A)((0,u.A)(e),"bitReader",void 0),(0,d.A)((0,u.A)(e),"streamMuxConfig",void 0),(0,d.A)((0,u.A)(e),"caches",void 0),(0,d.A)((0,u.A)(e),"refSampleDuration",void 0),e}return(0,f.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,c.A)((0,h.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],this.refSampleDuration=BigInt(0),this.bitReader=new L.A,this.streamMuxConfig={profile:y.N_,sampleRate:y.N_,channels:y.N_},0}},{key:"sendAVPacket",value:function(e){var t=(0,v.s3)(l.f[20](e+24),l.f[15](e+28));this.bitReader.appendBuffer(t);for(var r=l.f[17](e+16)||l.f[17](e+8);this.bitReader.remainingLength()>=20;){var a=this.bitReader.getPointer(),n=A.f7(null,this.bitReader);if(I.ai(n))return g.z3("AACLATMParser parse failed","src/avformat/bsf/aac/LATM2RawFilter.ts",94),this.bitReader.reset(),x.LR;if(n.framePayloadLength>=this.bitReader.remainingLength()){this.bitReader.skipPadding(),this.bitReader.setPointer(a);break}n.useSameStreamMux||(this.streamMuxConfig.profile=n.profile,this.streamMuxConfig.sampleRate=n.sampleRate,this.streamMuxConfig.channels=n.channels);for(var i=n.framePayloadLength,s=new Uint8Array(i),o=0;o<i;o++)s[o]=this.bitReader.readU(8);var u={dts:r,buffer:s,extradata:null};if(l.f[15](this.inCodecpar+48)!==this.streamMuxConfig.profile||l.f[15](this.inCodecpar+136)!==this.streamMuxConfig.sampleRate||l.f[15](this.inCodecpar+116)!==this.streamMuxConfig.channels){this.refSampleDuration=(0,R.k)(BigInt(Math.floor(1024/this.streamMuxConfig.sampleRate*y.SF)),y.KR,this.inTimeBase),p.M[15](this.inCodecpar+48,this.streamMuxConfig.profile),p.M[15](this.inCodecpar+136,this.streamMuxConfig.sampleRate),p.M[15](this.inCodecpar+116,this.streamMuxConfig.channels);var c=(0,A.Ij)((0,m.A)(this.inCodecpar,b.A));l.f[20](this.inCodecpar+12)&&(0,B.Eb)(l.f[20](this.inCodecpar+12)),p.M[20](this.inCodecpar+12,(0,B.sY)(c.length)),(0,v.lW)(l.f[20](this.inCodecpar+12),c.length,c),p.M[15](this.inCodecpar+16,c.length),u.extradata=c}this.caches.push(u),r+=this.refSampleDuration,this.bitReader.skipPadding()}return 0}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,P.Up)(e);var t=this.caches.shift(),r=(0,B.sY)(t.buffer.length);if((0,v.lW)(r,t.buffer.length,t.buffer),(0,P.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[15](e+36,1|l.f[15](e+36)),p.M[17](e+48,this.refSampleDuration),t.extradata){var a=(0,B.sY)(t.extradata.length);(0,v.lW)(a,t.extradata.length,t.extradata),(0,P.Ow)(e,1,a,t.extradata.length)}return 0}return x.LT}},{key:"reset",value:function(){return this.bitReader.reset(),0}}]),t}(k.A)},58469:(e,t,r)=>{"use strict";r.d(t,{Bq:()=>d,Ij:()=>f,XC:()=>h,f7:()=>l,uF:()=>s});var a=r(134),n=r(77231),i=r(37246),s=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},1,"Main"),2,"LC"),3,"LC"),4,"LC"),5,"HE"),6,"HE"),o={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,n.N_,n.N_,n.N_],c=[n.N_,1,2,3,4,5,6,7];function h(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t){var r=function(e){var t,r,a=n.N_,i=n.N_,s=n.N_;return e.length>=2&&(a=e[0]>>3&31,i=null!==(t=u[(7&e[0])<<1|e[1]>>7])&&void 0!==t?t:48e3,s=null!==(r=c[e[1]>>3&15])&&void 0!==r?r:2),{profile:a,sampleRate:i,channels:s}}(t),a=r.profile,i=r.sampleRate,s=r.channels;e.codecpar.profile=a,e.codecpar.sampleRate=i,e.codecpar.chLayout.nbChannels=s}}function f(e){var t=o[e.sampleRate],r=e.chLayout.nbChannels,a=new Uint8Array(2);return a[0]=(31&e.profile)<<3|(14&t)>>1,a[1]=(1&t)<<7|(15&r)<<3,a}function d(e){if(e.length<7)return-1;var t=e[0]<<4|e[1]>>4;if(4095!==t)return-1;var r=1&e[1],a=(192&e[2])>>>6,n=(60&e[2])>>>2,i=(1&e[2])<<2|(192&e[3])>>>6,s=(3&e[3])<<11|e[4]<<3|(224&e[5])>>>5,o=3&e[6],h=1===r?7:9,f=s-h;return{syncWord:t,profile:a+1,sampleRate:u[n],channels:c[i],aacFrameLength:s,numberOfRawDataBlocksInFrame:o,headerLength:h,framePayloadLength:f}}function l(e,t){function r(){for(var e=t.readU(2),r=0,a=0;a<=e;a++)r<<=8,r|=t.readU(8);return r}t||(t=new i.A).appendBuffer(e);var a=t.getPointer(),n={syncWord:0,profile:0,sampleRate:0,channels:0,useSameStreamMux:!1,headerLength:0,framePayloadLength:0,muxLengthBytes:0},s=t.readU(11);if(695!==s)return-1;n.syncWord=s,n.muxLengthBytes=t.readU(13);var o=1===t.readU1();if(n.useSameStreamMux=o,!o){var h=1===t.readU1();if(h&&1===t.readU1())return-1;if(h&&r(),1!==t.readU1())return-1;if(0!==t.readU(6))return-1;if(0!==t.readU(4))return-1;if(0!==t.readU(3))return-1;var f=h?r():0,d=t.readU(5);f-=5;var l=t.readU(4);f-=4;var p=t.readU(4);if(f-=4,t.readU(3),(f-=3)>0&&t.readU(f),0!==t.readU(3))return-1;if(t.readU(8),1===t.readU1())if(h)r();else for(;;){var b=1===t.readU1();if(t.readU(8),!b)break}1===t.readU1()&&t.readU(8),n.profile=d+1,n.sampleRate=u[l],n.channels=c[p]}for(var m=0;;){var k=t.readU(8);if(m+=k,255!==k)break}return n.framePayloadLength=m,n.headerLength=t.getPointer()-a+(8===t.getBitLeft()?0:1),n}},47094:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var a=r(88435),n=r.n(a),i=r(25182),s=r(78716),o=r(81570),u=r(77193),c=r(25767),h=r(43070),f=r(31060),d=r(134),l=r(36443),p=r.n(l),b=r(61499),m=r(63939),k=r(50932),v=r(4624),g=r(9705),x=r(85947),y=r(14686),A=r(37837),R=r(71517),B=r(44328),P=r(77231),L=r(72739),I=r(58469),M=r(67672),C=r(36488);function S(e,t,r){return t=(0,c.A)(t),(0,u.A)(e,U()?n()(t,r||[],(0,c.A)(e).constructor):t.apply(e,r))}function U(){try{var e=!Boolean.prototype.valueOf.call(n()(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}var z="src/avformat/formats/IAacFormat.ts",T=1024,w=function(e){function t(){var e;return(0,s.A)(this,t),e=S(this,t),(0,d.A)((0,h.A)(e),"type",13),(0,d.A)((0,h.A)(e),"frameType",void 0),(0,d.A)((0,h.A)(e),"fileSize",void 0),(0,d.A)((0,h.A)(e),"currentPts",void 0),(0,d.A)((0,h.A)(e),"latmFilter",void 0),e}var r,a,n,u,c;return(0,f.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e){this.currentPts=BigInt(0)}},{key:"destroy",value:function(e){this.latmFilter&&(this.latmFilter.destroy(),this.latmFilter=null)}},{key:"estimateTotalBlock",value:(c=(0,i.A)(p().mark((function e(t){var r,a,n,i,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,a=t.ioReader.getPos();case 2:return e.prev=3,e.next=6,t.ioReader.peekBuffer(7);case 6:return n=e.sent,i=(3&n[3])<<11|n[4]<<3|(224&n[5])>>>5,s=3&n[6],r+=s+1,e.next=12,t.ioReader.skip(i);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("break",19);case 17:e.next=2;break;case 19:return e.next=21,t.ioReader.seek(a);case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,null,[[3,14]])}))),function(e){return c.apply(this,arguments)})},{key:"readHeader",value:(u=(0,i.A)(p().mark((function e(t){var r,a,n,i,s,o,u,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ioReader.peekBuffer(4);case 2:return r=e.sent,e.next=5,t.ioReader.fileSize();case 5:if(this.fileSize=e.sent,65!==r[0]||68!==r[1]||73!==r[2]||70!==r[3]){e.next=16;break}(a=t.createStream()).codecpar.codecId=86018,a.codecpar.codecType=1,this.frameType=0,a.duration=this.fileSize,a.timeBase.den=16384,a.timeBase.num=1,e.next=82;break;case 16:if(255!==r[0]||240&~r[1]){e.next=55;break}return this.frameType=1,(n=t.createStream()).codecpar.codecId=86018,n.codecpar.codecType=1,e.t0=I.Bq,e.next=24,t.ioReader.peekBuffer(20);case 24:if(e.t1=e.sent,i=(0,e.t0)(e.t1),!M.ai(i)){e.next=28;break}return e.abrupt("return",g.LR);case 28:return n.codecpar.profile=i.profile,n.codecpar.sampleRate=i.sampleRate,n.codecpar.chLayout.nbChannels=i.channels,s=(0,I.Ij)(n.codecpar),n.codecpar.extradata=(0,A.sY)(s.length),(0,y.lW)(n.codecpar.extradata,s.length,s),n.codecpar.extradataSize=s.length,n.timeBase.den=n.codecpar.sampleRate,n.timeBase.num=1,e.t2=B.k,e.t3=BigInt,e.t4=Math,e.next=42,this.estimateTotalBlock(t);case 42:e.t5=e.sent,e.t6=1024*e.t5,e.t7=n.codecpar.sampleRate,e.t8=e.t6/e.t7,e.t9=P.SF,e.t10=e.t8*e.t9,e.t11=e.t4.floor.call(e.t4,e.t10),e.t12=(0,e.t3)(e.t11),e.t13=P.KR,e.t14=n.timeBase,n.duration=(0,e.t2)(e.t12,e.t13,e.t14),e.next=82;break;case 55:if(86!==r[0]||224&~r[1]){e.next=81;break}return this.frameType=2,(o=t.createStream()).codecpar.codecId=86018,o.codecpar.codecType=1,e.t15=I.f7,e.next=63,t.ioReader.peekBuffer(20);case 63:if(e.t16=e.sent,u=(0,e.t15)(e.t16),!M.ai(u)){e.next=67;break}return e.abrupt("return",g.LR);case 67:o.codecpar.profile=u.profile,o.codecpar.sampleRate=u.sampleRate,o.codecpar.chLayout.nbChannels=u.channels,c=(0,I.Ij)(o.codecpar),o.codecpar.extradata=(0,A.sY)(c.length),(0,y.lW)(o.codecpar.extradata,c.length,c),o.codecpar.extradataSize=c.length,o.duration=this.fileSize,o.timeBase.den=16384,o.timeBase.num=1,this.latmFilter=new C.A,this.latmFilter.init(o.codecpar[b.o9],o.timeBase[b.o9]),e.next=82;break;case 81:return e.abrupt("return",g.LR);case 82:return e.abrupt("return",0);case 83:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"readAVPacket",value:(n=(0,i.A)(p().mark((function e(t,r){var a,n,i,s,o,u,c,h,f,d,l,b,x,L;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.streams.find((function(e){return e.codecpar.codecType=1})),e.prev=1,n=t.ioReader.getPos(),0!==this.frameType){e.next=14;break}return e.next=6,t.ioReader.readBuffer(Math.min(T,Number(BigInt.asIntN(32,this.fileSize-n))));case 6:i=e.sent,s=(0,A.sY)(i.length),(0,y.lW)(s,i.length,i),(0,R.NX)(r,s,i.length),k.M[17](r+48,BigInt(T)),k.M[17](r+56,n),e.next=64;break;case 14:if(1!==this.frameType){e.next=37;break}return e.next=17,t.ioReader.readBuffer(7);case 17:if(o=e.sent,u=1&o[1],c=(3&o[3])<<11|o[4]<<3|(224&o[5])>>>5,h=3&o[6],d=c-(f=1===u?7:9),9!==f){e.next=26;break}return e.next=26,t.ioReader.skip(2);case 26:return l=(0,B.k)(BigInt(Math.floor(1024*(h+1)/a.codecpar.sampleRate*P.SF)),P.KR,a.timeBase),k.M[17](r+48,l),e.next=30,t.ioReader.readBuffer(d);case 30:i=e.sent,b=(0,A.sY)(i.length),(0,y.lW)(b,i.length,i),(0,R.NX)(r,b,i.length),k.M[17](r+56,n),e.next=64;break;case 37:if(2!==this.frameType){e.next=64;break}if(n!==this.fileSize){e.next=40;break}return e.abrupt("return",-1048576);case 40:if((x=this.latmFilter.receiveAVPacket(r))!==g.LT){e.next=55;break}if(t.ioReader.getPos()!==this.fileSize){e.next=45;break}return e.abrupt("return",-1048576);case 45:return e.next=47,t.ioReader.readBuffer(Math.min(T,Number(BigInt.asIntN(32,this.fileSize-n))));case 47:return i=e.sent,L=(0,A.sY)(i.length),(0,y.lW)(L,i.length,i),(0,R.NX)(r,L,i.length),this.latmFilter.sendAVPacket(r),e.abrupt("continue",40);case 55:if(!(x<0)){e.next=59;break}return e.abrupt("return",x);case 59:return k.M[17](r+48,BigInt(0|m.f[15](r+28))),k.M[17](r+56,this.currentPts),e.abrupt("break",64);case 62:e.next=40;break;case 64:return k.M[15](r+32,a.index),k.M[15](r+76,a.timeBase.den),k.M[15](r+72,a.timeBase.num),k.M[17](r+16,this.currentPts),k.M[17](r+8,this.currentPts),this.currentPts+=m.f[17](r+48),e.abrupt("return",0);case 72:if(e.prev=72,e.t0=e.catch(1),-1048576===t.ioReader.error){e.next=77;break}return v.z3("read packet error, ".concat(e.t0),z,270),e.abrupt("return",g.LR);case 77:return e.abrupt("return",t.ioReader.error);case 78:case"end":return e.stop()}}),e,this,[[1,72]])}))),function(e,t){return n.apply(this,arguments)})},{key:"syncFrame",value:(a=(0,i.A)(p().mark((function e(t){var r,a,n,i,s,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.frameType){e.next=2;break}return e.abrupt("return");case 2:r=P.Dh,a=3,n=1===this.frameType?4095:695,i=1===this.frameType?4:5;case 6:e.prev=7,s=0,r=t.ioReader.getPos();case 10:if(s!==a){e.next=13;break}return e.abrupt("break",46);case 13:return e.next=15,t.ioReader.peekUint16();case 15:if(e.t0=e.sent,e.t1=i,e.t0>>>e.t1!==n){e.next=43;break}if(1!==this.frameType){e.next=27;break}return e.t3=I.Bq,e.next=23,t.ioReader.peekBuffer(9);case 23:e.t4=e.sent,e.t2=(0,e.t3)(e.t4),e.next=32;break;case 27:return e.t5=I.f7,e.next=30,t.ioReader.peekBuffer(20);case 30:e.t6=e.sent,e.t2=(0,e.t5)(e.t6);case 32:if(o=e.t2,M.ai(o)){e.next=40;break}return s++,e.next=37,t.ioReader.skip(o.headerLength+o.framePayloadLength);case 37:return e.abrupt("continue",10);case 40:return e.abrupt("break",46);case 41:e.next=44;break;case 43:return e.abrupt("break",46);case 44:e.next=10;break;case 46:if(s!==a){e.next=48;break}return e.abrupt("break",57);case 48:return e.next=50,t.ioReader.skip(1);case 50:e.next=55;break;case 52:return e.prev=52,e.t7=e.catch(7),e.abrupt("break",57);case 55:e.next=6;break;case 57:if(r===P.Dh){e.next=60;break}return e.next=60,t.ioReader.seek(r);case 60:case"end":return e.stop()}}),e,this,[[7,52]])}))),function(e){return a.apply(this,arguments)})},{key:"seek",value:(r=(0,i.A)(p().mark((function e(t,r,a,n){var i,s,o,u,c,h,f,d,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==this.frameType){e.next=57;break}if(i=t.ioReader.getPos(),!(2&n)){e.next=18;break}return e.next=5,t.ioReader.fileSize();case 5:if(!((s=e.sent)<=BigInt(0))){e.next=8;break}return e.abrupt("return",BigInt(g.E$));case 8:return a<BigInt(0)?a=BigInt(0):a>s&&(a=s),e.next=11,t.ioReader.seek(a);case 11:if(4&n){e.next=15;break}return e.next=14,this.syncFrame(t);case 14:r.duration&&this.fileSize&&(this.currentPts=a/this.fileSize*r.duration);case 15:return e.abrupt("return",i);case 18:if(!r||!r.sampleIndexes.length){e.next=26;break}if(!((o=L.El(r.sampleIndexes,(function(e){return e.pts>a?-1:1})))>0&&(0,B.k)(a-r.sampleIndexes[o-1].pts,r.timeBase,P.i0)<BigInt(5e3))){e.next=26;break}return v.Yz("seek in sampleIndexes, found index: ".concat(o,", pts: ").concat(r.sampleIndexes[o-1].pts,", pos: ").concat(r.sampleIndexes[o-1].pos),z,369),e.next=24,t.ioReader.seek(r.sampleIndexes[o-1].pos);case 24:return this.currentPts=a,e.abrupt("return",i);case 26:if(v.Yz("not found any keyframe index, try to seek in bytes",z,376),!r.duration){e.next=54;break}return e.next=30,t.ioReader.seek(BigInt(0));case 30:u=BigInt(0);case 31:if(e.prev=32,!(u>=a)){e.next=36;break}return this.currentPts=u,e.abrupt("return",i);case 36:return e.next=38,t.ioReader.peekBuffer(7);case 38:return c=e.sent,h=(3&c[3])<<11|c[4]<<3|(224&c[5])>>>5,f=3&c[6],d=(0,B.k)(BigInt(Math.floor(1024*(f+1)/r.codecpar.sampleRate*P.SF)),P.KR,r.timeBase),u+=d,e.next=45,t.ioReader.skip(h);case 45:e.next=50;break;case 47:return e.prev=47,e.t0=e.catch(32),e.abrupt("return",BigInt(g.E$));case 50:e.next=31;break;case 52:e.next=55;break;case 54:return e.abrupt("return",BigInt(g.E$));case 55:e.next=68;break;case 57:if(0!==this.frameType&&2!==this.frameType){e.next=68;break}return this.latmFilter&&this.latmFilter.reset(),l=t.ioReader.getPos(),a<BigInt(0)?a=BigInt(0):a>this.fileSize&&(a=this.fileSize),e.next=63,t.ioReader.seek(a);case 63:if(this.currentPts=a,2!==this.frameType||4&n){e.next=67;break}return e.next=67,this.syncFrame(t);case 67:return e.abrupt("return",l);case 68:return e.abrupt("return",BigInt(g.E$));case 69:case"end":return e.stop()}}),e,this,[[32,47]])}))),function(e,t,a,n){return r.apply(this,arguments)})},{key:"getAnalyzeStreamsCount",value:function(){return 1}}]),t}(x.A)},85947:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(78716),n=r(81570),i=r(134),s=function(){function e(){(0,a.A)(this,e),(0,i.A)(this,"type",-1),(0,i.A)(this,"onStreamAdd",void 0)}return(0,n.A)(e,[{key:"destroy",value:function(e){}}]),e}()},37246:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(78716),n=r(81570),i=r(134),s=r(4624),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,a.A)(this,e),(0,i.A)(this,"buffer",void 0),(0,i.A)(this,"pointer",void 0),(0,i.A)(this,"bitsLeft",void 0),(0,i.A)(this,"size",void 0),(0,i.A)(this,"endPointer",void 0),(0,i.A)(this,"pos",void 0),(0,i.A)(this,"error",void 0),(0,i.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.pos=BigInt(0),this.size=t,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}return(0,n.A)(e,[{key:"peekU1",value:function(){(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush();var e=this.pointer,t=this.bitsLeft;return 0===t&&(e++,t=8),this.buffer[e]>>t-1&1}},{key:"readU1",value:function(){var e;return(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush(),this.bitsLeft--,e=this.buffer[this.pointer]>>this.bitsLeft&1,0===this.bitsLeft&&(this.pointer++,this.bitsLeft=8,this.pos++),e}},{key:"readU",value:function(e){for(var t=0,r=0;r<e;r++)t|=this.readU1()<<e-r-1;return t}},{key:"remainingLength",value:function(){return this.endPointer-this.pointer}},{key:"getBitLeft",value:function(){return this.bitsLeft}},{key:"getPointer",value:function(){return this.pointer}},{key:"setPointer",value:function(e){this.pointer=e}},{key:"getPos",value:function(){return this.pos}},{key:"skip",value:function(e){var t=(e-e%8)/8;this.pointer+=t,this.pos+=BigInt(t);var r=e%8;this.bitsLeft<=r?(this.pointer++,this.pos++,this.bitsLeft=8-(r-this.bitsLeft)):this.bitsLeft-=r}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(0===this.bitsLeft&&(this.pointer++,this.pos++),!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);var e=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(e<0)throw this.error=e,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+e,this.pointer=0}else{var t=this.onFlush(this.buffer);if(this.endPointer=t,this.pointer=0,this.bitsLeft=8,t<0)throw this.error=t,Error("IOReader error, flush failed")}}},{key:"getBuffer",value:function(){return this.buffer}},{key:"appendBuffer",value:function(e){if(this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else{var t=Math.min(this.size-this.endPointer,e.length);this.buffer.set(e.subarray(0,t),this.endPointer),this.endPointer+=t,s.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src/common/io/BitReader.ts",241)}}},{key:"reset",value:function(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0,this.pos=BigInt(0)}},{key:"skipPadding",value:function(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++,this.pos++)}}]),e}()},80345:(e,t,r)=>{r(28351),e.exports=r(46438).Reflect.get},28351:(e,t,r)=>{var a=r(81033),n=r(66123),i=r(75509),s=r(88535),o=r(24401),u=r(80812);s(s.S,"Reflect",{get:function e(t,r){var s,c,h=arguments.length<3?t:arguments[2];return u(t)===h?t[r]:(s=a.f(t,r))?i(s,"value")?s.value:void 0!==s.get?s.get.call(h):void 0:o(c=n(t))?e(c,r,h):void 0}})},60394:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(80345),n=r(3706),i=r(41473);function s(){return s="undefined"!=typeof Reflect&&a?a.bind():function(e,t,r){var a=(0,i.A)(e,t);if(a){var s=n(a,t);return s.get?s.get.call(arguments.length<3?e:r):s.value}},s.apply(this,arguments)}},41473:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(25767);function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,a.A)(e)););return e}}}]);