(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[855],{64436:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var a=r(78716),i=r(81570),n=r(134),s=r(63939),o=r(37837),c=r(71766),h=function(){function e(){(0,a.A)(this,e),(0,n.A)(this,"inCodecpar",void 0),(0,n.A)(this,"inTimeBase",void 0),(0,n.A)(this,"outCodecpar",void 0)}return(0,i.A)(e,[{key:"init",value:function(e,t){return this.inCodecpar=(0,o.Gy)(168),(0,c.Yi)(this.inCodecpar,e),this.inTimeBase={den:s.f[15](t+4),num:s.f[15](t)},0}},{key:"destroy",value:function(){this.inCodecpar&&((0,c.dn)(this.inCodecpar),this.inCodecpar=0)}}]),e}()},51113:(e,t,r)=>{"use strict";r.d(t,{A:()=>P});var a=r(88435),i=r.n(a),n=r(78716),s=r(81570),o=r(77193),c=r(43070),h=r(60394),u=r(25767),f=r(31060),d=r(134),l=r(63939),p=r(50932),v=r(64436),g=r(14686),b=r(4624),y=r(9705),U=r(77231),x=r(44328),m=r(37837),k=r(71517),A=r(87771),w=r(92647),I=r(67672);function _(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,B()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function B(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(B=function(){return!!e})()}var P=function(e){function t(){var e;(0,n.A)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=_(this,t,[].concat(a)),(0,d.A)((0,c.A)(e),"caches",void 0),(0,d.A)((0,c.A)(e),"cache",void 0),(0,d.A)((0,c.A)(e),"lastDts",void 0),e}return(0,f.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,h.A)((0,u.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],0}},{key:"sendAVPacket",value:function(e){var t=0,r=this.lastDts||l.f[17](e+16)||l.f[17](e+8),a=(0,g.s3)(l.f[20](e+24),l.f[15](e+28)).slice(),i=!1,n=!!this.cache;for(n&&(a=(0,w.A)(Uint8Array,[this.cache,a]),this.cache=null);t<a.length;){var s=A.R(a.subarray(t));if(I.ai(s))return b.z3("parse ac3 header failed","src/avformat/bsf/ac3/Ac32RawFilter.ts",78),y.LR;var o={dts:r,buffer:null,duration:U.N_},c=s.frameSize;if(o.buffer=a.subarray(t,t+c),t+c>a.length){this.cache=a.subarray(t),this.lastDts=r;break}var h=(0,x.k)(BigInt(1536/s.sampleRate*U.SF),U.KR,this.inTimeBase);o.duration=Number(h),this.caches.push(o),t+=c,r+=h,!i&&n&&(i=!0,r=l.f[17](e+16)||l.f[17](e+8))}return this.lastDts=BigInt(0),0}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,k.Up)(e);var t=this.caches.shift(),r=(0,m.sY)(t.buffer.length);return(0,g.lW)(r,t.buffer.length,t.buffer),(0,k.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[17](e+48,BigInt(Math.floor(t.duration))),p.M[15](e+36,1|l.f[15](e+36)),0}return y.LT}},{key:"reset",value:function(){return this.cache=null,this.lastDts=BigInt(0),0}}]),t}(v.A)},7309:(e,t,r)=>{"use strict";r.d(t,{A:()=>P});var a=r(88435),i=r.n(a),n=r(78716),s=r(81570),o=r(77193),c=r(43070),h=r(60394),u=r(25767),f=r(31060),d=r(134),l=r(63939),p=r(50932),v=r(64436),g=r(14686),b=r(4624),y=r(9705),U=r(77231),x=r(44328),m=r(37837),k=r(71517),A=r(29347),w=r(92647),I=r(67672);function _(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,B()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function B(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(B=function(){return!!e})()}var P=function(e){function t(){var e;(0,n.A)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=_(this,t,[].concat(a)),(0,d.A)((0,c.A)(e),"caches",void 0),(0,d.A)((0,c.A)(e),"cache",void 0),(0,d.A)((0,c.A)(e),"lastDts",void 0),e}return(0,f.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,h.A)((0,u.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],0}},{key:"sendAVPacket",value:function(e){var t=0,r=this.lastDts||l.f[17](e+16)||l.f[17](e+8),a=(0,g.s3)(l.f[20](e+24),l.f[15](e+28)).slice(),i=!1,n=!!this.cache;for(n&&(a=(0,w.A)(Uint8Array,[this.cache,a]),this.cache=null);t<a.length;){var s=A.R(a.subarray(t));if(I.ai(s))return b.z3("parse dts header failed","src/avformat/bsf/dts/Dts2RawFilter.ts",78),y.LR;var o={dts:r,buffer:null,duration:U.N_},c=s.frameSize;if(o.buffer=a.subarray(t,t+c),t+c>a.length){this.cache=a.subarray(t),this.lastDts=r;break}var h=(0,x.k)(BigInt(1536/s.sampleRate*U.SF),U.KR,this.inTimeBase);o.duration=Number(h),this.caches.push(o),t+=c,r+=h,!i&&n&&(i=!0,r=l.f[17](e+16)||l.f[17](e+8))}return this.lastDts=BigInt(0),0}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,k.Up)(e);var t=this.caches.shift(),r=(0,m.sY)(t.buffer.length);return(0,g.lW)(r,t.buffer.length,t.buffer),(0,k.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[17](e+48,BigInt(Math.floor(t.duration))),p.M[15](e+36,1|l.f[15](e+36)),0}return y.LT}},{key:"reset",value:function(){return this.cache=null,this.lastDts=BigInt(0),0}}]),t}(v.A)},56397:(e,t,r)=>{"use strict";r.d(t,{A:()=>P});var a=r(88435),i=r.n(a),n=r(78716),s=r(81570),o=r(77193),c=r(43070),h=r(60394),u=r(25767),f=r(31060),d=r(134),l=r(63939),p=r(50932),v=r(64436),g=r(14686),b=r(4624),y=r(9705),U=r(77231),x=r(44328),m=r(37837),k=r(71517),A=r(75294),w=r(89088),I=r(92647);function _(e,t,r){return t=(0,u.A)(t),(0,o.A)(e,B()?i()(t,r||[],(0,u.A)(e).constructor):t.apply(e,r))}function B(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(B=function(){return!!e})()}var P=function(e){function t(){var e;(0,n.A)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=_(this,t,[].concat(a)),(0,d.A)((0,c.A)(e),"frameHeader",void 0),(0,d.A)((0,c.A)(e),"caches",void 0),(0,d.A)((0,c.A)(e),"cache",void 0),(0,d.A)((0,c.A)(e),"lastDts",void 0),e}return(0,f.A)(t,e),(0,s.A)(t,[{key:"init",value:function(e,r){return(0,h.A)((0,u.A)(t.prototype),"init",this).call(this,e,r),this.caches=[],this.frameHeader=new A.FrameHeader,0}},{key:"sendAVPacket",value:function(e){var t=0,r=this.lastDts||l.f[17](e+16)||l.f[17](e+8),a=(0,g.s3)(l.f[20](e+24),l.f[15](e+28)).slice(),i=!1,n=!!this.cache;for(n&&(a=(0,I.A)(Uint8Array,[this.cache,a]),this.cache=null);t<a.length;){var s=a[t]<<4|a[t+1]>>4&14;if(4094!==s)return b.z3("found syncWord not 0xFFE, got: 0x".concat(s.toString(16)),"src/avformat/bsf/mp3/Mp32RawFilter.ts",83),y.LR;var o=a[1]>>>3&3,c=(12&a[2])>>>2,h={dts:r,buffer:null,extradata:null,duration:U.N_},u=w.Y2(o,c);A.parse(this.frameHeader,a[t]<<24|a[t+1]<<16|a[t+2]<<8|a[t+3]);var f=A.getFrameLength(this.frameHeader,u);if(h.buffer=a.subarray(t,t+f),t+f>a.length){this.cache=a.subarray(t),this.lastDts=r;break}var d=(0,x.k)(BigInt(Math.floor(f/u*U.SF)),U.KR,this.inTimeBase);h.duration=Number(d),this.caches.push(h),t+=f,r+=d,!i&&n&&(i=!0,r=l.f[17](e+16)||l.f[17](e+8))}return this.lastDts=BigInt(0),0}},{key:"receiveAVPacket",value:function(e){if(this.caches.length){(0,k.Up)(e);var t=this.caches.shift(),r=(0,m.sY)(t.buffer.length);return(0,g.lW)(r,t.buffer.length,t.buffer),(0,k.NX)(e,r,t.buffer.length),p.M[17](e+16,t.dts),p.M[17](e+8,t.dts),p.M[17](e+48,BigInt(Math.floor(t.duration))),p.M[15](e+36,1|l.f[15](e+36)),0}return y.LT}},{key:"reset",value:function(){return this.cache=null,this.lastDts=BigInt(0),0}}]),t}(v.A)},58469:(e,t,r)=>{"use strict";r.d(t,{Bq:()=>d,Ij:()=>f,XC:()=>u,f7:()=>l,uF:()=>s});var a=r(134),i=r(77231),n=r(37246),s=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},1,"Main"),2,"LC"),3,"LC"),4,"LC"),5,"HE"),6,"HE"),o={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,i.N_,i.N_,i.N_],h=[i.N_,1,2,3,4,5,6,7];function u(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t){var r=function(e){var t,r,a=i.N_,n=i.N_,s=i.N_;return e.length>=2&&(a=e[0]>>3&31,n=null!==(t=c[(7&e[0])<<1|e[1]>>7])&&void 0!==t?t:48e3,s=null!==(r=h[e[1]>>3&15])&&void 0!==r?r:2),{profile:a,sampleRate:n,channels:s}}(t),a=r.profile,n=r.sampleRate,s=r.channels;e.codecpar.profile=a,e.codecpar.sampleRate=n,e.codecpar.chLayout.nbChannels=s}}function f(e){var t=o[e.sampleRate],r=e.chLayout.nbChannels,a=new Uint8Array(2);return a[0]=(31&e.profile)<<3|(14&t)>>1,a[1]=(1&t)<<7|(15&r)<<3,a}function d(e){if(e.length<7)return-1;var t=e[0]<<4|e[1]>>4;if(4095!==t)return-1;var r=1&e[1],a=(192&e[2])>>>6,i=(60&e[2])>>>2,n=(1&e[2])<<2|(192&e[3])>>>6,s=(3&e[3])<<11|e[4]<<3|(224&e[5])>>>5,o=3&e[6],u=1===r?7:9,f=s-u;return{syncWord:t,profile:a+1,sampleRate:c[i],channels:h[n],aacFrameLength:s,numberOfRawDataBlocksInFrame:o,headerLength:u,framePayloadLength:f}}function l(e,t){function r(){for(var e=t.readU(2),r=0,a=0;a<=e;a++)r<<=8,r|=t.readU(8);return r}t||(t=new n.A).appendBuffer(e);var a=t.getPointer(),i={syncWord:0,profile:0,sampleRate:0,channels:0,useSameStreamMux:!1,headerLength:0,framePayloadLength:0,muxLengthBytes:0},s=t.readU(11);if(695!==s)return-1;i.syncWord=s,i.muxLengthBytes=t.readU(13);var o=1===t.readU1();if(i.useSameStreamMux=o,!o){var u=1===t.readU1();if(u&&1===t.readU1())return-1;if(u&&r(),1!==t.readU1())return-1;if(0!==t.readU(6))return-1;if(0!==t.readU(4))return-1;if(0!==t.readU(3))return-1;var f=u?r():0,d=t.readU(5);f-=5;var l=t.readU(4);f-=4;var p=t.readU(4);if(f-=4,t.readU(3),(f-=3)>0&&t.readU(f),0!==t.readU(3))return-1;if(t.readU(8),1===t.readU1())if(u)r();else for(;;){var v=1===t.readU1();if(t.readU(8),!v)break}1===t.readU1()&&t.readU(8),i.profile=d+1,i.sampleRate=c[l],i.channels=h[p]}for(var g=0;;){var b=t.readU(8);if(g+=b,255!==b)break}return i.framePayloadLength=g,i.headerLength=t.getPointer()-a+(8===t.getBitLeft()?0:1),i}},87771:(e,t,r)=>{"use strict";r.d(t,{R:()=>l,j:()=>i});var a=r(37246),i=[3,4,3,7,259,263,1539,1543],n=[[64,69,96],[64,70,96],[80,87,120],[80,88,120],[96,104,144],[96,105,144],[112,121,168],[112,122,168],[128,139,192],[128,140,192],[160,174,240],[160,175,240],[192,208,288],[192,209,288],[224,243,336],[224,244,336],[256,278,384],[256,279,384],[320,348,480],[320,349,480],[384,417,576],[384,418,576],[448,487,672],[448,488,672],[512,557,768],[512,558,768],[640,696,960],[640,697,960],[768,835,1152],[768,836,1152],[896,975,1344],[896,976,1344],[1024,1114,1536],[1024,1115,1536],[1152,1253,1728],[1152,1254,1728],[1280,1393,1920],[1280,1394,1920]],s=[4,5,6,5],o=[4,6,7,6],c=[48e3,44100,32e3,0],h=[32,40,48,56,64,80,96,112,128,160,192,224,256,320,384,448,512,576,640],u=[2,1,2,3,3,4,4,5],f=[1,2,3,6],d=7;function l(e){var t=new a.A(size);t.appendBuffer(e);var r={syncWord:0,crc1:0,srCode:0,bitstreamId:0,bitstreamMode:0,channelMode:0,lfeOn:0,frameType:0,substreamId:0,centerMixLevel:0,surroundMixLevel:0,channelMap:0,numBlocks:0,dolbySurroundMode:0,srShift:0,sampleRate:0,bitrate:0,channels:0,frameSize:0,channelLayout:BigInt(0),ac3BitrateCode:0};if(r.syncWord=t.readU(16),2935!==r.syncWord)return-1;if(r.bitstreamId=31&t.readU(29),r.bitstreamId>16)return-2;if(r.numBlocks=6,r.ac3BitrateCode=-1,r.centerMixLevel=5,r.surroundMixLevel=6,r.dolbySurroundMode=0,r.bitstreamId<=10){if(r.crc1=t.readU(16),r.srCode=t.readU(2),3===r.srCode)return-3;var l=t.readU(6);if(l>37)return-4;r.ac3BitrateCode=l>>1,t.readU(5),r.bitstreamMode=t.readU(3),r.channelMode=t.readU(3),2==r.channelMode?r.dolbySurroundMode=t.readU(2):(1&r.channelMode&&1!=r.channelMode&&(r.centerMixLevel=s[t.readU(2)]),4&r.channelMode&&(r.surroundMixLevel=o[t.readU(2)])),r.lfeOn=t.readU(1),r.srShift=Math.max(r.bitstreamId,8)-8,r.sampleRate=c[r.srCode]>>r.srShift,r.bitrate=1e3*h[r.ac3BitrateCode]>>r.srShift,r.channels=u[r.channelMode]+r.lfeOn,r.frameSize=2*n[l][r.srCode],r.frameType=2,r.substreamId=0}else{if(r.crc1=0,r.frameType=t.readU(2),3==r.frameType)return-5;if(r.substreamId=t.readU(3),r.frameSize=t.readU(11)+1<<1,r.frameSize<d)return-6;if(r.srCode=t.readU(2),3==r.srCode){var p=t.readU(2);if(3==p)return-7;r.sampleRate=c[p]/2,r.srShift=1}else r.numBlocks=f[t.readU(2)],r.sampleRate=c[r.srCode],r.srShift=0;r.channelMode=t.readU(3),r.lfeOn=t.readU(1),r.bitrate=8*r.frameSize*r.sampleRate/(256*r.numBlocks),r.channels=u[r.channelMode]+r.lfeOn}return r.channelLayout=BigInt.asUintN(64,i[r.channelMode]),r.lfeOn&&(r.channelLayout|=BigInt(8)),r}},29347:(e,t,r)=>{"use strict";r.d(t,{R:()=>o});var a=r(37246),i=[1,2,2,2,2,3,3,4,4,5,6,6,6,7,8,8],n=[0,8e3,16e3,32e3,0,0,11025,22050,44100,0,0,12e3,24e3,48e3,0,0],s=[32e3,56e3,64e3,96e3,112e3,128e3,192e3,224e3,256e3,32e4,384e3,448e3,512e3,576e3,64e4,768e3,96e4,1024e3,1152e3,128e4,1344e3,1408e3,1411200,1472e3,1536e3,192e4,2048e3,3072e3,384e4,0,0,0];function o(e){var t=new a.A(size);t.appendBuffer(e);var r={syncWord:0,frameType:0,sampleCount:0,crcFlag:0,sampleBlock:0,frameSize:0,channelIndex:0,sampleRateIndex:0,bitrateIndex:0,channels:0,sampleRate:0,bitrate:0};return r.syncWord=t.readU(32),2147385345!==r.syncWord?-1:(r.frameType=t.readU1(),r.sampleCount=t.readU(5),r.crcFlag=t.readU1(),r.sampleBlock=t.readU(7),r.frameSize=t.readU(14),r.channelIndex=t.readU(6),r.sampleRateIndex=t.readU(4),r.bitrateIndex=t.readU(5),r.channels=i[r.channelIndex],r.sampleRate=n[r.sampleRateIndex],r.bitrate=s[r.bitrateIndex],r)}},20620:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>w,KD:()=>B,MB:()=>x,S1:()=>k,XC:()=>_,ci:()=>I,oT:()=>A,tZ:()=>U,wf:()=>P}),r(42096),r(75062),r(16091),r(68632);var a=r(134),i=r(63939),n=r(50932),s=r(72739),o=r(729),c=r(31865),h=r(37246),u=r(4624),f=r(14686),d=r(71517),l=r(60264),p=r(37837),v=r(23991),g=r(39381),b="src/avformat/codecs/h264.ts",y=3,U=(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)({},66,"Constrained Baseline"),77,"Main"),100,"High"),110,"High10"),122,"High422"),244,"High444");function x(e){var t=new c.A(e);t.skip(5);for(var r=[],a=[],i=[],n=31&t.readUint8(),s=0;s<n;s++){var o=t.readUint16();r.push(t.readBuffer(o))}for(var h=t.readUint8(),u=0;u<h;u++){var f=t.readUint16();a.push(t.readBuffer(f))}if(t.remainingSize()>4){t.skip(3);var d=t.readUint8();if(d>0)for(var l=0;l<d;l++){var p=t.readUint16();i.push(t.readBuffer(p))}}return{spss:r,ppss:a,spsExts:i}}function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.length>32&&(u.R8("h264 metadata's sps max length is 32, but get ".concat(e.length),b,210),e=e.slice(0,32)),e.length>256&&(u.R8("h264 metadata's pps max length is 256, but get ".concat(e.length),b,214),e=e.slice(0,256));var a=7;a=e.reduce((function(e,t){return e+2+t.length}),a),a=t.reduce((function(e,t){return e+2+t.length}),a);var i=e[0],n=P(i);66!==n.profile&&77!==n.profile&&88!==n.profile&&(a+=4,r.length&&(a=r.reduce((function(e,t){return e+2+t.length}),a)));var c=new Uint8Array(a),h=new o.A(c);return h.writeUint8(1),h.writeUint8(i[1]),h.writeUint8(i[2]),h.writeUint8(i[3]),h.writeUint8(252|y),h.writeUint8(224|31&e.length),s.__(e,(function(e){h.writeUint16(e.length),h.writeBuffer(e)})),h.writeUint8(t.length),s.__(t,(function(e){h.writeUint16(e.length),h.writeBuffer(e)})),66!==n.profile&&77!==n.profile&&88!==n.profile&&(h.writeUint8(252|n.chromaFormatIdc),h.writeUint8(248|n.bitDepthLumaMinus8),h.writeUint8(248|n.bitDepthChromaMinus8),r.length&&s.__(r,(function(e){h.writeUint16(e.length),h.writeBuffer(e)}))),c}function k(e){var t=(0,l.py)(e);if(t.length>1){var r=[],a=[],i=[];if(t.forEach((function(e){var t=31&e[0];7===t?r.push(e):8===t?a.push(e):13===t&&i.push(e)})),r.length&&a.length)return m(r,a,i)}}function A(e){var t,r=(0,l.py)(e),a=!1;if(r.length>1){var i=[],n=[],c=[];r.forEach((function(e){var t=31&e[0];7===t?i.push(e):8===t?n.push(e):13===t&&c.push(e)})),i.length&&n.length&&(t=m(i,n,c)),r=r.filter((function(e){var t=31&e[0];return 9!==t&&8!==t&&7!==t&&13!==t}))}var h=r.reduce((function(e,t){return e+y+1+t.length}),0),u=(0,p.sY)(h),d=(0,f.s3)(u,h),v=new o.A(d);return s.__(r,(function(e){3===y?v.writeUint32(e.length):2===y?v.writeUint24(e.length):1===y?v.writeUint16(e.length):v.writeUint8(e.length),v.writeBuffer(e.subarray(0)),5==(31&e[0])&&(a=!0)})),{bufferPointer:u,length:h,key:a,extradata:t}}function w(e,t){var r;if(1&i.f[15](e+36)){var a=(0,d.iI)(e);if(!(0,l.Bs)(a)){for(var n=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:y,s=[],o=[],h=[],u=[],v=new c.A(a);v.remainingSize()>0;){var g;g=3===n?v.readUint32():2===n?v.readUint24():1===n?v.readUint16():v.readUint8();var b=a.subarray(Number(BigInt.asIntN(32,v.getPos())),Number(BigInt.asIntN(32,v.getPos()))+g);v.skip(g);var U=31&b[0];7===U?s.push(b):8===U?o.push(b):13===U?h.push(b):u.push(b)}if(s.length||o.length){var x=m(s,o,h),k=(0,p.sY)(x.length);(0,f.lW)(k,x.length,x),(0,d.Ow)(e,1,k,x.length)}}}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&i.f[15](e+36)||t){var r=(0,d.iI)(e);if((0,l.Bs)(r)){var a=(0,l.py)(r);if(a.length>1){var s=[],o=[],c=[];if(a.forEach((function(e){var t=31&e[0];7===t?s.push(e):8===t?o.push(e):13===t&&c.push(e)})),s.length&&o.length){var h=m(s,o,c),u=(0,p.sY)(h.length);(0,f.lW)(u,h.length,h),(0,d.Ow)(e,1,u,h.length),n.M[15](e+36,1|i.f[15](e+36))}}}}}function _(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[4];var r=x(t).spss;if(r.length){var a=P(r[0]),i=a.profile,n=a.level,s=a.width,o=a.height;e.codecpar.profile=i,e.codecpar.level=n,e.codecpar.width=s,e.codecpar.height=o}}}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(2===i.f[15](e+80))return(0,l.py)((0,f.s3)(i.f[20](e+24),i.f[15](e+28))).some((function(e){return 5==(31&e[0])}));for(var r=i.f[15](e+28),a=0;a<r-t;){if(5==(31&g.r8(i.f[20](e+24)+(a+t))))return!0;a+=4===t?g.Sg(i.f[20](e+24)+a):3===t?g.ht(i.f[20](e+24)+a):2===t?g.yd(i.f[20](e+24)+a):g.r8(i.f[20](e+24)+a),a+=t}return!1}function P(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=(0,l.BN)(e.subarray(t)),a=new h.A(r.length);a.appendBuffer(r),a.readU1(),a.readU(2),a.readU(5);var i=a.readU(8);a.readU1(),a.readU1(),a.readU1(),a.readU1(),a.readU1(),a.readU1(),a.readU(2);var n=a.readU(8);v.xb(a);var s=1,o=0,c=0;if((100==i||110==i||122==i||244==i||44==i||83==i||86==i||118==i||128==i||138==i||139==i||134==i||135==i)&&(3===(s=v.xb(a))&&a.readU1(),o=v.xb(a),c=v.xb(a),a.readU1(),a.readU1()))for(var u=new Array(8),f=0;f<(3!=s?8:12);f++)u[f]=a.readU1();var d=v.xb(a),p=v.xb(a),g=0,b=0;if(0===p)g=v.xb(a);else if(1===p){b=a.readU1(),v.$x(a),v.$x(a);for(var y=v.xb(a),U=0;U<y;U++)v.$x(a)}v.xb(a),a.readU1();var x=v.xb(a),m=v.xb(a),k=a.readU1(),A=16*(x+1),w=(2-k)*(m+1)*16;k||a.readU1(),a.readU1();var I=a.readU1();if(I){var _=1,B=2-I;1===s?(_=2,B=2*(2-I)):2===I&&(_=2,B=2-I),A-=_*(v.xb(a)+v.xb(a)),w-=B*(v.xb(a)+v.xb(a))}return{profile:i,level:n,width:A,height:w,chromaFormatIdc:s,bitDepthLumaMinus8:o,bitDepthChromaMinus8:c,frameMbsOnlyFlag:k,picOrderCntType:p,log2MaxPicOrderCntLsbMinus4:g,deltaPicOrderAlwaysZeroFlag:b,log2MaxFrameNumMinus4:d}}}},53e3:(e,t,r)=>{"use strict";r.d(t,{HL:()=>y,Jk:()=>k,KD:()=>I,S1:()=>x,XC:()=>w,ZU:()=>B,ci:()=>A,dT:()=>g,oT:()=>m,wf:()=>_}),r(42096),r(75062),r(16091),r(68632);var a=r(134),i=r(63939),n=r(50932),s=r(72739),o=r(729),c=r(31865),h=r(37246),u=r(14686),f=r(60264),d=r(71517),l=r(37837),p=r(23991),v=r(39381),g=(0,a.A)((0,a.A)((0,a.A)((0,a.A)({},1,"Main"),2,"Main10"),3,"MainStillPicture"),4,"Main444"),b=3;function y(e){var t=new c.A(e,!0);t.skip(22);for(var r=[],a=[],i=[],n=t.readUint8(),s=0;s<n;s++){for(var o=63&t.readUint8(),h=t.readUint16(),u=[],f=0;f<h;f++){var d=t.readUint16();u.push(t.readBuffer(d))}32===o?r=u:33===o?a=u:34===o&&(i=u)}return{vpss:r,spss:a,ppss:i}}function U(e,t,r){var a=t[0],i=23;e.length&&(i+=3,i=e.reduce((function(e,t){return e+2+t.length}),i)),t.length&&(i+=3,i=t.reduce((function(e,t){return e+2+t.length}),i)),r.length&&(i+=3,i=r.reduce((function(e,t){return e+2+t.length}),i));var n=new Uint8Array(i),c=new o.A(n,!0),h=_(a);c.writeUint8(1),c.writeUint8(a[1]),c.writeUint8(a[2]),c.writeUint8(a[3]),c.writeUint8(a[4]),c.writeUint8(a[5]),c.writeUint8(a[6]),c.writeUint8(a[7]),c.writeUint8(a[8]),c.writeUint8(a[9]),c.writeUint8(a[10]),c.writeUint8(a[11]),c.writeUint8(h.level),c.writeUint8(1020),c.writeUint8(0),c.writeUint8(16320),c.writeUint8(16320|h.chroma_format_idc),c.writeUint8(8160|h.bit_depth_luma_minus8),c.writeUint8(8160|h.bit_depth_chroma_minus8),c.writeUint16(0),c.writeUint8(8|(1&a[0])<<2|b);var u=0;return e.length&&u++,t.length&&u++,r.length&&u++,c.writeUint8(u),e.length&&(c.writeUint8(160),c.writeUint16(e.length),s.__(e,(function(e){c.writeUint16(e.length),c.writeBuffer(e)}))),t.length&&(c.writeUint8(161),c.writeUint16(t.length),s.__(t,(function(e){c.writeUint16(e.length),c.writeBuffer(e)}))),r.length&&(c.writeUint8(162),c.writeUint16(r.length),s.__(r,(function(e){c.writeUint16(e.length),c.writeBuffer(e)}))),n}function x(e){var t=(0,f.py)(e);if(t.length>=2){var r=[],a=[],i=[];if(t.forEach((function(e){var t=e[0]>>>1&63;32===t?r.push(e):33===t?a.push(e):34===t&&i.push(e)})),a.length&&i.length)return U(r,a,i)}}function m(e){var t,r=!1,a=(0,f.py)(e);if(a.length>=2){var i=[],n=[],c=[];a.forEach((function(e){var t=e[0]>>>1&63;32===t?i.push(e):33===t?n.push(e):34===t&&c.push(e)})),n.length&&c.length&&(t=U(i,n,c),a=a.filter((function(e){var t=e[0]>>>1&63;return 32!==t&&33!==t&&34!==t&&35!==t})))}var h=a.reduce((function(e,t){return e+b+1+t.length}),0),d=(0,l.sY)(h),p=(0,u.s3)(d,h),v=new o.A(p);return s.__(a,(function(e){3===b?v.writeUint32(e.length):2===b?v.writeUint24(e.length):1===b?v.writeUint16(e.length):v.writeUint8(e.length),v.writeBuffer(e.subarray(0));var t=e[0]>>>1&63;19!==t&&20!==t&&21!==t||(r=!0)})),{bufferPointer:d,length:h,extradata:t,key:r}}function k(e,t){var r;if(1&i.f[15](e+36)){var a=(0,d.iI)(e);if(!(0,f.Bs)(a)){for(var n=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:b,s=[],o=[],h=[],p=new c.A(a);p.remainingSize()>0;){var v;v=3===n?p.readUint32():2===n?p.readUint24():1===n?p.readUint16():p.readUint8();var g=a.subarray(Number(BigInt.asIntN(32,p.getPos())),Number(BigInt.asIntN(32,p.getPos()))+v);p.skip(v);var y=g[0]>>>1&63;33===y?o.push(g):34===y?h.push(g):32===y&&s.push(g)}if(o.length||h.length||s.length){var x=U(s,o,h),m=(0,l.sY)(x.length);(0,u.lW)(m,x.length,x),(0,d.Ow)(e,1,m,x.length)}}}}function A(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&i.f[15](e+36)||t){var r=(0,d.iI)(e);if((0,f.Bs)(r)){var a=(0,f.py)(r);if(a.length>2){var s=[],o=[],c=[];if(a.forEach((function(e){var t=e[0]>>>1&63;32===t?s.push(e):33===t?o.push(e):34===t&&c.push(e)})),s.length&&o.length&&c.length){var h=U(s,o,c),p=(0,l.sY)(h.length);(0,u.lW)(p,h.length,h),(0,d.Ow)(e,1,p,h.length),n.M[15](e+36,1|i.f[15](e+36))}}}}}function w(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[21];var r=y(t).spss;if(r.length){var a=_(r[0]),i=a.profile,n=a.level,s=a.width,o=a.height;e.codecpar.profile=i,e.codecpar.level=n,e.codecpar.width=s,e.codecpar.height=o}}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(2===i.f[15](e+80))return(0,f.py)((0,u.s3)(i.f[20](e+24),i.f[15](e+28))).some((function(e){var t=e[0]>>>1&63;return 20===t||19===t}));for(var r=i.f[15](e+28),a=0;a<r-t;){var n=v.r8(i.f[20](e+24)+(a+t))>>>1&63;if(20===n||19===n)return!0;a+=4===t?v.Sg(i.f[20](e+24)+a):3===t?v.ht(i.f[20](e+24)+a):2===t?v.yd(i.f[20](e+24)+a):v.r8(i.f[20](e+24)+a),a+=t}return!1}function _(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=0,a=0,i=0,n=0,s=0,o=0,c=1,u=0,d=0,l=0,v=0,g=(0,f.BN)(e.subarray(t)),b=new h.A(g.length);b.appendBuffer(g),b.readU1(),b.readU(6),b.readU(6),b.readU(3),b.readU(4);var y=b.readU(3);b.readU1();var U=0;if(y<=6){u=b.readU(2),d=b.readU1(),r=b.readU(5),l=b.readU(32),v=b.readU(48),a=b.readU(8);for(var x=new Array(6),m=new Array(6),k=0;k<y;k++)x[k]=b.readU1(),m[k]=b.readU1();if(y>0)for(var A=y;A<8;A++)b.readU(2);for(var w=0;w<y;w++)x[w]&&(b.readU(2),b.readU(1),b.readU(5),b.readU(32),b.readU(1),b.readU(1),b.readU(1),b.readU(1),b.readU(44)),m[w]&&b.readU(8);p.xb(b),3===(c=p.xb(b))&&(U=b.readU(1)),i=p.xb(b),n=p.xb(b);var I=0,_=0,B=0,P=0;b.readU1()&&(I=p.xb(b),_=p.xb(b),B=p.xb(b),P=p.xb(b)),s=p.xb(b),o=p.xb(b);var S=2,M=2;0===c?S=M=0:2===c?(S=2,M=1):3===c&&(S=M=1),i-=S*(1<<s+1)*(I+_),n-=M*(1<<s+1)*(B+P)}for(var R=p.xb(b)+4,L=b.readU1()?0:y;L<y+1;L++)p.xb(b),p.xb(b),p.xb(b);var z=p.xb(b)+3,D=p.xb(b),C=p.xb(b)+2,F=p.xb(b),E=z+D,N=z-1,T=i+(1<<E)-1>>E,O=n+(1<<E)-1>>E;return{profile:r,level:a,width:i,height:n,chroma_format_idc:c,bit_depth_luma_minus8:s,bit_depth_chroma_minus8:o,general_profile_space:u,general_tier_flag:d,general_profile_compatibility_flags:l,constraint_flags:v,separate_colour_plane_flag:U,log2_min_cb_size:z,log2_diff_max_min_coding_block_size:D,log2_min_tb_size:C,log2_diff_max_min_transform_block_size:F,log2_max_trafo_size:F+C,log2_ctb_size:E,log2_min_pu_size:N,ctb_width:T,ctb_height:O,ctb_size:T*O,min_cb_width:i>>z,min_cb_height:n>>z,min_tb_width:i>>C,min_tb_height:n>>C,min_pu_width:i>>N,min_pu_height:n>>N,log2_max_poc_lsb:R}}}function B(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r=(0,f.BN)(e.subarray(t)),a=new h.A(r.length);return a.appendBuffer(r),{pps_pic_parameter_set_id:p.xb(a),pps_seq_parameter_set_id:p.xb(a),dependent_slice_segment_flag:a.readU1(),output_flag_present_flag:a.readU1(),num_extra_slice_header_bits:a.readU(3)}}}},89088:(e,t,r)=>{"use strict";r.d(t,{Au:()=>U,He:()=>x,XC:()=>m,Y2:()=>g,hG:()=>b,oz:()=>y});var a=r(134),i=r(77231),n=[44100,48e3,32e3,0],s=[22050,24e3,16e3,0],o=[11025,12e3,8e3,0],c=[0,1152,1152,384],h=[0,576,1152,384],u=[0,576,1152,384],f=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],d=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],l=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],p=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,-1],v=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1];function g(e,t){switch(e){case 0:return o[t];case 2:return s[t];case 3:return n[t]}return i.N_}function b(e,t){switch(e){case 0:return u[t];case 2:return h[t];case 3:return c[t]}return i.N_}function y(e,t,r){switch(t){case 1:switch(e){case 0:case 2:return v[r];case 3:return l[r]}break;case 2:switch(e){case 0:case 2:return v[r];case 3:return d[r]}case 3:switch(e){case 0:case 2:return p[r];case 3:return f[r]}}return i.N_}function U(e){switch(e){case 1:return 34;case 2:return 33;case 3:return 32}return i.N_}var x=(0,a.A)((0,a.A)((0,a.A)({},32,"Layer1"),33,"Layer2"),34,"Layer3");function m(e,t){if(t&&t.length>=4){var r=t[1]>>>3&3,a=(6&t[1])>>1,i=(12&t[2])>>>2,n=3&~(t[3]>>>6)?2:1,s=U(a),o=g(r,i);e.codecpar.profile=s,e.codecpar.sampleRate=o,e.codecpar.chLayout.nbChannels=n}}},25906:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var a=r(71517);function i(e){for(var t=(0,a.iI)(e),r=0;r<t.length-6;r++)if(0===t[r]&&0===t[r+1]&&1===t[r+2]&&0===t[r+3])return 1==(t[r+5]>>3&7);return!1}},65451:(e,t,r)=>{"use strict";r.d(t,{Ij:()=>h,XC:()=>c,kt:()=>o});var a=r(31865),i=r(729),n=r(44328),s=[480,960,1920,2880,480,960,1920,2880,480,960,1920,2880,480,960,480,960,120,240,480,960,120,240,480,960,120,240,480,960,120,240,480,960];function o(e){var t,r,a=0;if(e.length<1)return 0;switch(t=e[0],r=s[t>>3],3&t){case 0:a=1;break;case 1:case 2:a=2;break;case 3:if(e.length<2)return 0;a=63&e[1]}return a*r}function c(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=19){var r=new a.A(t,!1);r.skip(9),e.codecpar.chLayout.nbChannels=r.readUint8(),e.codecpar.initialPadding=r.readUint16(),e.codecpar.sampleRate=r.readUint32(),e.codecpar.seekPreroll=Number((0,n.k)(BigInt(80),{den:1e3,num:1},{den:48e3,num:1}))}}function h(e){var t=new Uint8Array(19),r=new i.A(t,!1);return r.writeString("OpusHead"),r.writeUint8(1),r.writeUint8(e.chLayout.nbChannels),r.writeUint16(e.initialPadding),r.writeUint32(e.sampleRate),t}},55611:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>x,KD:()=>w,QA:()=>k,Ui:()=>_,XC:()=>A,ci:()=>m,oT:()=>U,wf:()=>I});var a=r(63939),i=r(50932),n=r(72739),s=r(729),o=r(31865),c=r(37246),h=r(14686),u=r(60264),f=r(71517),d=r(37837),l=r(23991),p=r(83314),v=r(39381),g=3;function b(e){var t=e.readU(9),r=e.readU(3),a=e.readU(2),i=e.readU(2),n=e.readU(3);e.readU(5),e.readU(2);var s=e.readU(6),o=e.readU(7),c=e.readU(1),h=e.readU(8),u=e.readU(1),f=e.readU(1),d=[],l=[];if(s){for(var p=0;p<s-1;p++)d[p]=e.readU(8);d[s-1]=e.readU(6)}else e.readU(6);if(r>1){for(var v=0,g=r-2;g>=0;--g)v|=e.readU(1)<<g;for(var b=r;b<=8&&r>1;++b)e.readU(1);for(var y=r-2;y>=0;--y)v&1<<y&&(l[y]=e.readU(8))}var U=e.readU(8),x=[];if(U)for(var m=0;m<U;m++)x.push(e.readU(8));return{olsIdx:t,numSublayers:r,bitDepthMinus8:n,chromaFormatIdc:i,constantFrameRate:a,generalProfileIdc:o,generalTierFlag:c,generalLevelIdc:h,ptlFrameOnlyConstraintFlag:u,ptlMultilayerEnabledFlag:f,generalConstraintInfo:d,sublayerLevelIdc:l,generalSubProfileIdc:x,maxPictureWidth:e.readU(16),maxPictureHeight:e.readU(16),avgFramerate:e.readU(16)}}function y(e,t,r){var a,i=t[0];if(i){var o=I(i),c=o.generalConstraintInfo;c.length||(c=new Array(12).fill(0));var h=new p.A;if(h.writeU(9,0),h.writeU(3,o.spsMaxSublayersMinus1+1),h.writeU(2,1),h.writeU(2,o.chromaFormatIdc),h.writeU(3,o.bitDepthMinus8),h.writeU(5,31),h.writeU(2,0),h.writeU(6,c.length),h.writeU(7,o.profile),h.writeU1(o.tierFlag),h.writeU(8,o.level),h.writeU1(o.ptlFrameOnlyConstraintFlag),h.writeU1(o.ptlMultilayerEnabledFlag),c.length){for(var u=0;u<c.length-1;u++)h.writeU(8,c[u]);h.writeU(6,c[c.length-1])}else h.writeU(6,63);if(o.spsMaxSublayersMinus1+1>1){for(var f=0,d=o.spsMaxSublayersMinus1-1;d>=0;d--)f=f<<1|o.ptlSublayerLevelPresentFlag[d];h.writeU(o.spsMaxSublayersMinus1,f);for(var l=o.spsMaxSublayersMinus1+1;l<=8&&o.spsMaxSublayersMinus1>0;++l)h.writeU1(0);for(var v=o.spsMaxSublayersMinus1-1;v>=0;v--)o.ptlSublayerLevelPresentFlag[v]&&h.writeU(8,o.sublayerLevelIdc[v])}h.writeU(8,o.generalSubProfileIdc.length);for(var b=0;b<o.generalSubProfileIdc.length;b++)h.writeU(8,o.sublayerLevelIdc[b]);h.writeU(16,o.width),h.writeU(16,o.height),h.writeU(16,0),h.padding(),a=h.getBuffer().subarray(0,h.getPointer())}var y=2+(a?a.length:0);e.length&&(y+=3,y=e.reduce((function(e,t){return e+2+t.length}),y)),t.length&&(y+=3,y=t.reduce((function(e,t){return e+2+t.length}),y)),r.length&&(y+=3,y=r.reduce((function(e,t){return e+2+t.length}),y));var U=new Uint8Array(y),x=new s.A(U,!0);x.writeUint8(g<<1|(a?1:0)|248),a&&x.writeBuffer(a);var m=0;return e.length&&m++,t.length&&m++,r.length&&m++,x.writeUint8(m),e.length&&(x.writeUint8(142),x.writeUint16(e.length),n.__(e,(function(e){x.writeUint16(e.length),x.writeBuffer(e)}))),t.length&&(x.writeUint8(143),x.writeUint16(t.length),n.__(t,(function(e){x.writeUint16(e.length),x.writeBuffer(e)}))),r.length&&(x.writeUint8(144),x.writeUint16(r.length),n.__(r,(function(e){x.writeUint16(e.length),x.writeBuffer(e)}))),U}function U(e){var t,r=!1,a=(0,u.py)(e);if(a.length>=2){var i=[],o=[],c=[];a.forEach((function(e){var t=e[1]>>>3&31;14===t?i.push(e):15===t?o.push(e):16===t&&c.push(e)})),o.length&&c.length&&(t=y(i,o,c),a=a.filter((function(e){var t=e[1]>>>3&31;return 14!==t&&15!==t&&16!==t&&20!==t})))}var f=a.reduce((function(e,t){return e+g+1+t.length}),0),l=(0,d.sY)(f),p=(0,h.s3)(l,f),v=new s.A(p);return n.__(a,(function(e){3===g?v.writeUint32(e.length):2===g?v.writeUint24(e.length):1===g?v.writeUint16(e.length):v.writeUint8(e.length),v.writeBuffer(e.subarray(0));var t=e[1]>>>3&31;8!==t&&7!==t&&9!==t&&10!==t||(r=!0)})),{bufferPointer:l,length:f,extradata:t,key:r}}function x(e,t){var r;if(1&a.f[15](e+36)){var i=(0,f.iI)(e);if(!(0,u.Bs)(i)){for(var n=null!==(r=t.metadata.naluLengthSizeMinusOne)&&void 0!==r?r:g,s=[],c=[],l=[],p=new o.A(i);p.remainingSize()>0;){var v;v=3===n?p.readUint32():2===n?p.readUint24():1===n?p.readUint16():p.readUint8();var b=i.subarray(Number(BigInt.asIntN(32,p.getPos())),Number(BigInt.asIntN(32,p.getPos()))+v);p.skip(v);var U=b[1]>>>3&31;15===U?c.push(b):16===U?l.push(b):14===U&&s.push(b)}if(c.length||l.length||s.length){var x=y(s,c,l),m=(0,d.sY)(x.length);(0,h.lW)(m,x.length,x),(0,f.Ow)(e,1,m,x.length)}}}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(1&a.f[15](e+36)||t){var r=(0,f.iI)(e);if((0,u.Bs)(r)){var n=(0,u.py)(r);if(n.length>2){var s=[],o=[],c=[];if(n.forEach((function(e){var t=e[1]>>>3&31;14===t?s.push(e):15===t?o.push(e):16===t&&c.push(e)})),s.length&&o.length&&c.length){var l=y(s,o,c),p=(0,d.sY)(l.length);(0,h.lW)(p,l.length,l),(0,f.Ow)(e,1,p,l.length),i.M[15](e+36,1|a.f[15](e+36))}}}}}function k(e,t){var r=I(t),a=r.profile,i=r.level,n=r.width,s=r.height;e.codecpar.profile=a,e.codecpar.level=i,e.codecpar.width=n,e.codecpar.height=s}function A(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=t[0]>>>1&3;var r=function(e){var t=new o.A(e,!0);if(1&t.readUint8()){var r=new c.A;r.appendBuffer(e.subarray(1)),b(r),t.skip(r.getPointer())}for(var a=[],i=[],n=[],s=t.readUint8(),h=0;h<s;h++){var u=31&t.readUint8(),f=1;13!==u&&12!==u&&(f=t.readUint16());for(var d=[],l=0;l<f;l++){var p=t.readUint16();d.push(t.readBuffer(p))}14===u?a=d:15===u?i=d:16===u&&(n=d)}return{vpss:a,spss:i,ppss:n}}(t).spss;r.length&&k(e,r[0])}}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(2===a.f[15](e+80))return(0,u.py)((0,h.s3)(a.f[20](e+24),a.f[15](e+28))).some((function(e){var t=e[1]>>>3&31;return 8===t||7===t}));for(var r=a.f[15](e+28),i=0;i<r-t;){var n=v.r8(a.f[20](e+24)+(i+t+1))>>>3&31;if(8===n||7===n)return!0;i+=4===t?v.Sg(a.f[20](e+24)+i):3===t?v.ht(a.f[20](e+24)+i):2===t?v.yd(a.f[20](e+24)+i):v.r8(a.f[20](e+24)+i),i+=t}return!1}function I(e){if(e&&!(e.length<3)){var t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);var r,a,i,n,s=0,o=0,h=0,f=0,d=0,p=[],v=[],g=[],b=[],y=(0,u.BN)(e.subarray(t)),U=new c.A(y.length);U.appendBuffer(y),U.readU1(),U.readU1(),U.readU(6),U.readU(5),U.readU(3),U.readU(8);var x=U.readU(3);n=U.readU(2);var m=U.readU(2);if(U.readU(1)){if(s=U.readU(7),h=U.readU(1),o=U.readU(8),f=U.readU(1),d=U.readU(1),U.readU(1)){for(var k=0;k<8;k++)p[k]=U.readU(8);p[8]=U.readU(7);var A=U.readU(8);U.readU(A)}U.skipPadding();for(var w=x-1;w>=0;w--)v[w]=U.readU(1);U.skipPadding();for(var I=x-1;I>=0;I--)v[I]&&(g[I]=U.readU(8));var _=U.readU(8);if(_)for(var B=0;B<_;B++)b[B]=U.readU(32)}U.readU1(),U.readU1()&&U.readU1();var P=r=l.xb(U),S=a=l.xb(U);if(U.readU1()&&(l.xb(U),l.xb(U),l.xb(U),l.xb(U)),U.readU1()){var M,R=l.xb(U),L=m+5,z=1<<L,D=P/(1<<L),C=S/(1<<L),F=Math.ceil(Math.log2(D)),E=Math.ceil(Math.log2(C)),N=0,T=0;R>0&&(T=U.readU1(),N=U.readU1());for(var O=0;R>0&&O<=R;O++)N&&0!=O||(O>0&&P>z&&U.readU(F),O>0&&S>z&&U.readU(E),O<R&&P>z&&U.readU(F),O<R&&S>z&&U.readU(E)),T||U.readU(2);if(M=l.xb(U)+1,U.readU(1)&&U.readU(1))for(var W=0;W<=R;W++)U.readU(M)}i=l.xb(U),U.readU(1),U.readU(1);var V=U.readU(4),Y=U.readU(1),H=0;Y&&(H=l.xb(U));for(var K=[],X=U.readU(2),J=0;J<8*X;J++)K[J]=U.readU(1);return{profile:s,level:o,width:r,height:a,chromaFormatIdc:n,bitDepthMinus8:i,generalProfileSpace:0,tierFlag:h,generalConstraintInfo:p,generalSubProfileIdc:b,ptlFrameOnlyConstraintFlag:f,ptlMultilayerEnabledFlag:d,spsMaxSublayersMinus1:x,ptlSublayerLevelPresentFlag:v,sublayerLevelIdc:g,sps_log2_max_pic_order_cnt_lsb_minus4:V,sps_poc_msb_cycle_flag:Y,sps_poc_msb_cycle_len_minus1:H,sps_num_extra_ph_bytes:X,sps_extra_ph_bit_present_flag:K}}}function _(e){0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(e=function(e){var t=(0,u.py)(e);if(t.length>=2){var r=[],a=[],i=[];if(t.forEach((function(e){var t=e[1]>>>3&31;14===t?r.push(e):15===t?a.push(e):16===t&&i.push(e)})),a.length&&i.length)return y(r,a,i)}}(e));var t=new c.A;return t.appendBuffer(e),1&t.readU(8)?b(t):{}}},85947:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(78716),i=r(81570),n=r(134),s=function(){function e(){(0,a.A)(this,e),(0,n.A)(this,"type",-1),(0,n.A)(this,"onStreamAdd",void 0)}return(0,i.A)(e,[{key:"destroy",value:function(e){}}]),e}()},83855:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>G});var a=r(88435),i=r.n(a),n=r(25182),s=r(78716),o=r(81570),c=r(77193),h=r(43070),u=r(60394),f=r(25767),d=r(31060),l=r(134),p=r(36443),v=r.n(p),g=r(80662),b=r.n(g),y=r(61499),U=r(63939),x=r(50932),m=r(4624),k=r(9705),A=r(51660),w=r(6403),I=r(85947),_=r(71517),B=r(77231),P=r(52071),S=r(44328),M=r(72739),R=r(89088),L=r(20620),z=r(53e3),D=r(55611),C=r(58469),F=r(65451),E=r(25906),N=r(37837),T=r(14686),O=r(10662),W=r(92647),V=r(60264),Y=r(56397),H=r(75294),K=r(87771),X=r(29347),J=r(67672),$=r(51113),j=r(7309);function q(e,t,r){return t=(0,f.A)(t),(0,c.A)(e,Q()?i()(t,r||[],(0,f.A)(e).constructor):t.apply(e,r))}function Q(){try{var e=!Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){})))}catch(e){}return(Q=function(){return!!e})()}var Z="src/avformat/formats/IMpegpsFormat.ts",G=function(e){function t(){var e;return(0,s.A)(this,t),e=q(this,t),(0,l.A)((0,h.A)(e),"type",3),(0,l.A)((0,h.A)(e),"context",void 0),(0,l.A)((0,h.A)(e),"cacheAVPacket",void 0),e.context={headerState:255,psmType:new(b()),pes:new w.xf,slices:new(b()),lastPtsMap:new(b()),imkhCctv:!1,sofdec:!1,ioEnded:!1},e}var r,a,i,c,p,g,I,Q;return(0,d.A)(t,e),(0,o.A)(t,[{key:"init",value:function(e){e.ioReader&&e.ioReader.setEndian(!0),this.cacheAVPacket=0}},{key:"destroy",value:function(e){(0,u.A)((0,f.A)(t.prototype),"destroy",this).call(this,e),this.cacheAVPacket&&((0,_.Qe)(this.cacheAVPacket),this.cacheAVPacket=0),M.__(e.streams,(function(e){var t=e.privData;t.filter&&(t.filter.destroy(),t.filter=null)}))}},{key:"findNextStartCode",value:(Q=(0,n.A)(v().mark((function e(t){var r,a,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=255,a=0;case 2:if(!(a<O.V)){e.next=13;break}return e.next=5,t.ioReader.readUint8();case 5:if(i=e.sent,1!==r){e.next=9;break}return r=16777215&(r<<8|i),e.abrupt("break",13);case 9:r=16777215&(r<<8|i),a++,e.next=2;break;case 13:return a===O.V&&(r=-1),this.context.headerState=r,e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return Q.apply(this,arguments)})},{key:"parsePSM",value:(I=(0,n.A)(v().mark((function e(t){var r,a,i,n,s,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ioReader.readUint16();case 2:return r=e.sent,e.next=5,t.ioReader.skip(2);case 5:return e.next=7,t.ioReader.readUint16();case 7:return a=e.sent,e.next=10,t.ioReader.skip(a);case 10:return e.next=12,t.ioReader.readUint16();case 12:i=r-a-10;case 13:if(!(i>=4)){e.next=29;break}return e.next=16,t.ioReader.readUint8();case 16:return n=e.sent,e.next=19,t.ioReader.readUint8();case 19:return s=e.sent,e.next=22,t.ioReader.readUint16();case 22:return o=e.sent,this.context.psmType.set(s,n),e.next=26,t.ioReader.skip(o);case 26:i-=o+4,e.next=13;break;case 29:return e.next=31,t.ioReader.readUint32();case 31:case"end":return e.stop()}}),e,this)}))),function(e){return I.apply(this,arguments)})},{key:"readPES",value:(g=(0,n.A)(v().mark((function e(t){var r,a,i,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.findNextStartCode(t);case 3:if(!((r=e.sent)<0)){e.next=6;break}return e.abrupt("return",k.LR);case 6:if(442!==r&&443!==r){e.next=8;break}return e.abrupt("continue",0);case 8:if(446!==r&&447!==r){e.next=15;break}return e.next=11,t.ioReader.readUint16();case 11:return a=e.sent,e.next=14,t.ioReader.skip(a);case 14:case 18:return e.abrupt("continue",0);case 15:if(444!==r){e.next=19;break}return e.next=18,this.parsePSM(t);case 19:if(r>=448&&r<=479||r>=480&&r<=495||445==r||447==r||509==r){e.next=21;break}return e.abrupt("continue",0);case 21:return e.next=23,t.ioReader.readUint16();case 23:return i=e.sent,this.context.pes.pos=t.ioReader.getPos()-BigInt(6),this.context.pes.streamId=255&r,this.context.pes.streamType=this.context.psmType[this.context.pes.streamId],(n=new Uint8Array(i+6))[0]=0,n[1]=0,n[2]=1,n[3]=this.context.pes.streamId,n[4]=i>>8,n[5]=255&i,e.next=36,t.ioReader.readBuffer(i,n.subarray(6));case 36:return this.context.pes.data=n,e.abrupt("return",r);case 40:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"createStream",value:function(e,t,r,a){var i=0,n=-1;switch(r){case 226:n=0,i=27;break;case 128:n=1,i=86019;break;case 136:n=1,i=86020;break;case 160:n=1,i=65537;break;case 32:n=3,i=94208;break;default:switch(t){case 1:case 2:n=0,i=2;break;case 3:case 4:n=1,i=86017;break;case 15:n=1,i=86018;break;case 16:n=0,i=12;break;case 27:n=0,i=27;break;case 36:n=0,i=173;break;case 51:n=0,i=196;break;case 129:n=1,i=86019;break;case 144:n=1,i=65543;break;case 145:n=1,i=65542;break;case 447:n=2,i=98312;break;default:if(a>=480&&a<=495)n=0,i=87;else if(a>=448&&a<=479)n=1,i=86017;else if(a>=128&&a<=135)n=1,i=86019;else if(a>=136&&a<=143||a>=152&&a<=159)n=1,i=86020;else if(a>=176&&a<=191)n=1,i=86060;else if(a>=192&&a<=207)n=1,i=86019;else if(a>=32&&a<=63)n=3,i=94208;else{if(!(a>=64853&&a<=64863))return;n=0,i=70}}}var s=e.createStream();s.codecpar.codecType=n,s.codecpar.codecId=i,s.timeBase.den=9e4,s.timeBase.num=1;var o=s.privData={streamId:r,streamType:t,filter:null};return 65543!==i&&65542!==i||(s.codecpar.chLayout.nbChannels=1,s.codecpar.sampleRate=8e3,s.codecpar.chLayout.order=1,s.codecpar.chLayout.u.mask=BigInt(4)),86017===s.codecpar.codecId?o.filter=new Y.A:86019===s.codecpar.codecId?o.filter=new $.A:86020===s.codecpar.codecId&&(o.filter=new j.A),o.filter&&o.filter.init(s.codecpar[y.o9],s.timeBase[y.o9]),s}},{key:"readHeader",value:(p=(0,n.A)(v().mark((function e(t){var r,a,i,n,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ioReader.peekString(6);case 2:if("IMKH"!==(r=e.sent).substring(0,4)){e.next=9;break}return this.context.imkhCctv=!0,e.next=7,t.ioReader.skip(4);case 7:e.next=13;break;case 9:if("Sofdec"!==r){e.next=13;break}return this.context.sofdec=!0,e.next=13,t.ioReader.skip(6);case 13:return e.next=15,t.ioReader.peekUint32();case 15:if(442===e.sent){e.next=19;break}return m.z3("the file format is not mpegps",Z,379),e.abrupt("return",k.LR);case 19:if(!(1&t.ioReader.flags)){e.next=44;break}return a=t.ioReader.getPos(),i=BigInt(500)*BigInt(1e3),e.next=24,t.ioReader.fileSize();case 24:return n=e.sent,(s=n-i)<a&&(s=a),e.next=29,t.ioReader.seek(s);case 29:e.prev=29,this.context.pes.pts=B.Dh;case 31:return e.next=34,this.readPES(t);case 34:(0,A.A)(this.context.pes),this.context.pes.pts!==B.Dh&&this.context.lastPtsMap.set(this.context.pes.streamId,this.context.pes.pts),e.next=31;break;case 38:e.next=44;break;case 40:return e.prev=40,e.t0=e.catch(29),e.next=44,t.ioReader.seek(a);case 44:return this.context.ioEnded=!1,e.abrupt("return",0);case 46:case"end":return e.stop()}}),e,this,[[29,40]])}))),function(e){return p.apply(this,arguments)})},{key:"checkExtradata",value:function(e,t){if(86017===t.codecpar.codecId&&t.codecpar.sampleRate===B.N_){var r=(0,_.iI)(e),a=r[1]>>>3&3,i=(6&r[1])>>1,n=(12&r[2])>>>2,s=3&~(r[3]>>>6)?2:1,o=R.Au(i),c=R.Y2(a,n);t.codecpar.profile=o,t.codecpar.sampleRate=c,t.codecpar.chLayout.nbChannels=s}else if(86019===t.codecpar.codecId&&t.codecpar.sampleRate===B.N_){var h=(0,_.iI)(e),u=K.R(h);J.ai(u)||(t.codecpar.sampleRate=u.sampleRate,t.codecpar.chLayout.nbChannels=u.channels,t.codecpar.bitrate=BigInt(u.bitrate))}else if(86020===t.codecpar.codecId&&t.codecpar.sampleRate===B.N_){var f=(0,_.iI)(e),d=X.R(f);J.ai(d)||(t.codecpar.sampleRate=d.sampleRate,t.codecpar.chLayout.nbChannels=d.channels,t.codecpar.bitrate=BigInt(0|d.bitrate))}else if(!t.codecpar.extradata){var l=(0,_.rU)(e,1);l&&(t.codecpar.extradata=(0,N.sY)(U.f[15](l+4)),(0,T.Mr)(t.codecpar.extradata,U.f[20](l),U.f[15](l+4)),t.codecpar.extradataSize=U.f[15](l+4),(0,_.Is)(e,1),27===t.codecpar.codecId?L.XC(t,(0,T.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):173===t.codecpar.codecId?z.XC(t,(0,T.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):196===t.codecpar.codecId?D.XC(t,(0,T.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):86018===t.codecpar.codecId?C.XC(t,(0,T.JW)(t.codecpar.extradata,t.codecpar.extradataSize)):86076===t.codecpar.codecId&&F.XC(t,(0,T.JW)(t.codecpar.extradata,t.codecpar.extradataSize)))}}},{key:"parseSlice",value:function(e,t,r,a){var i=(0,W.A)(Uint8Array,e.buffers),n=a.privData;1===a.codecpar.codecType&&x.M[15](r+36,1|U.f[15](r+36));var s=a.codecpar.codecId;27!==s&&173!==s&&196!==s||x.M[15](r+80,2),x.M[15](r+32,a.index),x.M[17](r+16,e.dts),x.M[17](r+8,e.pts),x.M[17](r+56,e.pos),x.M[15](r+76,9e4),x.M[15](r+72,1),a.startTime===B.Dh&&(a.startTime=U.f[17](r+8)||U.f[17](r+16),this.context.lastPtsMap.has(n.streamId)&&(a.duration=this.context.lastPtsMap.get(n.streamId)-a.startTime));var o=(0,N.sY)(i.length);if((0,T.lW)(o,i.length,i),(0,_.NX)(r,o,i.length),n.filter){if(n.filter.sendAVPacket(r)<0)return m.z3("send avpacket to bsf failed",Z,527),k.LR;if(n.filter.receiveAVPacket(r)<0)return m.z3("receive avpacket from bsf failed",Z,534),k.LR;for(x.M[15](r+76,9e4),x.M[15](r+72,1),x.M[15](r+32,a.index),this.checkExtradata(r,a);;){var c=this.cacheAVPacket||(0,_._5)();if(0!==n.filter.receiveAVPacket(c)){this.cacheAVPacket=c;break}x.M[15](c+76,9e4),x.M[15](c+72,1),x.M[15](c+32,a.index),this.checkExtradata(c,a),t.interval.packetBuffer.push(c),this.cacheAVPacket=0}}else 2===a.codecpar.codecId?E.K(r)&&x.M[15](r+36,1|U.f[15](r+36)):27===a.codecpar.codecId?(a.codecpar.extradata||(L.ci(r,!0),this.checkExtradata(r,a),a.codecpar.bitFormat=2),L.KD(r)&&x.M[15](r+36,1|U.f[15](r+36))):173===a.codecpar.codecId?(a.codecpar.extradata||(z.ci(r,!0),this.checkExtradata(r,a),a.codecpar.bitFormat=2),z.KD(r)&&x.M[15](r+36,1|U.f[15](r+36))):196===a.codecpar.codecId&&(a.codecpar.extradata||(D.ci(r,!0),this.checkExtradata(r,a),a.codecpar.bitFormat=2),D.KD(r)&&x.M[15](r+36,1|U.f[15](r+36)))}},{key:"readAVPacket_",value:(c=(0,n.A)(v().mark((function e(t,r){var a,i,n,s,o,c,h,u,f,d,l,p,g,b,y,U,x,m,k,w,I,_,P,S,M,L=this;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.readPES(t);case 3:if(a=e.sent,(i=t.streams.find((function(e){return e.privData.streamId===L.context.pes.streamId})))||(n=255&a,i=this.createStream(t,this.context.psmType.get(n),n,a)),!i){e.next=120;break}if(s=i.privData,(0,A.A)(this.context.pes),this.context.pes.payload){e.next=11;break}return e.abrupt("continue",0);case 11:if((o=this.context.slices.get(s.streamId))||(o={pts:-BigInt(1),dts:-BigInt(1),pos:-BigInt(1),buffers:[]},this.context.slices.set(s.streamId,o)),this.context.pes.dts!==B.Dh&&o.buffers.length){e.next=112;break}if(this.context.pes.dts===B.Dh){e.next=108;break}if(o.dts=this.context.pes.dts,o.pts=this.context.pes.pts,o.pos=this.context.pes.pos,0!==i.codecpar.codecType){e.next=23;break}(c=V.Ky(this.context.pes.payload,0)).offset>3&&(this.context.pes.payload=this.context.pes.payload.subarray(c.offset)),e.next=108;break;case 23:if(86019!==i.codecpar.codecId&&86020!==i.codecpar.codecId&&86017!==i.codecpar.codecId){e.next=108;break}h=0,u=2,86019===i.codecpar.codecId?h=11:86017===i.codecpar.codecId?h=255:(h=127,u=4),f=0;case 28:if(!(f<this.context.pes.payload.length-u)){e.next=108;break}if(this.context.pes.payload[f]!==h){e.next=105;break}if(d=this.context.pes.payload[f+1],l=2,86017!==i.codecpar.codecId||224&~d){e.next=61;break}if(0===f){e.next=58;break}p=0,g=0;case 36:if(b=new H.FrameHeader,H.parse(b,this.context.pes.payload[f+g]<<24|this.context.pes.payload[f+g+1]<<16|this.context.pes.payload[f+g+2]<<8|this.context.pes.payload[f+g+3]),y=this.context.pes.payload[f+g+1]>>>3&3,U=(12&this.context.pes.payload[f+g+2])>>>2,x=R.Y2(y,U),!((m=H.getFrameLength(b,x))&&f+g+m<this.context.pes.payload.length-2&&255===this.context.pes.payload[f+g+m])||224&~this.context.pes.payload[f+g+m+1]){e.next=50;break}if(p++,g+=m,p!==l){e.next=48;break}return e.abrupt("break",53);case 48:e.next=51;break;case 50:return e.abrupt("break",53);case 51:e.next=36;break;case 53:if(p!==l){e.next=57;break}this.context.pes.payload=this.context.pes.payload.subarray(f),e.next=58;break;case 57:return e.abrupt("continue",105);case 58:return e.abrupt("break",108);case 61:if(86019!==i.codecpar.codecId||119!==d){e.next=83;break}if(0===f){e.next=82;break}k=0,w=0;case 65:if(I=K.R(this.context.pes.payload.subarray(f+w)),J.ai(I)||!(f+w+I.frameSize<this.context.pes.payload.length-2)||11!==this.context.pes.payload[f+w+I.frameSize]||119!==this.context.pes.payload[f+w+I.frameSize+1]){e.next=74;break}if(k++,w+=I.frameSize,k!==l){e.next=72;break}return e.abrupt("break",77);case 72:e.next=75;break;case 74:return e.abrupt("break",77);case 75:e.next=65;break;case 77:if(k!==l){e.next=81;break}this.context.pes.payload=this.context.pes.payload.subarray(f),e.next=82;break;case 81:return e.abrupt("continue",105);case 82:return e.abrupt("break",108);case 83:if(86020!==i.codecpar.codecId||254!==d||128!==this.context.pes.payload[f+2]||129!==this.context.pes.payload[f+3]){e.next=105;break}if(0===f){e.next=104;break}_=0,P=0;case 87:if(S=X.R(this.context.pes.payload.subarray(f+P)),J.ai(S)||!(f+P+S.frameSize<this.context.pes.payload.length-4)||127!==this.context.pes.payload[f+P+S.frameSize]||254!==this.context.pes.payload[f+P+S.frameSize+1]||128!==this.context.pes.payload[f+P+S.frameSize+2]||129!==this.context.pes.payload[f+P+S.frameSize+3]){e.next=96;break}if(_++,P+=S.frameSize,_!==l){e.next=94;break}return e.abrupt("break",99);case 94:e.next=97;break;case 96:return e.abrupt("break",99);case 97:e.next=87;break;case 99:if(_!==l){e.next=103;break}this.context.pes.payload=this.context.pes.payload.subarray(f),e.next=104;break;case 103:return e.abrupt("continue",105);case 104:return e.abrupt("break",108);case 105:f++,e.next=28;break;case 108:return o.buffers.push(this.context.pes.payload),e.abrupt("continue",0);case 112:return 0===i.codecpar.codecType&&(M=V.Ky(this.context.pes.payload,0)).offset>3&&(o.buffers.push(this.context.pes.payload.subarray(0,M.offset)),this.context.pes.payload=this.context.pes.payload.subarray(M.offset)),this.parseSlice(o,t,r,i),o.buffers.length=0,o.buffers.push(this.context.pes.payload),o.dts=this.context.pes.dts,o.pts=this.context.pes.pts,o.pos=this.context.pes.pos,e.abrupt("return",0);case 120:e.next=0;break;case 122:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"readAVPacket",value:(i=(0,n.A)(v().mark((function e(t,r){var a,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.context.ioEnded){e.next=10;break}if(!this.context.slices.size){e.next=9;break}if(this.context.slices.forEach((function(e,r){e.buffers.length&&(i=t.streams.find((function(e){return e.privData.streamId===r})))&&(a=e)})),!a){e.next=9;break}return this.parseSlice(a,t,r,i),a.buffers.length=0,a.pts=a.dts=a.pos=-BigInt(1),e.abrupt("return",0);case 9:return e.abrupt("return",-1048576);case 10:return e.next=12,this.readAVPacket_(t,r);case 12:return e.abrupt("return",e.sent);case 15:if(e.prev=15,e.t0=e.catch(0),-1048576===t.ioReader.error){e.next=22;break}return m.z3("read packet error, ".concat(e.t0),Z,848),e.abrupt("return",k.LR);case 22:return this.context.ioEnded=!0,e.abrupt("return",this.readAVPacket(t,r));case 24:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(e,t){return i.apply(this,arguments)})},{key:"syncPSPacket",value:(a=(0,n.A)(v().mark((function e(t){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=B.Dh,e.prev=1,this.context.pes.pts=B.Dh;case 3:if(this.context.pes.pts!==B.Dh){e.next=10;break}return e.next=6,this.readPES(t);case 6:(0,A.A)(this.context.pes),r=this.context.pes.pos,e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r=B.Dh;case 15:if(r===B.Dh){e.next=18;break}return e.next=18,t.ioReader.seek(r);case 18:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(e){return a.apply(this,arguments)})},{key:"seek",value:(r=(0,n.A)(v().mark((function e(t,r,a,i){var n,s,o,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ioReader.getPos(),this.context.slices.forEach((function(e){e.buffers.length&&e.pos<n&&(n=e.pos),e.buffers.length=0,e.pts=e.dts=e.pos=-BigInt(1)})),t.streams.forEach((function(e){var t=e.privData;t.filter&&t.filter.reset()})),!(2&i)){e.next=19;break}return e.next=6,t.ioReader.fileSize();case 6:if(!((s=e.sent)<=BigInt(0))){e.next=9;break}return e.abrupt("return",BigInt(k.E$));case 9:return a<BigInt(0)?a=BigInt(0):a>s&&(a=s),e.next=12,t.ioReader.seek(a);case 12:if(4&i){e.next=15;break}return e.next=15,this.syncPSPacket(t);case 15:case 25:return this.context.ioEnded=!1,e.abrupt("return",n);case 19:if(!r||!r.sampleIndexes.length){e.next=27;break}if(!((o=M.El(r.sampleIndexes,(function(e){return e.pts>a?-1:1})))>0&&(0,S.k)(a-r.sampleIndexes[o-1].pts,r.timeBase,B.i0)<BigInt(1e4))){e.next=27;break}return m.Yz("seek in sampleIndexes, found index: ".concat(o,", pts: ").concat(r.sampleIndexes[o-1].pts,", pos: ").concat(r.sampleIndexes[o-1].pos),Z,933),e.next=25,t.ioReader.seek(r.sampleIndexes[o-1].pos);case 27:return m.Yz("not found any keyframe index, try to seek in bytes",Z,940),e.next=30,(0,P.A)(t,r,a,BigInt(0),this.readAVPacket.bind(this),this.syncPSPacket.bind(this));case 30:return(c=e.sent)>=0&&(this.context.ioEnded=!1),e.abrupt("return",c);case 33:case"end":return e.stop()}}),e,this)}))),function(e,t,a,i){return r.apply(this,arguments)})},{key:"getAnalyzeStreamsCount",value:function(){return 1}}]),t}(I.A)},75294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FrameHeader:()=>o,getFrameLength:()=>h,parse:()=>c});var a=r(81570),i=r(78716),n=r(134),s=r(89088),o=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"version",void 0),(0,n.A)(this,"layer",void 0),(0,n.A)(this,"protection",void 0),(0,n.A)(this,"bitrateIndex",void 0),(0,n.A)(this,"samplingFrequency",void 0),(0,n.A)(this,"padding",void 0),(0,n.A)(this,"private",void 0),(0,n.A)(this,"mode",void 0),(0,n.A)(this,"modeExtension",void 0),(0,n.A)(this,"copyright",void 0),(0,n.A)(this,"original",void 0),(0,n.A)(this,"emphasis",void 0)}));function c(e,t){e.version=t>>19&3,e.layer=t>>17&3,e.protection=t>>16&1,e.bitrateIndex=t>>12&15,e.samplingFrequency=t>>10&3,e.padding=t>>9&1,e.mode=t>>6&3,e.modeExtension=t>>4&3,e.copyright=t>>3&1,e.original=t>>2&1,e.emphasis=3&t}function h(e,t){var r=s.oz(e.version,e.layer,e.bitrateIndex);switch(e.layer){case 1:default:r=144e3*r/(t<<(3===e.version?0:1))>>>0,r+=e.padding;break;case 2:r=144e3*r/t>>>0,r+=e.padding;break;case 3:r=4*((r=12e3*r/t>>>0)+e.padding)}return r}},51660:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(77231),i=r(4624),n=r(9705),s="src/avformat/formats/mpegts/function/parsePES.ts";function o(e){var t=e.data,r=t[3],o=t[4]<<8|t[5],c=0,h=0,u=0;if(188!==r&&190!==r&&191!==r&&240!==r&&241!==r&&255!==r&&242!==r&&248!==r){for(var f=a.Dh,d=a.Dh;;){if(6+h>=t.length)return;if(255!==(u=t[6+h]))break;h++}if(64==(192&u)&&(u=t[6+(h+=2)]),32==(224&u))c+=5,f=f=BigInt(Math.floor(536870912*(14&t[6+h])+4194304*(255&t[7+h])+16384*(254&t[8+h])+128*(255&t[9+h])+(254&t[10+h])/2)),16&u?(d=BigInt(Math.floor(536870912*(14&t[11+h])+4194304*(255&t[12+h])+16384*(254&t[13+h])+128*(255&t[14+h])+(254&t[15+h])/2)),c+=5):d=f;else if(128==(192&u)){var l=(192&t[7+h])>>>6;c=3+t[8+h],2!==l&&3!==l||(f=BigInt(Math.floor(536870912*(14&t[9+h])+4194304*(255&t[10+h])+16384*(254&t[11+h])+128*(255&t[12+h])+(254&t[13+h])/2)),d=3===l?BigInt(Math.floor(536870912*(14&t[14+h])+4194304*(255&t[15+h])+16384*(254&t[16+h])+128*(255&t[17+h])+(254&t[18+h])/2)):f)}else{if(15!==u)return i.z3("invalid data",s,121),n.LR;c=1}e.dts=d,e.pts=f;var p=6+h+c,v=0;if(0!==o){if(o<h+c)return void i.z3("Malformed PES: PES_packet_length < 3 + PES_header_data_length",s,133);v=o-(h+c)}else v=t.byteLength-p;e.payload=t.subarray(p,p+v)}else if((188===r||191===r||240===r||241===r||255===r||242===r||248===r)&&6===e.streamId){var g;g=0!==o?o:t.byteLength-6,e.payload=t.subarray(6,6+g)}return 0}},10662:(e,t,r)=>{"use strict";r.d(t,{V:()=>a});var a=1e5},6403:(e,t,r)=>{"use strict";r.d(t,{Cd:()=>d,I4:()=>p,am:()=>u,kJ:()=>l,pi:()=>f,xf:()=>v}),r(77193),r(25767),r(31060);var a=r(81570),i=r(78716),n=r(134),s=r(80662),o=r.n(s),c=(r(88435),r(77231)),h=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"discontinuityIndicator",0),(0,n.A)(this,"randomAccessIndicator",0),(0,n.A)(this,"elementaryStreamPriorityIndicator",0),(0,n.A)(this,"pcrFlag",0),(0,n.A)(this,"opcrFlag",0),(0,n.A)(this,"splicingPointFlag",0),(0,n.A)(this,"transportPrivateDataFlag",0),(0,n.A)(this,"adaptationFieldExtensionFlag",0),(0,n.A)(this,"pcr",BigInt(0)),(0,n.A)(this,"opcr",BigInt(0)),(0,n.A)(this,"spliceCountDown",0),(0,n.A)(this,"transportPrivateData",null),(0,n.A)(this,"extension",null)})),u=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"pos",c.Dh),(0,n.A)(this,"payloadUnitStartIndicator",0),(0,n.A)(this,"transportPriority",0),(0,n.A)(this,"pid",c.N_),(0,n.A)(this,"adaptationFieldControl",0),(0,n.A)(this,"continuityCounter",0),(0,n.A)(this,"transportScramblingControl",0),(0,n.A)(this,"adaptationFieldInfo",new h),(0,n.A)(this,"payload",null)})),f=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"slices",[]),(0,n.A)(this,"totalLength",0),(0,n.A)(this,"expectedLength",c.N_),(0,n.A)(this,"randomAccessIndicator",0),(0,n.A)(this,"pid",c.N_),(0,n.A)(this,"streamType",0),(0,n.A)(this,"pos",c.Dh)})),d=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"versionNumber",0),(0,n.A)(this,"networkPid",c.N_),(0,n.A)(this,"program2PmtPid",new(o()))})),l=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"tag",void 0),(0,n.A)(this,"buffer",void 0)})),p=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"versionNumber",0),(0,n.A)(this,"programNumber",0),(0,n.A)(this,"pcrPid",0),(0,n.A)(this,"pid2StreamType",new(o())),(0,n.A)(this,"pid2ESDescriptor",new(o()))})),v=(0,a.A)((function e(){(0,i.A)(this,e),(0,n.A)(this,"pid",c.N_),(0,n.A)(this,"streamType",0),(0,n.A)(this,"streamId",c.N_),(0,n.A)(this,"dts",c.Dh),(0,n.A)(this,"pts",c.Dh),(0,n.A)(this,"pos",c.Dh),(0,n.A)(this,"payload",null),(0,n.A)(this,"data",null),(0,n.A)(this,"randomAccessIndicator",0)}))},2187:(e,t,r)=>{"use strict";r.d(t,{d:()=>s});var a=r(72739),i=r(44328),n=r(77231);function s(e,t,r){var s=BigInt(0);return a.__(e,(function(e){s+=e.codecpar.bitrate*(0,i.k)(t,r,n.i0)/BigInt(8e3)})),s}},52071:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var a=r(25182),i=r(36443),n=r.n(i),s=r(63939),o=r(9599),c=r(29170),h=r(77231),u=r(44328),f=r(2187),d=r(71517),l=r(9705),p=r(4624),v="src/avformat/function/seekInBytes.ts";function g(e,t,r,a,i,n){return b.apply(this,arguments)}function b(){return(b=(0,a.A)(n().mark((function e(t,r,a,i,g,b){var y,U,x,m,k,A,w,I,_,B,P,S,M,R;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y=t.ioReader.getPos(),e.next=3,t.ioReader.fileSize();case 3:if(U=e.sent,x=h.Dh,m=a,r.startTime!==h.Dh?m-=r.startTime:m-=r.firstDTS,!((k=(0,u.k)(a,r.timeBase,h.i0))<BigInt(1e4))){e.next=13;break}return p.Yz("seek pts is earlier then 10s, seek to first packet pos(".concat(i,") directly"),v,63),e.next=12,t.ioReader.seek(i);case 12:return e.abrupt("return",y);case 13:if(A=(0,f.d)(t.streams,m,r.timeBase),w=U-(0,f.d)(t.streams,BigInt(1e4),h.i0),I=(0,f.d)(t.streams,BigInt(1e4),h.i0),A>w&&(A=w),!(A<i)){e.next=21;break}return e.next=20,t.ioReader.seek(i);case 20:return e.abrupt("return",y);case 21:_=(0,d._5)(),B=U,P=BigInt(0);case 24:if(!(B-P<I)){e.next=28;break}return x=P,e.abrupt("break",52);case 28:return e.next=30,t.ioReader.seek(A);case 30:return e.next=32,b(t);case 32:return S=t.ioReader.getPos(),e.next=35,g(t,_);case 35:if(!(e.sent>=0)){e.next=48;break}if(M=(0,u.k)(s.f[17](_+8),(0,c.A)(_+72,o.P),h.i0),R=M-k,p.Yz("try to seek to pos: ".concat(A,", got packet pts: ").concat(s.f[17](_+8),"(").concat(M,"ms), diff: ").concat(R,"ms"),v,98),!(R<=BigInt(0)&&-R<BigInt(1e4))){e.next=45;break}return x=S,e.abrupt("break",52);case 45:A=R>BigInt(0)?P+(B=A)>>BigInt(1):(P=A)+B>>BigInt(1);case 46:e.next=50;break;case 48:return x=h.Dh,e.abrupt("break",52);case 50:e.next=24;break;case 52:if((0,d.Qe)(_),x===h.Dh){e.next=62;break}return p.Yz("finally seek to pos ".concat(x),v,126),e.next=57,t.ioReader.seek(x);case 57:return e.next=59,b(t);case 59:return e.abrupt("return",y);case 62:return e.next=64,t.ioReader.seek(y);case 64:return e.abrupt("return",BigInt(l.E$));case 65:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},23991:(e,t,r)=>{"use strict";function a(e){for(var t=0;t<32&&0===e.readU1();)t++;return e.readU(t)+((1<<t)-1)}function i(e){var t=a(e);return 1&t?(t+1)/2:-t/2}r.d(t,{$x:()=>i,xb:()=>a})},39381:(e,t,r)=>{"use strict";r.d(t,{E3:()=>n,Sg:()=>h,Y0:()=>c,ht:()=>o,r8:()=>i,yd:()=>s});var a=r(63939);function i(e){return a.f[2](e)}function n(e){return i(e+1)<<8|i(e)}function s(e){return i(e)<<8|i(e+1)}function o(e){return i(e)<<16|i(e+1)<<8|i(e+2)}function c(e){return n(e+2)<<16|n(e)}function h(e){return s(e)<<16|s(e+2)}},60264:(e,t,r)=>{"use strict";function a(e){return e.length>4&&0===e[0]&&0===e[1]&&(1===e[2]||0===e[2]&&1===e[3])}function i(e,t){for(var r=0,a=t;a<e.length;a++)switch(e[a]){case 0:r++;break;case 1:if(r>=2)return{offset:a-Math.min(r,3),startCode:Math.min(r+1,4)};r=0;break;default:r=0}return{offset:-1,startCode:0}}function n(e){for(var t=[],r=i(e,0),a={offset:-1,startCode:0};(a=i(e,r.offset+r.startCode)).offset>-1;)t.push(e.subarray(r.offset+r.startCode,a.offset,!0)),r=a;return t.push(e.subarray(r.offset+r.startCode,void 0,!0)),t}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;r||(r=e.length);for(var a=new Uint8Array(e.length),i=0,n=0,s=0;s<e.length;s++){if(s>=t&&s<r)if(0===e[s])i++;else if(3===e[s]&&2===i&&s+1<e.length&&e[s+1]<=3){if(++s===e.length)break;i=0===e[s]?1:0}else i=0;a[n++]=e[s]}return a.slice(0,n)}r.d(t,{BN:()=>s,Bs:()=>a,Ky:()=>i,py:()=>n})},37246:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(78716),i=r(81570),n=r(134),s=r(4624),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,a.A)(this,e),(0,n.A)(this,"buffer",void 0),(0,n.A)(this,"pointer",void 0),(0,n.A)(this,"bitsLeft",void 0),(0,n.A)(this,"size",void 0),(0,n.A)(this,"endPointer",void 0),(0,n.A)(this,"pos",void 0),(0,n.A)(this,"error",void 0),(0,n.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.pos=BigInt(0),this.size=t,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}return(0,i.A)(e,[{key:"peekU1",value:function(){(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush();var e=this.pointer,t=this.bitsLeft;return 0===t&&(e++,t=8),this.buffer[e]>>t-1&1}},{key:"readU1",value:function(){var e;return(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush(),this.bitsLeft--,e=this.buffer[this.pointer]>>this.bitsLeft&1,0===this.bitsLeft&&(this.pointer++,this.bitsLeft=8,this.pos++),e}},{key:"readU",value:function(e){for(var t=0,r=0;r<e;r++)t|=this.readU1()<<e-r-1;return t}},{key:"remainingLength",value:function(){return this.endPointer-this.pointer}},{key:"getBitLeft",value:function(){return this.bitsLeft}},{key:"getPointer",value:function(){return this.pointer}},{key:"setPointer",value:function(e){this.pointer=e}},{key:"getPos",value:function(){return this.pos}},{key:"skip",value:function(e){var t=(e-e%8)/8;this.pointer+=t,this.pos+=BigInt(t);var r=e%8;this.bitsLeft<=r?(this.pointer++,this.pos++,this.bitsLeft=8-(r-this.bitsLeft)):this.bitsLeft-=r}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(0===this.bitsLeft&&(this.pointer++,this.pos++),!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);var e=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(e<0)throw this.error=e,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+e,this.pointer=0}else{var t=this.onFlush(this.buffer);if(this.endPointer=t,this.pointer=0,this.bitsLeft=8,t<0)throw this.error=t,Error("IOReader error, flush failed")}}},{key:"getBuffer",value:function(){return this.buffer}},{key:"appendBuffer",value:function(e){if(this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else{var t=Math.min(this.size-this.endPointer,e.length);this.buffer.set(e.subarray(0,t),this.endPointer),this.endPointer+=t,s.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src/common/io/BitReader.ts",241)}}},{key:"reset",value:function(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0,this.pos=BigInt(0)}},{key:"skipPadding",value:function(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++,this.pos++)}}]),e}()},83314:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(78716),i=r(81570),n=r(134),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576;(0,a.A)(this,e),(0,n.A)(this,"buffer",void 0),(0,n.A)(this,"pointer",void 0),(0,n.A)(this,"pos",void 0),(0,n.A)(this,"bitPointer",void 0),(0,n.A)(this,"size",void 0),(0,n.A)(this,"error",void 0),(0,n.A)(this,"onFlush",void 0),this.pointer=0,this.bitPointer=0,this.size=t,this.error=0,this.pos=BigInt(0),this.buffer=new Uint8Array(this.size)}return(0,i.A)(e,[{key:"writeU1",value:function(e){(this.remainingLength()<1||1===this.remainingLength()&&this.bitPointer>=8)&&this.flush(),1&e?this.buffer[this.pointer]|=1<<7-this.bitPointer:this.buffer[this.pointer]&=~(1<<7-this.bitPointer),this.bitPointer++,8===this.bitPointer&&(this.pointer++,this.pos++,this.bitPointer=0)}},{key:"writeU",value:function(e,t){for(var r=0;r<e;r++)this.writeU1(t>>e-r-1&1)}},{key:"remainingLength",value:function(){return this.size-this.pointer}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("BSWriter error, flush failed because of no flush callback");if(this.pointer)if(this.bitPointer&&this.pointer>1){var e=this.onFlush(this.buffer.subarray(0,this.pointer-1));if(0!==e)throw this.error=e,Error("BSWriter error, flush failed");this.buffer[0]=this.buffer[this.pointer]}else if(0===this.bitPointer){var t=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==t)throw this.error=t,Error("BSWriter error, flush failed")}this.pointer=0}},{key:"padding",value:function(){for(;0!==this.bitPointer;)this.writeU1(0)}},{key:"reset",value:function(){this.pointer=0,this.bitPointer=0,this.error=0,this.pos=BigInt(0)}},{key:"getBuffer",value:function(){return this.buffer}},{key:"getPointer",value:function(){return this.pointer}},{key:"getPos",value:function(){return this.pos}}]),e}()},729:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(78716),i=r(81570),n=r(134),s=r(4624),o=r(50011),c=function(){function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,a.A)(this,e),(0,n.A)(this,"data",void 0),(0,n.A)(this,"buffer",void 0),(0,n.A)(this,"byteStart",void 0),(0,n.A)(this,"pos",void 0),(0,n.A)(this,"size",void 0),(0,n.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!r}return(0,i.A)(e,[{key:"writeUint8",value:function(e){this.data.setUint8(this.pos+++this.byteStart,e)}},{key:"writeUint16",value:function(e){this.data.setUint16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeUint24",value:function(e){var t=3840&e,r=240&e,a=15&e;this.littleEndian?(this.writeUint8(a),this.writeUint8(r),this.writeUint8(t)):(this.writeUint8(t),this.writeUint8(r),this.writeUint8(a))}},{key:"writeUint32",value:function(e){this.data.setUint32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeUint64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeUint32(Number(t)),this.writeUint32(Number(r))):(this.writeUint32(Number(r)),this.writeUint32(Number(t)))}},{key:"writeInt8",value:function(e){this.data.setInt8(this.pos+++this.byteStart,e)}},{key:"writeInt16",value:function(e){this.data.setInt16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}},{key:"writeInt24",value:function(e){this.writeUint24(e<0?e+16777216:e)}},{key:"writeInt32",value:function(e){this.data.setInt32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeInt64",value:function(e){var t=e&BigInt(4294967295),r=(e&BigInt(4294967295)<<BigInt(32))>>BigInt(32);this.littleEndian?(this.writeInt32(Number(t)),this.writeInt32(Number(r))):(this.writeInt32(Number(r)),this.writeInt32(Number(t)))}},{key:"writeFloat",value:function(e){this.data.setFloat32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}},{key:"writeDouble",value:function(e){this.data.setFloat64(this.pos+this.byteStart,e,this.littleEndian),this.pos+=8}},{key:"getPos",value:function(){return this.pos}},{key:"seek",value:function(e){e>this.size&&(e=this.size),this.pos=Math.max(0,e)}},{key:"skip",value:function(e){this.seek(this.pos+e)}},{key:"back",value:function(e){this.seek(this.pos-e)}},{key:"remainingSize",value:function(){return this.size-this.pos}},{key:"writeBuffer",value:function(e){var t=e.length;this.remainingSize()<t&&(t=this.remainingSize(),s.R8("the remaining buffer size is smaller then the wrote buffer, hope set ".concat(e.length,", but set ").concat(t),"src/common/io/BufferWriter.ts",218)),this.buffer.set(e,this.pos),this.pos+=e.length}},{key:"writeString",value:function(e){var t=o.encode(e);return this.writeBuffer(t),t.length}},{key:"getWroteBuffer",value:function(){return this.buffer.subarray(0,this.pos)}},{key:"resetBuffer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}}]),e}()},80345:(e,t,r)=>{r(28351),e.exports=r(46438).Reflect.get},28351:(e,t,r)=>{var a=r(81033),i=r(66123),n=r(75509),s=r(88535),o=r(24401),c=r(80812);s(s.S,"Reflect",{get:function e(t,r){var s,h,u=arguments.length<3?t:arguments[2];return c(t)===u?t[r]:(s=a.f(t,r))?n(s,"value")?s.value:void 0!==s.get?s.get.call(u):void 0:o(h=i(t))?e(h,r,u):void 0}})},60394:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(80345),i=r(3706),n=r(41473);function s(){return s="undefined"!=typeof Reflect&&a?a.bind():function(e,t,r){var a=(0,n.A)(e,t);if(a){var s=i(a,t);return s.get?s.get.call(arguments.length<3?e:r):s.value}},s.apply(this,arguments)}},41473:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(25767);function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,a.A)(e)););return e}}}]);