(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[473],{85947:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(78716),r=i(81570),s=i(134),a=function(){function t(){(0,n.A)(this,t),(0,s.A)(this,"type",-1),(0,s.A)(this,"onStreamAdd",void 0)}return(0,r.A)(t,[{key:"destroy",value:function(t){}}]),t}()},69979:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>O});var n=i(88435),r=i.n(n),s=i(25182),a=i(78716),h=i(81570),o=i(77193),u=i(25767),c=i(43070),l=i(31060),f=i(134),p=i(36443),d=i.n(p),g=i(63939),v=i(50932),m=i(69584),k=i(4624),b=i(94929),y=i(797),A=i(9705),x=i(92647),w=i(85947),I=i(14686),B=i(37837),S=i(71517),P=i(82348),U=i(35336),L=i(77231),R=i(52071),z=i(44328),C=i(72739),E=i(79630),M=i(43607);function T(t,e,i){return e=(0,u.A)(e),(0,o.A)(t,F()?r()(e,i||[],(0,u.A)(t).constructor):e.apply(t,i))}function F(){try{var t=!Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){})))}catch(t){}return(F=function(){return!!t})()}var N="src/avformat/formats/IOggsFormat.ts",O=function(t){function e(){var t;return(0,a.A)(this,e),t=T(this,e),(0,f.A)((0,c.A)(t),"type",4),(0,f.A)((0,c.A)(t),"headerPagesPayload",void 0),(0,f.A)((0,c.A)(t),"page",void 0),(0,f.A)((0,c.A)(t),"curSegIndex",void 0),(0,f.A)((0,c.A)(t),"curSegStart",void 0),(0,f.A)((0,c.A)(t),"segCount",void 0),(0,f.A)((0,c.A)(t),"segIndex",void 0),(0,f.A)((0,c.A)(t),"currentPts",void 0),(0,f.A)((0,c.A)(t),"firstPos",void 0),(0,f.A)((0,c.A)(t),"firstGranulePosition",void 0),(0,f.A)((0,c.A)(t),"paddingPayload",void 0),t.page=new m.B,t.headerPagesPayload=[],t}var i,n,r,o,u,p,w;return(0,l.A)(e,t),(0,h.A)(e,[{key:"init",value:function(t){t.ioReader&&t.ioReader.setEndian(!1),t.ioReader&&t.ioReader.setEndian(!1),this.curSegIndex=-1,this.curSegStart=0,this.currentPts=BigInt(0),this.segCount=0,this.segIndex=0,this.firstGranulePosition=BigInt(0)}},{key:"estimateTotalBlock",value:(w=(0,s.A)(d().mark((function t(e){var i,n,r,s;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=BigInt(0),n=e.ioReader.getPos(),r=this.currentPts,t.next=5,e.ioReader.fileSize();case 5:return s=t.sent,t.next=8,e.ioReader.seek(M.T9(s-BigInt(195072),BigInt(0)));case 8:return t.next=10,this.syncPage(e);case 10:return t.prev=11,this.page.reset(),t.next=15,this.page.read(e.ioReader);case 15:i=this.page.granulePosition,t.next=21;break;case 18:return t.prev=18,t.t0=t.catch(11),t.abrupt("break",23);case 21:t.next=10;break;case 23:return t.next=25,e.ioReader.seek(n);case 25:return this.currentPts=r,t.abrupt("return",i);case 27:case"end":return t.stop()}}),t,this,[[11,18]])}))),function(t){return w.apply(this,arguments)})},{key:"getNextSegment",value:(p=(0,s.A)(d().mark((function t(e){var i,n,r,s;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.curSegIndex<0)){t.next=11;break}return this.page.granulePosition>BigInt(0)&&(this.currentPts=this.page.granulePosition),this.page.reset(),t.next=5,this.page.read(e.ioReader);case 5:for(this.curSegIndex=0,this.curSegStart=0,this.segIndex=-1,this.segCount=0,i=0;i<this.page.segmentTable.length;i++)255!==this.page.segmentTable[i]&&this.segCount++;this.segCount||(this.segCount=1);case 11:n=0;case 12:if(!(this.curSegIndex<this.page.segmentTable.length)){t.next=19;break}if(r=this.page.segmentTable[this.curSegIndex++],n+=r,255===r){t.next=17;break}return t.abrupt("break",19);case 17:t.next=12;break;case 19:return s=this.curSegStart,this.curSegStart+=n,this.segIndex++,this.curSegIndex===this.page.segmentTable.length&&(this.curSegIndex=-1),t.abrupt("return",this.page.payload.subarray(s,s+n));case 24:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"addComment",value:function(t,e){t.vendorString&&(e.metadata.vendor=t.vendorString),C.__(t.comments.list,(function(t){var i=t.split("=");if(i.length>1){var n=i.shift(),r=i.join("=");e.metadata[n]=r}}))}},{key:"createStream",value:(u=(0,s.A)(d().mark((function t(e,i){var n,r,s,a,h,o,u,c,l,f,p,g,v,k,x,w,S,L,R,z,C;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=new P.A(i.length,!1)).appendBuffer(i),"OpusHead"!==(r=n.peekString(8))){t.next=28;break}return(s=new b.q).read(n),a=new b.o,t.next=9,this.getNextSegment(e);case 9:return i=t.sent,(n=new P.A(i.length,!1)).appendBuffer(i),a.read(n),this.headerPagesPayload=[s,a],(h=e.createStream()).codecpar.codecType=1,h.codecpar.codecId=86076,h.codecpar.sampleRate=s.sampleRate,h.codecpar.chLayout.nbChannels=s.channels,h.timeBase.den=h.codecpar.sampleRate,h.timeBase.num=1,h.privData={serialNumber:this.page.serialNumber},this.addComment(a,h),t.next=25,this.estimateTotalBlock(e);case 25:h.duration=t.sent,t.next=138;break;case 28:if("vorbis"!==r.slice(1,7)){t.next=66;break}return o=[i],(u=new y.m).read(n),c=new y.G,t.next=35,this.getNextSegment(e);case 35:return i=t.sent,(n=new P.A(i.length,!1)).appendBuffer(i),c.read(n),o.push(i),this.headerPagesPayload=[u,c],(l=e.createStream()).codecpar.codecType=1,l.codecpar.codecId=86021,l.codecpar.sampleRate=u.sampleRate,l.codecpar.chLayout.nbChannels=u.channels,l.timeBase.den=l.codecpar.sampleRate,l.timeBase.num=1,l.privData={serialNumber:this.page.serialNumber},this.addComment(c,l),t.t0=o,t.next=53,this.getNextSegment(e);case 53:return t.t1=t.sent,t.t0.push.call(t.t0,t.t1),f=o.reduce((function(t,e){return t+2+e.length}),0),p=(0,B.sY)(f),g=new U.A(f,!0,new E.A(p,f)),o.forEach((function(t){g.writeUint16(t.length),g.writeBuffer(t)})),l.codecpar.extradata=p,l.codecpar.extradataSize=f,t.next=63,this.estimateTotalBlock(e);case 63:l.duration=t.sent,t.next=138;break;case 66:if("FLAC"!==r.slice(1,5)){t.next=108;break}if(n.setEndian(!0),n.skip(1),n.skip(4),n.skip(1),n.skip(1),n.readUint16(),n.skip(4),v=n.readUint8(),k=n.readUint24(),0!==v){t.next=105;break}return(x=e.createStream()).codecpar.codecType=1,x.codecpar.codecId=86028,w=(0,B.sY)(k),n.peekBuffer(k,(0,I.s3)(w,k)),n.skip(10),S=n.readUint24(),x.codecpar.sampleRate=S>>4,x.codecpar.chLayout.nbChannels=1+((15&S)>>>1),x.timeBase.den=x.codecpar.sampleRate,x.timeBase.num=1,x.privData={serialNumber:this.page.serialNumber},x.codecpar.extradata=w,x.codecpar.extradataSize=k,L=new m.h,t.next=94,this.getNextSegment(e);case 94:return i=t.sent,(n=new P.A(i.length-4,!1)).appendBuffer(i.subarray(4)),L.read(n),t.next=100,this.estimateTotalBlock(e);case 100:x.duration=t.sent,this.addComment(L,x),this.headerPagesPayload=[L],t.next=106;break;case 105:return t.abrupt("return",A.LR);case 106:t.next=138;break;case 108:if("Speex"!==r.slice(0,5)){t.next=137;break}return(R=e.createStream()).codecpar.codecType=1,R.codecpar.codecId=86051,z=(0,B.sY)(i.length),(0,I.lW)(z,i.length,i),R.codecpar.extradata=z,R.codecpar.extradataSize=i.length,n.seek(BigInt(36)),R.codecpar.sampleRate=n.readUint32(),n.seek(BigInt(48)),R.codecpar.chLayout.nbChannels=n.readUint32(),R.timeBase.den=R.codecpar.sampleRate,R.timeBase.num=1,R.privData={serialNumber:this.page.serialNumber},C=new m.h,t.next=126,this.getNextSegment(e);case 126:return i=t.sent,(n=new P.A(i.length,!1)).appendBuffer(i),C.read(n),t.next=132,this.estimateTotalBlock(e);case 132:R.duration=t.sent,this.addComment(C,R),this.headerPagesPayload=[C],t.next=138;break;case 137:return t.abrupt("return",0);case 138:return t.abrupt("return",1);case 139:case"end":return t.stop()}}),t,this)}))),function(t,e){return u.apply(this,arguments)})},{key:"readHeader",value:(o=(0,s.A)(d().mark((function t(e){var i,n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ioReader.peekString(4);case 3:if("OggS"===t.sent){t.next=7;break}return k.z3("the file format is not oggs",N,382),t.abrupt("return",A.LR);case 7:if(t.t0=this.paddingPayload,t.t0){t.next=13;break}return t.next=12,this.getNextSegment(e);case 12:t.t0=t.sent;case 13:return i=t.t0,this.paddingPayload&&(this.paddingPayload=null),t.next=17,this.createStream(e,i);case 17:if(!((n=t.sent)<0)){t.next=20;break}return t.abrupt("return",n);case 20:if(n){t.next=23;break}return this.paddingPayload=i,t.abrupt("break",25);case 23:t.next=7;break;case 25:return this.firstPos=this.paddingPayload?this.page.pos:e.ioReader.getPos(),t.abrupt("return",0);case 29:return t.prev=29,t.t1=t.catch(0),k.z3(t.t1.message,N,404),t.abrupt("return",e.ioReader.error);case 33:case"end":return t.stop()}}),t,this,[[0,29]])}))),function(t){return o.apply(this,arguments)})},{key:"readAVPacket",value:(r=(0,s.A)(d().mark((function t(e,i){var n,r,s,a,h,o,u,c=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v.M[17](i+56,e.ioReader.getPos()),t.prev=1,t.t0=this.paddingPayload,t.t0){t.next=7;break}return t.next=6,this.getNextSegment(e);case 6:t.t0=t.sent;case 7:if(n=t.t0,this.paddingPayload&&(this.paddingPayload=null),r=this.currentPts+(this.page.granulePosition-this.currentPts)/BigInt(Math.floor(this.segCount))*BigInt(Math.floor(this.segIndex)),v.M[17](i+16,r),v.M[17](i+8,r),this.firstGranulePosition||(this.firstGranulePosition=this.page.granulePosition),!(s=e.streams.find((function(t){return t.privData&&t.privData.serialNumber===c.page.serialNumber})))){t.next=20;break}v.M[15](i+32,s.index),v.M[15](i+76,s.timeBase.den),v.M[15](i+72,s.timeBase.num),1===s.codecpar.codecType&&v.M[15](i+36,1|g.f[15](i+36)),t.next=23;break;case 20:return t.next=22,this.createStream(e,n);case 22:return t.abrupt("return",this.readAVPacket(e,i));case 23:a=[n];case 24:if(!(this.curSegIndex<0)){t.next=45;break}return t.prev=25,t.next=28,e.ioReader.peekBuffer(6);case 28:if(!(1&t.sent[5])){t.next=37;break}return t.t1=a,t.next=33,this.getNextSegment(e);case 33:t.t2=t.sent,t.t1.push.call(t.t1,t.t2),t.next=38;break;case 37:return t.abrupt("break",45);case 38:t.next=43;break;case 40:return t.prev=40,t.t3=t.catch(25),t.abrupt("break",45);case 43:t.next=24;break;case 45:return h=(0,x.A)(Uint8Array,a),o=h.length,u=(0,B.sY)(o),(0,I.lW)(u,o,h),(0,S.NX)(i,u,o),t.abrupt("return",0);case 53:if(t.prev=53,t.t4=t.catch(1),-1048576===e.ioReader.error){t.next=58;break}return k.z3("read packet error, ".concat(t.t4),N,473),t.abrupt("return",A.LR);case 58:return t.abrupt("return",e.ioReader.error);case 59:case"end":return t.stop()}}),t,this,[[1,53],[25,40]])}))),function(t,e){return r.apply(this,arguments)})},{key:"syncPage",value:(n=(0,s.A)(d().mark((function t(e){var i,n,r,s;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=L.Dh,n=3,r=BigInt(0);case 3:return t.prev=4,t.next=7,e.ioReader.peekString(4);case 7:if("OggS"!==t.sent){t.next=33;break}return i=e.ioReader.getPos(),this.page.reset(),t.next=13,this.page.read(e.ioReader);case 13:r=this.page.granulePosition,s=0;case 15:if(s!==n){t.next=18;break}return t.abrupt("break",31);case 18:return t.next=20,e.ioReader.peekString(4);case 20:if("OggS"!==t.sent){t.next=28;break}return s++,this.page.reset(),t.next=26,this.page.read(e.ioReader);case 26:t.next=29;break;case 28:return t.abrupt("break",31);case 29:t.next=15;break;case 31:if(s!==n){t.next=33;break}return t.abrupt("break",42);case 33:return t.next=35,e.ioReader.skip(1);case 35:t.next=40;break;case 37:return t.prev=37,t.t0=t.catch(4),t.abrupt("break",42);case 40:t.next=3;break;case 42:if(i===L.Dh){t.next=59;break}return t.next=45,e.ioReader.seek(i);case 45:return t.next=48,e.ioReader.peekBuffer(6);case 48:if(1&t.sent[5]){t.next=51;break}return t.abrupt("break",57);case 51:return this.page.reset(),t.next=54,this.page.read(e.ioReader);case 54:r=this.page.granulePosition,t.next=45;break;case 57:this.currentPts=r-this.firstGranulePosition,this.curSegIndex=-1;case 59:case"end":return t.stop()}}),t,this,[[4,37]])}))),function(t){return n.apply(this,arguments)})},{key:"seek",value:(i=(0,s.A)(d().mark((function t(e,i,n,r){var s,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.ioReader.getPos(),!(2&r)){t.next=16;break}return t.next=4,e.ioReader.fileSize();case 4:if(!((a=t.sent)<=BigInt(0))){t.next=7;break}return t.abrupt("return",BigInt(A.E$));case 7:return n<BigInt(0)?n=BigInt(0):n>a&&(n=a),t.next=10,e.ioReader.seek(n);case 10:if(4&r){t.next=13;break}return t.next=13,this.syncPage(e);case 13:return t.abrupt("return",s);case 16:if(!((0,z.k)(n,i.timeBase,L.i0)<BigInt(1e4))){t.next=23;break}return k.Yz("seek pts is earlier then 10s, seek to first packet pos(".concat(this.firstPos,") directly"),N,566),t.next=21,e.ioReader.seek(this.firstPos);case 21:return this.currentPts=BigInt(0),t.abrupt("return",s);case 23:return t.abrupt("return",(0,R.A)(e,i,n,this.firstPos,this.readAVPacket.bind(this),this.syncPage.bind(this)));case 24:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return i.apply(this,arguments)})},{key:"getAnalyzeStreamsCount",value:function(){return 1}}]),e}(w.A)},69584:(t,e,i)=>{"use strict";i.d(e,{B:()=>f,h:()=>p});var n=i(25182),r=i(78716),s=i(81570),a=i(134),h=i(36443),o=i.n(h),u=i(77231),c=i(50011),l=function(){function t(){(0,r.A)(this,t),(0,a.A)(this,"list",void 0),this.list=[]}return(0,s.A)(t,[{key:"read",value:function(t,e){for(var i=0;i<e;i++){var n=t.readUint32();this.list.push(t.readString(n))}}},{key:"write",value:function(t){for(var e=0;e<this.list.length;e++){var i=c.encode(this.list[e]);t.writeUint32(i.length),t.writeBuffer(i)}}},{key:"addComment",value:function(t){this.list.push(t)}}]),t}(),f=function(){function t(){(0,r.A)(this,t),(0,a.A)(this,"capturePattern",void 0),(0,a.A)(this,"streamStructureVersion",void 0),(0,a.A)(this,"headerTypeFlag",void 0),(0,a.A)(this,"granulePosition",void 0),(0,a.A)(this,"serialNumber",void 0),(0,a.A)(this,"pageSequenceNumber",void 0),(0,a.A)(this,"crcCheckSum",void 0),(0,a.A)(this,"numberPageSegments",void 0),(0,a.A)(this,"segmentTable",void 0),(0,a.A)(this,"payload",void 0),(0,a.A)(this,"pos",void 0),this.reset()}var e,i;return(0,s.A)(t,[{key:"reset",value:function(){this.capturePattern="OggS",this.streamStructureVersion=0,this.headerTypeFlag=0,this.granulePosition=u.Dh,this.serialNumber=0,this.pageSequenceNumber=0,this.crcCheckSum=0,this.numberPageSegments=0,this.segmentTable=[],this.pos=BigInt(0)}},{key:"read",value:(i=(0,n.A)(o().mark((function t(e){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.pos=e.getPos(),t.next=3,this.readPageHeader(e);case 3:if(!(i=this.segmentTable.reduce((function(t,e){return t+e}),0))){t.next=8;break}return t.next=7,e.readBuffer(i);case 7:this.payload=t.sent;case 8:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"readPageHeader",value:(e=(0,n.A)(o().mark((function t(e){var i,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.readString(4);case 2:return this.capturePattern=t.sent,t.next=5,e.readUint8();case 5:return this.streamStructureVersion=t.sent,t.next=8,e.readUint8();case 8:return this.headerTypeFlag=t.sent,t.next=11,e.readUint64();case 11:return this.granulePosition=t.sent,t.next=14,e.readUint32();case 14:return this.serialNumber=t.sent,t.next=17,e.readUint32();case 17:return this.pageSequenceNumber=t.sent,t.next=20,e.readUint32();case 20:return this.crcCheckSum=t.sent,t.next=23,e.readUint8();case 23:if(this.numberPageSegments=t.sent,!this.numberPageSegments){t.next=34;break}i=0;case 26:if(!(i<this.numberPageSegments)){t.next=34;break}return t.next=29,e.readUint8();case 29:n=t.sent,this.segmentTable.push(n);case 31:i++,t.next=26;break;case 34:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"write",value:function(t){if(this.pos=t.getPos(),t.writeString(this.capturePattern),t.writeUint8(this.streamStructureVersion),t.writeUint8(this.headerTypeFlag),t.writeUint64(this.granulePosition),t.writeUint32(this.serialNumber),t.writeUint32(this.pageSequenceNumber),t.writeUint32(this.crcCheckSum),this.payload){this.numberPageSegments=Math.floor(this.payload.length/255)+1;var e=this.payload.length%255;t.writeUint8(this.numberPageSegments);for(var i=0;i<this.numberPageSegments-1;i++)t.writeUint8(255);t.writeUint8(e),t.writeBuffer(this.payload)}else t.writeUint8(0)}}]),t}(),p=function(){function t(){(0,r.A)(this,t),(0,a.A)(this,"streamIndex",void 0),(0,a.A)(this,"signature",void 0),(0,a.A)(this,"vendorStringLength",void 0),(0,a.A)(this,"vendorString",void 0),(0,a.A)(this,"userCommentListLength",void 0),(0,a.A)(this,"comments",void 0),this.vendorString="libmedia.0.0.1",this.vendorStringLength=this.vendorString.length,this.userCommentListLength=0,this.comments=new l}return(0,s.A)(t,[{key:"read",value:function(t){this.vendorStringLength=t.readUint32(),this.vendorString=t.readString(this.vendorStringLength),this.userCommentListLength=t.readUint32(),this.userCommentListLength&&this.comments.read(t,this.userCommentListLength)}},{key:"write",value:function(t){var e=c.encode(this.vendorString);t.writeUint32(e.length),t.writeBuffer(e),t.writeUint32(this.comments.list.length),this.comments.write(t)}},{key:"addComment",value:function(t){this.comments.addComment(t)}},{key:"setCodec",value:function(t){}}]),t}()},94929:(t,e,i)=>{"use strict";i.d(e,{o:()=>m,q:()=>v});var n=i(88435),r=i.n(n),s=i(77193),a=i(60394),h=i(25767),o=i(31060),u=i(78716),c=i(81570),l=i(134),f=i(69584);function p(t,e,i){return e=(0,h.A)(e),(0,s.A)(t,d()?r()(e,i||[],(0,h.A)(t).constructor):e.apply(t,i))}function d(){try{var t=!Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){})))}catch(t){}return(d=function(){return!!t})()}var g=function(){function t(){(0,u.A)(this,t),(0,l.A)(this,"streamCount",void 0),(0,l.A)(this,"coupledStreamCount",void 0),(0,l.A)(this,"mapping",void 0),this.streamCount=1,this.coupledStreamCount=0,this.mapping=new Uint8Array(1)}return(0,c.A)(t,[{key:"read",value:function(t){this.streamCount=t.readUint8(),this.coupledStreamCount=t.readUint8(),this.mapping=t.readBuffer(this.streamCount+this.coupledStreamCount)}},{key:"write",value:function(t){t.writeUint8(this.streamCount),t.writeUint8(this.coupledStreamCount),t.writeBuffer(this.mapping)}}]),t}(),v=function(){function t(){(0,u.A)(this,t),(0,l.A)(this,"streamIndex",void 0),(0,l.A)(this,"signature",void 0),(0,l.A)(this,"version",void 0),(0,l.A)(this,"channels",void 0),(0,l.A)(this,"preSkip",void 0),(0,l.A)(this,"sampleRate",void 0),(0,l.A)(this,"outputGain",void 0),(0,l.A)(this,"channelMappingFamily",void 0),(0,l.A)(this,"channelMappingTable",void 0),this.signature="OpusHead",this.version=1,this.channels=1,this.preSkip=0,this.sampleRate=48e3,this.outputGain=0,this.channelMappingFamily=0,this.channelMappingTable=new g}return(0,c.A)(t,[{key:"read",value:function(t){this.signature=t.readString(8),this.version=t.readUint8(),this.channels=t.readUint8(),this.preSkip=t.readUint16(),this.sampleRate=t.readUint32(),this.outputGain=t.readInt16(),this.channelMappingFamily=t.readUint8(),0!==this.channelMappingFamily&&this.channelMappingTable.read(t)}},{key:"write",value:function(t){t.writeString(this.signature),t.writeUint8(this.version),t.writeUint8(this.channels),t.writeUint16(this.preSkip),t.writeUint32(this.sampleRate),t.writeInt16(this.outputGain),t.writeUint8(this.channelMappingFamily),0!==this.channelMappingFamily&&this.channelMappingTable.write(t)}},{key:"setCodec",value:function(t){this.sampleRate=t.sampleRate,this.channels=t.chLayout.nbChannels,this.channelMappingFamily=t.format}}]),t}(),m=function(t){function e(){var t;return(0,u.A)(this,e),(t=p(this,e)).signature="OpusTags",t}return(0,o.A)(e,t),(0,c.A)(e,[{key:"read",value:function(t){this.signature=t.readString(8),(0,a.A)((0,h.A)(e.prototype),"read",this).call(this,t)}},{key:"write",value:function(t){t.writeString(this.signature),(0,a.A)((0,h.A)(e.prototype),"write",this).call(this,t)}},{key:"addComment",value:function(t){this.comments.addComment(t)}},{key:"setCodec",value:function(t){}}]),e}(f.h)},797:(t,e,i)=>{"use strict";i.d(e,{G:()=>m,m:()=>v});var n=i(88435),r=i.n(n),s=i(77193),a=i(43070),h=i(60394),o=i(25767),u=i(31060),c=i(78716),l=i(81570),f=i(134),p=i(69584);function d(t,e,i){return e=(0,o.A)(e),(0,s.A)(t,g()?r()(e,i||[],(0,o.A)(t).constructor):e.apply(t,i))}function g(){try{var t=!Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){})))}catch(t){}return(g=function(){return!!t})()}var v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vorbis";(0,c.A)(this,t),(0,f.A)(this,"streamIndex",void 0),(0,f.A)(this,"packetType",void 0),(0,f.A)(this,"signature",void 0),(0,f.A)(this,"version",void 0),(0,f.A)(this,"channels",void 0),(0,f.A)(this,"sampleRate",void 0),(0,f.A)(this,"bitrateMaximum",void 0),(0,f.A)(this,"bitrateNominal",void 0),(0,f.A)(this,"bitrateMinimum",void 0),(0,f.A)(this,"blocksize0",void 0),(0,f.A)(this,"blocksize1",void 0),(0,f.A)(this,"framingFlag",void 0),this.signature=e,this.version=0,this.channels=1,this.sampleRate=48e3,this.bitrateMaximum=0,this.bitrateNominal=0,this.bitrateMinimum=0,this.blocksize0=2048,this.blocksize1=256}return(0,l.A)(t,[{key:"read",value:function(t){this.packetType=t.readUint8(),this.signature=t.readString(6),this.version=t.readUint32(),this.channels=t.readUint8(),this.sampleRate=t.readInt32(),this.bitrateMaximum=t.readInt32(),this.bitrateNominal=t.readInt32(),this.bitrateMinimum=t.readInt32();var e=255&t.readUint8();this.blocksize0=Math.pow(2,e>>>4),this.blocksize1=Math.pow(2,15&e),this.framingFlag=t.readUint8()}},{key:"write",value:function(t){t.writeUint8(1),t.writeString(this.signature),t.writeUint32(this.version),t.writeUint8(this.channels),t.writeInt32(this.sampleRate),t.writeInt32(this.bitrateMaximum),t.writeInt32(this.bitrateNominal),t.writeInt32(this.bitrateMinimum),t.writeUint8(Math.log2(this.blocksize0)<<4|Math.log2(this.blocksize1)),t.writeUint8(1)}},{key:"setCodec",value:function(t){this.sampleRate=t.sampleRate,this.channels=t.chLayout.nbChannels}}]),t}(),m=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vorbis";return(0,c.A)(this,e),t=d(this,e),(0,f.A)((0,a.A)(t),"packetType",void 0),(0,f.A)((0,a.A)(t),"framingFlag",void 0),t.signature=i,t.packetType=1,t.framingFlag=1,t}return(0,u.A)(e,t),(0,l.A)(e,[{key:"read",value:function(t){this.packetType=t.readUint8(),this.signature=t.readString(6),(0,h.A)((0,o.A)(e.prototype),"read",this).call(this,t),"vorbis"===this.signature&&(this.framingFlag=t.readUint8())}},{key:"write",value:function(t){t.writeUint8(this.packetType),t.writeString(this.signature),(0,h.A)((0,o.A)(e.prototype),"write",this).call(this,t),"vorbis"===this.signature&&t.writeUint8(this.framingFlag)}},{key:"addComment",value:function(t){this.comments.addComment(t)}},{key:"setCodec",value:function(t){}}]),e}(p.h)},2187:(t,e,i)=>{"use strict";i.d(e,{d:()=>a});var n=i(72739),r=i(44328),s=i(77231);function a(t,e,i){var a=BigInt(0);return n.__(t,(function(t){a+=t.codecpar.bitrate*(0,r.k)(e,i,s.i0)/BigInt(8e3)})),a}},52071:(t,e,i)=>{"use strict";i.d(e,{A:()=>v});var n=i(25182),r=i(36443),s=i.n(r),a=i(63939),h=i(9599),o=i(29170),u=i(77231),c=i(44328),l=i(2187),f=i(71517),p=i(9705),d=i(4624),g="src/avformat/function/seekInBytes.ts";function v(t,e,i,n,r,s){return m.apply(this,arguments)}function m(){return(m=(0,n.A)(s().mark((function t(e,i,n,r,v,m){var k,b,y,A,x,w,I,B,S,P,U,L,R,z;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k=e.ioReader.getPos(),t.next=3,e.ioReader.fileSize();case 3:if(b=t.sent,y=u.Dh,A=n,i.startTime!==u.Dh?A-=i.startTime:A-=i.firstDTS,!((x=(0,c.k)(n,i.timeBase,u.i0))<BigInt(1e4))){t.next=13;break}return d.Yz("seek pts is earlier then 10s, seek to first packet pos(".concat(r,") directly"),g,63),t.next=12,e.ioReader.seek(r);case 12:return t.abrupt("return",k);case 13:if(w=(0,l.d)(e.streams,A,i.timeBase),I=b-(0,l.d)(e.streams,BigInt(1e4),u.i0),B=(0,l.d)(e.streams,BigInt(1e4),u.i0),w>I&&(w=I),!(w<r)){t.next=21;break}return t.next=20,e.ioReader.seek(r);case 20:return t.abrupt("return",k);case 21:S=(0,f._5)(),P=b,U=BigInt(0);case 24:if(!(P-U<B)){t.next=28;break}return y=U,t.abrupt("break",52);case 28:return t.next=30,e.ioReader.seek(w);case 30:return t.next=32,m(e);case 32:return L=e.ioReader.getPos(),t.next=35,v(e,S);case 35:if(!(t.sent>=0)){t.next=48;break}if(R=(0,c.k)(a.f[17](S+8),(0,o.A)(S+72,h.P),u.i0),z=R-x,d.Yz("try to seek to pos: ".concat(w,", got packet pts: ").concat(a.f[17](S+8),"(").concat(R,"ms), diff: ").concat(z,"ms"),g,98),!(z<=BigInt(0)&&-z<BigInt(1e4))){t.next=45;break}return y=L,t.abrupt("break",52);case 45:w=z>BigInt(0)?U+(P=w)>>BigInt(1):(U=w)+P>>BigInt(1);case 46:t.next=50;break;case 48:return y=u.Dh,t.abrupt("break",52);case 50:t.next=24;break;case 52:if((0,f.Qe)(S),y===u.Dh){t.next=62;break}return d.Yz("finally seek to pos ".concat(y),g,126),t.next=57,e.ioReader.seek(y);case 57:return t.next=59,m(e);case 59:return t.abrupt("return",k);case 62:return t.next=64,e.ioReader.seek(k);case 64:return t.abrupt("return",BigInt(p.E$));case 65:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},82348:(t,e,i)=>{"use strict";i.d(e,{A:()=>u});var n=i(78716),r=i(81570),s=i(134),a=i(4624),h=i(50011),o="src/common/io/IOReaderSync.ts",u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;if((0,n.A)(this,t),(0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"endPointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),(0,s.A)(this,"fileSize_",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),(0,s.A)(this,"onSeek",void 0),(0,s.A)(this,"onSize",void 0),(0,s.A)(this,"flags",void 0),this.pos=BigInt(0),this.pointer=0,this.error=0,this.endPointer=0,this.littleEndian=!i,this.flags=0,r&&r.view)this.size=r.length,this.buffer=r,this.data=r.view;else if(r&&!r.byteOffset)this.size=r.length,this.buffer=r,this.data=new DataView(this.buffer.buffer);else{if(r)throw new Error("not support subarray of ArrayBuffer");this.size=Math.max(e,102400),this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}return(0,r.A)(t,[{key:"readUint8",value:function(){this.remainingLength()<1&&this.flush(1);var t=this.data.getUint8(this.pointer);return this.pointer++,this.pos++,t}},{key:"peekUint8",value:function(){return this.remainingLength()<1&&this.flush(1),this.data.getUint8(this.pointer)}},{key:"readUint16",value:function(){this.remainingLength()<2&&this.flush(2);var t=this.data.getUint16(this.pointer,this.littleEndian);return this.pointer+=2,this.pos+=BigInt(2),t}},{key:"peekUint16",value:function(){return this.remainingLength()<2&&this.flush(2),this.data.getUint16(this.pointer,this.littleEndian)}},{key:"readUint24",value:function(){this.remainingLength()<3&&this.flush(3);var t=this.readUint16(),e=this.readUint8();return this.littleEndian?e<<16|t:t<<8|e}},{key:"peekUint24",value:function(){this.remainingLength()<3&&this.flush(3);var t=this.pointer,e=this.pos,i=this.readUint16(),n=this.readUint8(),r=this.littleEndian?n<<16|i:i<<8|n;return this.pointer=t,this.pos=e,r}},{key:"readUint32",value:function(){this.remainingLength()<4&&this.flush(4);var t=this.data.getUint32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),t}},{key:"peekUint32",value:function(){return this.remainingLength()<4&&this.flush(4),this.data.getUint32(this.pointer,this.littleEndian)}},{key:"readUint64",value:function(){this.remainingLength()<8&&this.flush(8);var t=this.data.getBigUint64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),t}},{key:"peekUint64",value:function(){return this.remainingLength()<8&&this.flush(8),this.data.getBigUint64(this.pointer,this.littleEndian)}},{key:"readInt8",value:function(){this.remainingLength()<1&&this.flush(1);var t=this.data.getInt8(this.pointer);return this.pointer++,this.pos++,t}},{key:"peekInt8",value:function(){return this.remainingLength()<1&&this.flush(1),this.data.getInt8(this.pointer)}},{key:"readInt16",value:function(){this.remainingLength()<2&&this.flush(2);var t=this.data.getInt16(this.pointer,this.littleEndian);return this.pointer+=2,this.pos+=BigInt(2),t}},{key:"peekInt16",value:function(){return this.remainingLength()<2&&this.flush(2),this.data.getInt16(this.pointer,this.littleEndian)}},{key:"readInt24",value:function(){var t=this.readUint24();return 8388608&t?t-16777216:t}},{key:"peekInt24",value:function(){var t=this.peekUint24();return 8388608&t?t-16777216:t}},{key:"readInt32",value:function(){this.remainingLength()<4&&this.flush(4);var t=this.data.getInt32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),t}},{key:"peekInt32",value:function(){return this.remainingLength()<4&&this.flush(4),this.data.getInt32(this.pointer,this.littleEndian)}},{key:"readInt64",value:function(){this.remainingLength()<8&&this.flush(8);var t=this.data.getBigInt64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),t}},{key:"peekInt64",value:function(){return this.remainingLength()<8&&this.flush(8),this.data.getBigInt64(this.pointer,this.littleEndian)}},{key:"readFloat",value:function(){this.remainingLength()<4&&this.flush(4);var t=this.data.getFloat32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),t}},{key:"peekFloat",value:function(){return this.remainingLength()<4&&this.flush(4),this.data.getFloat32(this.pointer,this.littleEndian)}},{key:"readDouble",value:function(){this.remainingLength()<8&&this.flush(8);var t=this.data.getFloat64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),t}},{key:"peekDouble",value:function(){return this.remainingLength()<8&&this.flush(8),this.data.getFloat64(this.pointer,this.littleEndian)}},{key:"readHex",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="",i=0;i<t;i++){var n=this.readUint8().toString(16);e+=1===n.length?"0"+n:n}return e}},{key:"peekHex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t>this.size&&(this.error=-1048574,a.h2("peekHex, length too large",o,412)),this.remainingLength()<t&&this.flush(t);for(var e=this.pointer,i=this.pos,n="",r=0;r<t;r++){var s=this.readUint8().toString(16);n+=1===s.length?"0"+s:s}return this.pointer=e,this.pos=i,n}},{key:"readBuffer",value:function(t,e){if(!t)return new Uint8Array(0);if(e||(e=new Uint8Array(t)),this.remainingLength()<t){var i=0;if(this.remainingLength()>0){var n=this.remainingLength();e.set(this.buffer.subarray(this.pointer,this.pointer+n),i),i+=n,this.pointer+=n,this.pos+=BigInt(n),t-=n}for(;t>0;){this.flush();var r=Math.min(this.endPointer-this.pointer,t);e.set(this.buffer.subarray(this.pointer,this.pointer+r),i),i+=r,this.pointer+=r,this.pos+=BigInt(r),t-=r}}else e.set(this.buffer.subarray(this.pointer,this.pointer+t),0),this.pointer+=t,this.pos+=BigInt(t);return e}},{key:"peekBuffer",value:function(t,e){return t?(t>this.size&&(this.error=-1048574,a.h2("peekBuffer, length too large",o,505)),this.remainingLength()<t&&this.flush(t),e||(e=new Uint8Array(t)),e.set(this.buffer.subarray(this.pointer,this.pointer+t),0),e):new Uint8Array(0)}},{key:"readToBuffer",value:function(t,e){if(this.remainingLength()<t){var i=0;if(this.remainingLength()>0){var n=this.remainingLength();e.set(this.buffer.subarray(this.pointer,this.pointer+n),i),i+=n,this.pointer+=n,this.pos+=BigInt(n),t-=n}for(;t>0;){try{this.flush()}catch(t){if(-1048576===this.error&&i)return i;throw t}var r=Math.min(this.endPointer-this.pointer,t);e.set(this.buffer.subarray(this.pointer,this.pointer+r),i),i+=r,this.pointer+=r,this.pos+=BigInt(r),t-=r}return i}return e.set(this.buffer.subarray(this.pointer,this.pointer+t),0),this.pointer+=t,this.pos+=BigInt(t),t}},{key:"readString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.readBuffer(t);return h.decode(e)}},{key:"peekString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.peekBuffer(t);return h.decode(e)}},{key:"readLine",value:function(){for(var t="";;){for(var e=!1,i=this.pointer;i<this.endPointer;i++)if(10===this.buffer[i]||13===this.buffer[i]){i!==this.pointer&&(t+=this.readString(i-this.pointer)),e=!0;break}if(e)break;t+=this.readString(this.remainingLength()),this.flush()}var n=this.peekUint8();return 10!==n&&13!==n||(this.pointer++,13===n&&10===(n=this.peekUint8())&&this.pointer++),t}},{key:"peekLine",value:function(){this.remainingLength()<this.size&&this.flush();for(var t="",e=!1,i=this.pointer;i<this.endPointer;i++)if(10===this.buffer[i]||13===this.buffer[i]){t+=this.peekString(i-this.pointer),e=!0;break}return e||(this.error=-1048574,a.h2("peekLine, out of buffer",o,656)),t}},{key:"getPointer",value:function(){return this.pointer}},{key:"getPos",value:function(){return this.pos}},{key:"skip",value:function(t){for(var e=t;this.remainingLength()<t;)t-=this.remainingLength(),this.pointer=this.endPointer,this.flush();this.remainingLength()>=t&&(this.pointer+=t),this.pos+=BigInt(e)}},{key:"remainingLength",value:function(){return this.endPointer-this.pointer}},{key:"flush",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.onFlush||(this.error=-1048574,a.h2("IOReader error, flush failed because of no flush callback",o,720)),!(this.size-this.remainingLength()<=0)){if(t=Math.min(t,this.size),this.pointer<this.endPointer?(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer):this.endPointer=0,this.pointer=0,t)for(;this.remainingLength()<t;){var e=this.onFlush(this.buffer.subarray(this.endPointer));if(e<0)throw this.error=e,new Error("IOReader error, flush ".concat(-1048576===e?"ended":"failed",", ret: ").concat(e));this.endPointer+=e}else{var i=this.onFlush(this.buffer.subarray(this.endPointer));if(i<0)throw this.error=i,new Error("IOReader error, flush ".concat(-1048576===i?"ended":"failed",", ret: ").concat(i));this.endPointer+=i}this.error=0}}},{key:"seek",value:function(t){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])){var i=Number(t-this.pos);if(i<0&&Math.abs(i)<this.pointer)return this.pointer+=i,void(this.pos=t);if(i>0&&this.pointer+i<this.endPointer)return this.pointer+=i,void(this.pos=t);if(0===i)return}this.onSeek||(this.error=-1048574,a.h2("IOReader error, seek failed because of no seek callback",o,790)),this.pointer=this.endPointer=0,this.pos=t;var n=this.onSeek(t);0!==n&&(this.error=n,a.h2("IOReader error, seek failed",o,799)),e&&this.flush()}},{key:"getBuffer",value:function(){return this.buffer}},{key:"appendBuffer",value:function(t){if(this.size-this.endPointer>=t.length)this.buffer.set(t,this.endPointer),this.endPointer+=t.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=t.length)this.buffer.set(t,this.endPointer),this.endPointer+=t.length;else{var e=Math.min(this.size-this.endPointer,t.length);this.buffer.set(t.subarray(0,e),this.endPointer),this.endPointer+=e,a.R8("IOReader, call appendBuffer but the buffer's size is lagger then the remaining size",o,838)}}},{key:"reset",value:function(){this.pointer=this.endPointer=0,this.pos=BigInt(0),this.error=0}},{key:"setEndian",value:function(t){this.littleEndian=!t}},{key:"fileSize",value:function(){if(this.fileSize_)return this.fileSize_;if(!this.onSize)return a.R8("IOReader error, fileSize failed because of no onSize callback",o,871),BigInt(0);try{this.fileSize_=this.onSize()}catch(t){a.R8("IOReader error, call fileSize failed: ".concat(t),o,878),this.fileSize_=BigInt(0)}return this.fileSize_}},{key:"getBufferSize",value:function(){return this.size}},{key:"pipe",value:function(t,e){if(e)if(this.remainingLength()<e){if(this.remainingLength()>0){var i=this.remainingLength();t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+i)),this.pointer+=i,this.pos+=BigInt(i),e-=i}for(;e>0;){this.flush();var n=Math.min(this.endPointer-this.pointer,e);t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+n)),this.pointer+=n,this.pos+=BigInt(n),e-=n}}else t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+e)),this.pointer+=e,this.pos+=BigInt(e);else{if(this.remainingLength()>0){var r=this.remainingLength();t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+r)),this.pointer+=r,this.pos+=BigInt(r)}for(;this.onFlush(this.buffer.subarray(0))>0;){var s=this.remainingLength();t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+s)),this.pointer+=s,this.pos+=BigInt(s)}}}}]),t}()},35336:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var n=i(78716),r=i(81570),s=i(134),a=i(50011),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;if((0,n.A)(this,t),(0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),(0,s.A)(this,"onSeek",void 0),this.pointer=0,this.pos=BigInt(0),this.size=e,this.littleEndian=!i,this.error=0,r&&r.view)this.size=r.length,this.buffer=r,this.data=r.view;else if(r&&!r.byteOffset)this.size=r.length,this.buffer=r,this.data=new DataView(this.buffer.buffer);else{if(r)throw new Error("not support subarray of ArrayBuffer");this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}return(0,r.A)(t,[{key:"writeUint8",value:function(t){this.remainingLength()<1&&this.flush(),this.data.setUint8(this.pointer,t),this.pointer++,this.pos++}},{key:"writeUint16",value:function(t){this.remainingLength()<2&&this.flush(),this.data.setUint16(this.pointer,t,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}},{key:"writeUint24",value:function(t){this.remainingLength()<3&&this.flush();var e=(16711680&t)>>16,i=(65280&t)>>8,n=255&t;this.littleEndian?(this.writeUint8(n),this.writeUint8(i),this.writeUint8(e)):(this.writeUint8(e),this.writeUint8(i),this.writeUint8(n))}},{key:"writeUint32",value:function(t){this.remainingLength()<4&&this.flush(),this.data.setUint32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}},{key:"writeUint64",value:function(t){this.remainingLength()<8&&this.flush(),this.data.setBigUint64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}},{key:"writeInt8",value:function(t){this.remainingLength()<1&&this.flush(),this.data.setInt8(this.pointer,t),this.pointer++,this.pos++}},{key:"writeInt16",value:function(t){this.remainingLength()<2&&this.flush(),this.data.setInt16(this.pointer,t,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}},{key:"writeInt24",value:function(t){this.writeUint24(t<0?t+16777216:t)}},{key:"writeInt32",value:function(t){this.remainingLength()<4&&this.flush(),this.data.setInt32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}},{key:"writeInt64",value:function(t){this.remainingLength()<8&&this.flush(),this.data.setBigInt64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}},{key:"writeFloat",value:function(t){this.remainingLength()<4&&this.flush(),this.data.setFloat32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}},{key:"writeDouble",value:function(t){this.remainingLength()<8&&this.flush(),this.data.setFloat64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}},{key:"getPointer",value:function(){return this.pointer}},{key:"getPos",value:function(){return this.pos}},{key:"remainingLength",value:function(){return this.size-this.pointer}},{key:"writeBuffer",value:function(t){if(t.length){var e=t.length;if(this.remainingLength()<e)for(var i=0;e>0;){this.flush();var n=Math.min(this.size,e);this.buffer.set(t.subarray(i,i+n),this.pointer),this.pointer+=n,this.pos+=BigInt(n),i+=n,e-=n}else this.buffer.set(t,this.pointer),this.pointer+=e,this.pos+=BigInt(e)}}},{key:"writeString",value:function(t){var e=a.encode(t);return this.writeBuffer(e),e.length}},{key:"flush",value:function(){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){var t=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==t)throw this.error=t,Error("IOWriter error, flush failed")}this.pointer=0}},{key:"flushToPos",value:function(t){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){var e=this.onFlush(this.buffer.subarray(0,this.pointer),t);if(0!==e)throw this.error=e,Error("IOWriter error, flush failed")}this.pointer=0}},{key:"seek",value:function(t){if(!this.onSeek)throw this.error=-1048574,Error("IOWriter error, seek failed because of no seek callback");this.flush();var e=this.onSeek(t);if(0!==e)throw this.error=e,Error("IOWriter error, seek failed");this.pos=t}},{key:"seekInline",value:function(t){var e=this.pointer;this.pointer=Math.max(0,Math.min(this.size,t)),this.pos+=BigInt(this.pointer-e)}},{key:"skip",value:function(t){var e=this.pointer;this.pointer=Math.min(this.size,this.pointer+t),this.pos+=BigInt(this.pointer-e)}},{key:"back",value:function(t){var e=this.pointer;this.pointer=Math.max(0,this.pointer-t),this.pos+=BigInt(this.pointer-e)}},{key:"getBuffer",value:function(){return this.buffer.subarray(0,this.pointer)}},{key:"setEndian",value:function(t){this.littleEndian=!t}},{key:"reset",value:function(){this.pointer=0,this.pos=BigInt(0),this.error=0}},{key:"getBufferSize",value:function(){return this.size}}]),t}()},80345:(t,e,i)=>{i(28351),t.exports=i(46438).Reflect.get},28351:(t,e,i)=>{var n=i(81033),r=i(66123),s=i(75509),a=i(88535),h=i(24401),o=i(80812);a(a.S,"Reflect",{get:function t(e,i){var a,u,c=arguments.length<3?e:arguments[2];return o(e)===c?e[i]:(a=n.f(e,i))?s(a,"value")?a.value:void 0!==a.get?a.get.call(c):void 0:h(u=r(e))?t(u,i,c):void 0}})},803:(t,e,i)=>{var n=i(16560),r=i(54220);function s(e){return t.exports=s="function"==typeof n&&"symbol"==typeof r?function(t){return typeof t}:function(t){return t&&"function"==typeof n&&t.constructor===n&&t!==n.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},60394:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(80345),r=i(3706),s=i(41473);function a(){return a="undefined"!=typeof Reflect&&n?n.bind():function(t,e,i){var n=(0,s.A)(t,e);if(n){var a=r(n,e);return a.get?a.get.call(arguments.length<3?t:i):a.value}},a.apply(this,arguments)}},41473:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var n=i(25767);function r(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,n.A)(t)););return t}}}]);